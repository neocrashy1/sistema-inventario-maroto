<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="640" viewBox="0 0 1000 640">
  <defs>
    <style type="text/css">
      .box { fill: #f8fafc; stroke: #0ea5e9; stroke-width: 2; rx: 12; }
      .title { font: 700 16px sans-serif; fill: #0f172a; }
      .text { font: 400 13px sans-serif; fill: #334155; }
      .arrow { stroke: #334155; stroke-width: 2; marker-end: url(#arrowhead); }
      .note { font: 400 12px sans-serif; fill: #475569; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#334155" />
    </marker>
  </defs>
  <!-- Dashboard React -->
  <rect class="box" x="60" y="40" width="360" height="140" />
  <text class="title" x="80" y="70">Dashboard React (Frontend)</text>
  <text class="text" x="80" y="95">• SPA em React/TypeScript</text>
  <text class="text" x="80" y="115">• Autenticação JWT (Bearer)</text>
  <text class="text" x="80" y="135">• Consome endpoints: listagens e detalhes</text>

  <!-- API REST -->
  <rect class="box" x="60" y="240" width="360" height="170" />
  <text class="title" x="80" y="270">API REST (FastAPI)</text>
  <text class="text" x="80" y="295">• Autenticação híbrida: JWT + API Key de Agente</text>
  <text class="text" x="80" y="315">• Endpoints: /machines, /alerts, /tickets</text>
  <text class="text" x="80" y="335">• Segurança: TLS, RBAC, sanitização, auditoria</text>
  <text class="text" x="80" y="355">• ORM: SQLAlchemy Async</text>

  <!-- Banco de Dados -->
  <rect class="box" x="60" y="470" width="360" height="120" />
  <text class="title" x="80" y="500">Banco de Dados</text>
  <text class="text" x="80" y="525">• PostgreSQL (preferido) ou SQL Server</text>
  <text class="text" x="80" y="545">• Tabelas: machines, alerts, tickets, locations</text>

  <!-- Agente Python -->
  <rect class="box" x="560" y="240" width="360" height="170" />
  <text class="title" x="580" y="270">Agente Python</text>
  <text class="text" x="580" y="295">• Executa em hosts monitorados</text>
  <text class="text" x="580" y="315">• Autentica via X-API-Key</text>
  <text class="text" x="580" y="335">• Envia /machines/register e /machines/status</text>

  <!-- Comunicações -->
  <line class="arrow" x1="240" y1="180" x2="240" y2="240" />
  <text class="note" x="250" y="210">HTTPS (TLS) + Authorization: Bearer</text>

  <line class="arrow" x1="560" y1="325" x2="420" y2="325" />
  <text class="note" x="445" y="310">HTTPS (TLS) + X-API-Key</text>

  <line class="arrow" x1="240" y1="410" x2="240" y2="470" />
  <text class="note" x="250" y="440">SQLAlchemy (Async)</text>

  <!-- Anotações de segurança -->
  <text class="title" x="560" y="40">Padrões de Segurança</text>
  <text class="text" x="560" y="65">• TLS obrigatório (certificados válidos)</text>
  <text class="text" x="560" y="85">• JWT para usuários (Authorization: Bearer)</text>
  <text class="text" x="560" y="105">• API Key para agentes (Header: X-API-Key)</text>
  <text class="text" x="560" y="125">• RBAC por papéis: admin, gestor, auditor, agent, system</text>
  <text class="text" x="560" y="145">• Rate limiting e verificação de integridade (HMAC)</text>
  <text class="text" x="560" y="165">• Auditoria de operações (registro e assinatura)</text>
</svg>