import{r as a,c as e,o as t,e as l,f as s,x as o,D as i,B as n,z as r,F as d,C as c,y as u,m as p,K as v,an as m,a9 as f,u as b,k as y}from"./vue-vendor-BY5hdAT7.js";import{_ as g,l as h}from"./index-Dur0lEaU.js";import{u as C}from"./reports-B0ZoCeuq.js";import"./utils-vendor-COuxBHZ0.js";import"./serviceOrders-nzPMGKta.js";import"./employeeLoans-BCft1fZR.js";import"./thirdPartyLoans-C751nSTY.js";import"./physicalInventory-DJKBk5BT.js";import"./audits-BUtnpEeu.js";const D={class:"reports"},k={class:"page-header"},R={class:"page-actions"},F=["disabled"],w={class:"stats-grid"},S={class:"stat-card"},T={class:"stat-content"},P={class:"stat-number"},V={class:"stat-card"},x={class:"stat-content"},L={class:"stat-number"},j={class:"stat-card"},G={class:"stat-content"},U={class:"stat-number"},E={class:"stat-card"},B={class:"stat-content"},N={class:"stat-number"},z={class:"section"},A={class:"report-types-grid"},I=["onClick"],_={class:"report-type-content"},M={class:"report-type-category"},O={class:"section"},q={class:"filters-section"},K={class:"filters-grid"},H={class:"filter-group"},Y={class:"filter-group"},J=["value"],Q={class:"filter-group"},W={class:"filter-group"},X={class:"filter-group"},Z={class:"reports-table-container"},$={key:0,class:"loading-state"},aa={key:1,class:"empty-state"},ea={key:2,class:"table-wrapper"},ta={class:"reports-table"},la={class:"report-name"},sa={class:"report-type-badge"},oa={class:"action-buttons"},ia=["onClick"],na=["onClick"],ra={class:"modal-header"},da={class:"modal-body"},ca={class:"form-group"},ua=["value"],pa={class:"form-group"},va={class:"form-group"},ma={class:"date-range"},fa={class:"modal-footer"},ba=["disabled"],ya={key:0,class:"fas fa-spinner fa-spin"},ga={key:1,class:"fas fa-plus"},ha=g({__name:"Reports",setup(g){const ha=C(),Ca=a(!1),Da=a(""),ka=a(!1),Ra=a(!1),Fa=a({type:"",format:"PDF",startDate:"",endDate:""}),{reportTypes:wa,reportCategories:Sa,reportStatistics:Ta,filters:Pa}=ha,Va=e(()=>{let a=ha.filteredReports;if(Da.value){const e=Da.value.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(e)||a.generatedBy.toLowerCase().includes(e))}return a}),xa=async()=>{if(Fa.value.type){Ra.value=!0;try{await ha.generateReport(Fa.value.type,{format:Fa.value.format,startDate:Fa.value.startDate,endDate:Fa.value.endDate}),ka.value=!1,La()}catch(a){h.error("Erro ao gerar relatório:",a)}finally{Ra.value=!1}}},La=()=>{Fa.value={type:"",format:"PDF",startDate:"",endDate:""}},ja=()=>{ha.exportReportsList("csv")},Ga=()=>{ha.clearFilters(),Da.value=""},Ua=a=>{const e=wa.find(e=>e.id===a);return e?e.name:a};return t(()=>{const a=new Date,e=new Date(a.getFullYear(),a.getMonth()-1,a.getDate());Fa.value.startDate=e.toISOString().split("T")[0],Fa.value.endDate=a.toISOString().split("T")[0]}),(a,e)=>(y(),l("div",D,[s("div",k,[e[16]||(e[16]=s("div",{class:"page-header-content"},[s("h1",{class:"page-title"},"Relatórios"),s("p",{class:"page-subtitle"},"Gerencie e gere relatórios do sistema de gestão de ativos")],-1)),s("div",R,[s("button",{class:"btn btn-outline",onClick:ja,disabled:Ca.value},[...e[14]||(e[14]=[s("i",{class:"fas fa-download"},null,-1),i(" Exportar Lista ",-1)])],8,F),s("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=a=>ka.value=!0)},[...e[15]||(e[15]=[s("i",{class:"fas fa-plus"},null,-1),i(" Gerar Relatório ",-1)])])])]),s("div",w,[s("div",S,[e[18]||(e[18]=s("div",{class:"stat-icon"},[s("i",{class:"fas fa-file-alt"})],-1)),s("div",T,[s("div",P,n(r(Ta).total),1),e[17]||(e[17]=s("div",{class:"stat-label"},"Total de Relatórios",-1))])]),s("div",V,[e[20]||(e[20]=s("div",{class:"stat-icon completed"},[s("i",{class:"fas fa-check-circle"})],-1)),s("div",x,[s("div",L,n(r(Ta).completed),1),e[19]||(e[19]=s("div",{class:"stat-label"},"Concluídos",-1))])]),s("div",j,[e[22]||(e[22]=s("div",{class:"stat-icon processing"},[s("i",{class:"fas fa-sync-alt"})],-1)),s("div",G,[s("div",U,n(r(Ta).processing),1),e[21]||(e[21]=s("div",{class:"stat-label"},"Processando",-1))])]),s("div",E,[e[24]||(e[24]=s("div",{class:"stat-icon size"},[s("i",{class:"fas fa-hdd"})],-1)),s("div",B,[s("div",N,n(r(Ta).totalSize)+" MB",1),e[23]||(e[23]=s("div",{class:"stat-label"},"Tamanho Total",-1))])])]),s("div",z,[e[26]||(e[26]=s("h2",{class:"section-title"},"Tipos de Relatórios Disponíveis",-1)),s("div",A,[(y(!0),l(d,null,c(r(wa),a=>{return y(),l("div",{key:a.id,class:"report-type-card",onClick:e=>(a=>{Fa.value.type=a.id,ka.value=!0})(a)},[s("div",{class:u(["report-type-icon",a.color])},[s("i",{class:u(a.icon)},null,2)],2),s("div",_,[s("h3",null,n(a.name),1),s("p",null,n(a.description),1),s("span",M,n((t=a.category,{assets:"Ativos",financial:"Financeiro",maintenance:"Manutenção",loans:"Empréstimos",audit:"Auditoria",warranty:"Garantias"}[t]||t)),1)]),e[25]||(e[25]=s("div",{class:"report-type-action"},[s("i",{class:"fas fa-arrow-right"})],-1))],8,I);var t}),128))])]),s("div",O,[e[37]||(e[37]=s("h2",{class:"section-title"},"Relatórios Gerados",-1)),s("div",q,[s("div",K,[s("div",H,[e[27]||(e[27]=s("label",null,"Buscar",-1)),p(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>Da.value=a),placeholder:"Nome do relatório, gerado por...",class:"form-input"},null,512),[[v,Da.value]])]),s("div",Y,[e[29]||(e[29]=s("label",null,"Categoria",-1)),p(s("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>r(Pa).category=a),class:"form-select"},[e[28]||(e[28]=s("option",{value:""},"Todas as Categorias",-1)),(y(!0),l(d,null,c(r(Sa),a=>(y(),l("option",{key:a.id,value:a.id},n(a.name)+" ("+n(a.count)+") ",9,J))),128))],512),[[m,r(Pa).category]])]),s("div",Q,[e[31]||(e[31]=s("label",null,"Status",-1)),p(s("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>r(Pa).status=a),class:"form-select"},[...e[30]||(e[30]=[s("option",{value:""},"Todos os Status",-1),s("option",{value:"completed"},"Concluído",-1),s("option",{value:"processing"},"Processando",-1),s("option",{value:"failed"},"Falhou",-1)])],512),[[m,r(Pa).status]])]),s("div",W,[e[33]||(e[33]=s("label",null,"Formato",-1)),p(s("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>r(Pa).format=a),class:"form-select"},[...e[32]||(e[32]=[s("option",{value:""},"Todos os Formatos",-1),s("option",{value:"PDF"},"PDF",-1),s("option",{value:"Excel"},"Excel",-1),s("option",{value:"CSV"},"CSV",-1)])],512),[[m,r(Pa).format]])]),s("div",X,[e[35]||(e[35]=s("label",null,"Período",-1)),p(s("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>r(Pa).dateRange=a),class:"form-select"},[...e[34]||(e[34]=[f('<option value="last-7-days" data-v-2b01e901>Últimos 7 dias</option><option value="last-30-days" data-v-2b01e901>Últimos 30 dias</option><option value="last-90-days" data-v-2b01e901>Últimos 90 dias</option><option value="last-year" data-v-2b01e901>Último ano</option><option value="all" data-v-2b01e901>Todos</option>',5)])],512),[[m,r(Pa).dateRange]])]),s("div",{class:"filter-actions"},[s("button",{class:"btn btn-outline btn-sm",onClick:Ga},[...e[36]||(e[36]=[s("i",{class:"fas fa-times"},null,-1),i(" Limpar ",-1)])])])])])]),s("div",Z,[Ca.value?(y(),l("div",$,[...e[38]||(e[38]=[s("i",{class:"fas fa-spinner fa-spin"},null,-1),s("p",null,"Carregando relatórios...",-1)])])):0===Va.value.length?(y(),l("div",aa,[...e[39]||(e[39]=[s("i",{class:"fas fa-file-alt"},null,-1),s("h3",null,"Nenhum relatório encontrado",-1),s("p",null,"Não há relatórios que correspondam aos filtros selecionados.",-1)])])):(y(),l("div",ea,[s("table",ta,[e[44]||(e[44]=s("thead",null,[s("tr",null,[s("th",null,"Nome do Relatório"),s("th",null,"Tipo"),s("th",null,"Data de Geração"),s("th",null,"Gerado Por"),s("th",null,"Status"),s("th",null,"Formato"),s("th",null,"Tamanho"),s("th",null,"Ações")])],-1)),s("tbody",null,[(y(!0),l(d,null,c(Va.value,a=>{return y(),l("tr",{key:a.id},[s("td",null,[s("div",la,[e[40]||(e[40]=s("i",{class:"fas fa-file-alt"},null,-1)),i(" "+n(a.name),1)])]),s("td",null,[s("span",sa,n(Ua(a.type)),1)]),s("td",null,n((r=a.generatedAt,new Date(r).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))),1),s("td",null,n(a.generatedBy),1),s("td",null,[s("span",{class:u(["status-badge",a.status])},[e[41]||(e[41]=s("i",{class:"fas fa-circle"},null,-1)),i(" "+n((t=a.status,{completed:"Concluído",processing:"Processando",failed:"Falhou"}[t]||t)),1)],2)]),s("td",null,[s("span",{class:u(["format-badge",a.format.toLowerCase()])},n(a.format),3)]),s("td",null,n(a.size||"N/A"),1),s("td",null,[s("div",oa,["completed"===a.status?(y(),l("button",{key:0,class:"btn btn-sm btn-outline",onClick:e=>{return t=a.id,void ha.downloadReport(t);var t},title:"Download"},[...e[42]||(e[42]=[s("i",{class:"fas fa-download"},null,-1)])],8,ia)):o("",!0),s("button",{class:"btn btn-sm btn-danger",onClick:e=>{return t=a.id,void(confirm("Tem certeza que deseja excluir este relatório?")&&ha.deleteReport(t));var t},title:"Excluir"},[...e[43]||(e[43]=[s("i",{class:"fas fa-trash"},null,-1)])],8,na)])])]);var t,r}),128))])])]))]),ka.value?(y(),l("div",{key:0,class:"modal-overlay",onClick:e[13]||(e[13]=a=>ka.value=!1)},[s("div",{class:"modal",onClick:e[12]||(e[12]=b(()=>{},["stop"]))},[s("div",ra,[e[46]||(e[46]=s("h3",null,"Gerar Novo Relatório",-1)),s("button",{class:"modal-close",onClick:e[6]||(e[6]=a=>ka.value=!1)},[...e[45]||(e[45]=[s("i",{class:"fas fa-times"},null,-1)])])]),s("div",da,[s("div",ca,[e[48]||(e[48]=s("label",null,"Tipo de Relatório",-1)),p(s("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>Fa.value.type=a),class:"form-select"},[e[47]||(e[47]=s("option",{value:""},"Selecione um tipo",-1)),(y(!0),l(d,null,c(r(wa),a=>(y(),l("option",{key:a.id,value:a.id},n(a.name),9,ua))),128))],512),[[m,Fa.value.type]])]),s("div",pa,[e[50]||(e[50]=s("label",null,"Formato",-1)),p(s("select",{"onUpdate:modelValue":e[8]||(e[8]=a=>Fa.value.format=a),class:"form-select"},[...e[49]||(e[49]=[s("option",{value:"PDF"},"PDF",-1),s("option",{value:"Excel"},"Excel",-1),s("option",{value:"CSV"},"CSV",-1)])],512),[[m,Fa.value.format]])]),s("div",va,[e[52]||(e[52]=s("label",null,"Período",-1)),s("div",ma,[p(s("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=a=>Fa.value.startDate=a),class:"form-input"},null,512),[[v,Fa.value.startDate]]),e[51]||(e[51]=s("span",null,"até",-1)),p(s("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=a=>Fa.value.endDate=a),class:"form-input"},null,512),[[v,Fa.value.endDate]])])])]),s("div",fa,[s("button",{class:"btn btn-outline",onClick:e[11]||(e[11]=a=>ka.value=!1)}," Cancelar "),s("button",{class:"btn btn-primary",onClick:xa,disabled:!Fa.value.type||Ra.value},[Ra.value?(y(),l("i",ya)):(y(),l("i",ga)),i(" "+n(Ra.value?"Gerando...":"Gerar Relatório"),1)],8,ba)])])])):o("",!0)]))}},[["__scopeId","data-v-2b01e901"]]);export{ha as default};
//# sourceMappingURL=Reports-D7QdxlYg.js.map
