import{_ as e}from"./index-Dur0lEaU.js";import{r as l,c as a,e as t,f as s,B as o,x as r,F as i,C as n,L as u,k as c}from"./vue-vendor-BY5hdAT7.js";import"./utils-vendor-COuxBHZ0.js";const v={class:"simple-pie-chart"},d={class:"chart-header"},h={class:"chart-title"},p={class:"chart-container"},f={class:"chart-content"},g=["width","height"],y=["transform"],$=["d","fill","stroke","stroke-width","onMouseover"],m=["cx","cy","r","fill"],b=["transform"],M={y:"-5","text-anchor":"middle","dominant-baseline":"middle",class:"center-value"},x={class:"chart-legend"},k=["onMouseover"],C={class:"legend-content"},z={class:"legend-label"},S={class:"legend-value"},w={class:"tooltip-title"},L={class:"tooltip-value"},j=e({__name:"SimplePieChart",props:{title:{type:String,default:"GrÃ¡fico de Pizza"},data:{type:Array,required:!0,validator:e=>e.every(e=>e.label&&"number"==typeof e.value&&e.color)},size:{type:Number,default:300},donut:{type:Boolean,default:!1},showCenterText:{type:Boolean,default:!1},strokeColor:{type:String,default:"#ffffff"},strokeWidth:{type:Number,default:2},centerFill:{type:String,default:"#ffffff"}},setup(e){const j=e,P=l({visible:!1,x:0,y:0,label:"",value:"",percentage:""}),_=l(-1),A=a(()=>j.size/2),B=a(()=>j.size/2-10),I=a(()=>j.donut?.6*B.value:0),F=a(()=>j.data.reduce((e,l)=>e+l.value,0)),T=a(()=>{let e=-Math.PI/2;return j.data.map((l,a)=>{const t=l.value/F.value,s=2*t*Math.PI,o=e,r=e+s,i=Math.cos(o)*B.value,n=Math.sin(o)*B.value,u=Math.cos(r)*B.value,c=Math.sin(r)*B.value,v=s>Math.PI?1:0;let d;if(j.donut){const e=Math.cos(o)*I.value,l=Math.sin(o)*I.value,a=Math.cos(r)*I.value,t=Math.sin(r)*I.value;d=[`M ${i} ${n}`,`A ${B.value} ${B.value} 0 ${v} 1 ${u} ${c}`,`L ${a} ${t}`,`A ${I.value} ${I.value} 0 ${v} 0 ${e} ${l}`,"Z"].join(" ")}else d=["M 0 0",`L ${i} ${n}`,`A ${B.value} ${B.value} 0 ${v} 1 ${u} ${c}`,"Z"].join(" ");return e=r,{path:d,color:l.color,label:l.label,value:l.value,percentage:Math.round(100*t),index:a}})}),N=()=>{P.value.visible=!1},W=()=>{_.value=-1};return(l,a)=>(c(),t("div",v,[s("div",d,[s("h3",h,o(e.title),1)]),s("div",p,[s("div",f,[(c(),t("svg",{width:e.size,height:e.size,class:"pie-svg"},[s("g",{class:"pie-slices",transform:`translate(${A.value}, ${A.value})`},[(c(!0),t(i,null,n(T.value,(l,a)=>(c(),t("path",{key:a,d:l.path,fill:l.color,stroke:e.strokeColor,"stroke-width":e.strokeWidth,class:"pie-slice",onMouseover:e=>((e,l)=>{const a=e.target.closest(".chart-container").getBoundingClientRect();P.value={visible:!0,x:e.clientX-a.left+10,y:e.clientY-a.top-10,label:l.label,value:l.value.toLocaleString(),percentage:l.percentage}})(e,l),onMouseout:N},null,40,$))),128))],8,y),e.donut?(c(),t("circle",{key:0,cx:A.value,cy:A.value,r:I.value,fill:e.centerFill,class:"center-circle"},null,8,m)):r("",!0),e.showCenterText?(c(),t("g",{key:1,class:"center-text",transform:`translate(${A.value}, ${A.value})`},[s("text",M,o(F.value.toLocaleString()),1),a[0]||(a[0]=s("text",{y:"15","text-anchor":"middle","dominant-baseline":"middle",class:"center-label"}," Total ",-1))],8,b)):r("",!0)],8,g)),s("div",x,[(c(!0),t(i,null,n(e.data,(e,l)=>{return c(),t("div",{key:l,class:"legend-item",onMouseover:e=>(e=>{_.value=e})(l),onMouseout:W},[s("div",{class:"legend-color",style:u({backgroundColor:e.color})},null,4),s("div",C,[s("div",z,o(e.label),1),s("div",S,o(e.value.toLocaleString())+" ("+o((a=e.value,Math.round(a/F.value*100)))+"%) ",1)])],40,k);var a}),128))])]),P.value.visible?(c(),t("div",{key:0,class:"chart-tooltip",style:u({left:P.value.x+"px",top:P.value.y+"px"})},[s("div",w,o(P.value.label),1),s("div",L,o(P.value.value)+" ("+o(P.value.percentage)+"%)",1)],4)):r("",!0)])]))}},[["__scopeId","data-v-902ed5be"]]);export{j as default};
//# sourceMappingURL=SimplePieChart-CppmaDYr.js.map
