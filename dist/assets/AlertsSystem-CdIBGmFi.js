import{_ as e,n as a,l}from"./index-Dur0lEaU.js";import{r as s,c as t,o as i,a as r,j as c,e as o,k as n,f as d,g as u,D as v,B as m,l as f,I as _,F as h,C as p,y,x as g}from"./vue-vendor-BY5hdAT7.js";import"./utils-vendor-COuxBHZ0.js";const b={class:"alerts-system"},w={class:"alerts-header"},x={class:"header-content"},D={class:"header-info"},k={class:"alerts-title"},C={class:"alerts-subtitle"},z={class:"header-actions"},S={class:"alerts-summary"},A={class:"summary-value"},I={class:"summary-value"},M={class:"summary-value"},U={class:"summary-value"},V={class:"alerts-list"},O={class:"d-flex justify-space-between align-center w-100"},P={key:1},R={class:"alert-machine"},E={class:"alert-description"},j={class:"alert-time"},T={class:"alert-actions"},q={class:"alert-detail-section"},$={class:"detail-item"},F={class:"detail-value"},L={class:"detail-item"},B={class:"detail-value"},K={class:"alert-detail-section"},N={class:"detail-item mb-2"},H={class:"detail-item mb-2"},G={class:"detail-value"},J={class:"detail-item mb-2"},Q={class:"detail-value"},W={class:"detail-item mb-2"},X={class:"detail-value"},Y={class:"detail-item mb-2"},Z={class:"detail-value"},ee={class:"detail-item"},ae={class:"detail-value"},le={key:0,class:"alert-detail-section"},se={class:"recommendations-list"},te=e({__name:"AlertsSystem",setup(e){const te=s([]),ie=s(!1),re=s(!1),ce=s(null),oe=s(null),ne=s(!1),de=s(""),ue=s("success"),ve=t(()=>te.value.filter(e=>"active"===e.status)),me=t(()=>ve.value.filter(e=>"critical"===e.severity)),fe=t(()=>ve.value.filter(e=>"warning"===e.severity)),_e=t(()=>ve.value.filter(e=>"info"===e.severity)),he=t(()=>{const e=(new Date).toDateString();return te.value.filter(a=>"resolved"===a.status&&new Date(a.resolved_at).toDateString()===e).length}),pe=t(()=>{const e={critical:3,warning:2,info:1};return[...ve.value].sort((a,l)=>e[a.severity]!==e[l.severity]?e[l.severity]-e[a.severity]:new Date(l.created_at)-new Date(a.created_at))}),ye=async()=>{try{const e=await a.getAll();te.value=e.data}catch(e){l.error("Error loading alerts:",e),te.value=ge()}},ge=()=>[{id:1,title:"CPU com uso crítico",description:"Uso de CPU acima de 90% por mais de 5 minutos",severity:"critical",category:"CPU",machine_name:"DESKTOP-001",machine_ip:"192.168.1.100",current_value:"95%",threshold:"90%",status:"active",created_at:new Date(Date.now()-6e5).toISOString(),recommendations:["Verificar processos com alto consumo de CPU","Considerar reiniciar serviços desnecessários","Monitorar temperatura do processador"]},{id:2,title:"Memória RAM baixa",description:"Uso de memória acima de 85%",severity:"warning",category:"Memory",machine_name:"DESKTOP-002",machine_ip:"192.168.1.101",current_value:"87%",threshold:"85%",status:"active",created_at:new Date(Date.now()-18e5).toISOString(),recommendations:["Fechar aplicações desnecessárias","Verificar vazamentos de memória","Considerar adicionar mais RAM"]},{id:3,title:"Disco quase cheio",description:"Espaço em disco C: abaixo de 10%",severity:"critical",category:"Disk",machine_name:"DESKTOP-003",machine_ip:"192.168.1.102",current_value:"8% livre",threshold:"10% livre",status:"active",created_at:new Date(Date.now()-36e5).toISOString(),recommendations:["Executar limpeza de disco","Remover arquivos temporários","Mover arquivos para outro disco"]}],be=async()=>{ie.value=!0;try{await ye(),ze("Alertas atualizados com sucesso")}catch(e){Se("Erro ao atualizar alertas")}finally{ie.value=!1}},we=()=>{te.value=te.value.filter(e=>"active"!==e.status),ze("Todos os alertas foram limpos")},xe=e=>{const a=te.value.findIndex(a=>a.id===e.id);-1!==a&&(te.value[a].status="resolved",te.value[a].resolved_at=(new Date).toISOString()),re.value&&(re.value=!1),ze(`Alerta "${e.title}" foi resolvido`)},De=e=>{switch(e){case"critical":return"error";case"warning":return"warning";case"info":return"info";default:return"surface-variant"}},ke=e=>{switch(e){case"critical":return"mdi-alert";case"warning":return"mdi-alert-circle";case"info":return"mdi-information";default:return"mdi-help-circle"}},Ce=e=>{const a=new Date(e),l=new Date-a,s=Math.floor(l/6e4),t=Math.floor(s/60);return s<1?"Agora":s<60?`${s}min atrás`:t<24?`${t}h atrás`:a.toLocaleDateString("pt-BR")},ze=e=>{de.value=e,ue.value="success",ne.value=!0},Se=e=>{de.value=e,ue.value="error",ne.value=!0};return i(()=>{ye(),oe.value=setInterval(()=>{ye()},6e4)}),r(()=>{oe.value&&(clearInterval(oe.value),oe.value=null)}),(e,a)=>{const l=c("v-icon"),s=c("v-btn"),t=c("v-card-text"),i=c("v-card"),r=c("v-col"),oe=c("v-row"),ye=c("v-chip"),ge=c("v-card-title"),Se=c("v-avatar"),Ae=c("v-list-item-title"),Ie=c("v-list-item-subtitle"),Me=c("v-list-item"),Ue=c("v-list"),Ve=c("v-divider"),Oe=c("v-spacer"),Pe=c("v-card-actions"),Re=c("v-dialog"),Ee=c("v-snackbar");return n(),o("div",b,[d("div",w,[d("div",x,[d("div",D,[d("h3",k,[u(l,{icon:"mdi-alert-circle",class:"mr-2"}),a[5]||(a[5]=v(" Sistema de Alertas ",-1))]),d("p",C,m(ve.value.length)+" "+m(1===ve.value.length?"alerta ativo":"alertas ativos"),1)]),d("div",z,[u(s,{variant:"outlined",size:"small",onClick:be,loading:ie.value,class:"mr-2"},{default:f(()=>[u(l,{icon:"mdi-refresh",class:"mr-1"}),a[6]||(a[6]=v(" Atualizar ",-1))]),_:1},8,["loading"]),u(s,{variant:"outlined",size:"small",onClick:we,disabled:0===ve.value.length},{default:f(()=>[u(l,{icon:"mdi-notification-clear-all",class:"mr-1"}),a[7]||(a[7]=v(" Limpar Todos ",-1))]),_:1},8,["disabled"])])])]),d("div",S,[u(oe,{dense:""},{default:f(()=>[u(r,{cols:"12",sm:"6",md:"3"},{default:f(()=>[u(i,{variant:"tonal",color:"error"},{default:f(()=>[u(t,{class:"text-center"},{default:f(()=>[u(l,{icon:"mdi-alert",size:"large",class:"mb-2"}),d("div",A,m(me.value.length),1),a[8]||(a[8]=d("div",{class:"summary-label"},"Críticos",-1))]),_:1})]),_:1})]),_:1}),u(r,{cols:"12",sm:"6",md:"3"},{default:f(()=>[u(i,{variant:"tonal",color:"warning"},{default:f(()=>[u(t,{class:"text-center"},{default:f(()=>[u(l,{icon:"mdi-alert-circle",size:"large",class:"mb-2"}),d("div",I,m(fe.value.length),1),a[9]||(a[9]=d("div",{class:"summary-label"},"Avisos",-1))]),_:1})]),_:1})]),_:1}),u(r,{cols:"12",sm:"6",md:"3"},{default:f(()=>[u(i,{variant:"tonal",color:"info"},{default:f(()=>[u(t,{class:"text-center"},{default:f(()=>[u(l,{icon:"mdi-information",size:"large",class:"mb-2"}),d("div",M,m(_e.value.length),1),a[10]||(a[10]=d("div",{class:"summary-label"},"Informativos",-1))]),_:1})]),_:1})]),_:1}),u(r,{cols:"12",sm:"6",md:"3"},{default:f(()=>[u(i,{variant:"tonal",color:"success"},{default:f(()=>[u(t,{class:"text-center"},{default:f(()=>[u(l,{icon:"mdi-check-circle",size:"large",class:"mb-2"}),d("div",U,m(he.value),1),a[11]||(a[11]=d("div",{class:"summary-label"},"Resolvidos Hoje",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),d("div",V,[u(i,null,{default:f(()=>[u(ge,null,{default:f(()=>[d("div",O,[a[12]||(a[12]=d("span",null,"Alertas Ativos",-1)),u(ye,{color:me.value.length>0?"error":fe.value.length>0?"warning":_e.value.length>0?"info":"success",size:"small",variant:"flat"},{default:f(()=>[v(m(ve.value.length)+" ativos ",1)]),_:1},8,["color"])])]),_:1}),0===ve.value.length?(n(),_(t,{key:0,class:"text-center py-8"},{default:f(()=>[u(l,{icon:"mdi-check-circle",size:"64",color:"success",class:"mb-4"}),a[13]||(a[13]=d("h4",{class:"text-h6 mb-2"},"Nenhum alerta ativo",-1)),a[14]||(a[14]=d("p",{class:"text-body-2 text-medium-emphasis"}," Todas as máquinas estão funcionando normalmente. ",-1))]),_:1})):(n(),o("div",P,[u(Ue,null,{default:f(()=>[(n(!0),o(h,null,p(pe.value,e=>(n(),_(Me,{key:e.id,class:y(["alert-item",`alert-${e.severity}`])},{prepend:f(()=>[u(Se,{color:De(e.severity),size:"40"},{default:f(()=>[u(l,{icon:ke(e.severity),color:"white"},null,8,["icon"])]),_:2},1032,["color"])]),append:f(()=>[d("div",T,[u(s,{icon:"mdi-eye",size:"small",variant:"text",onClick:a=>(e=>{ce.value=e,re.value=!0})(e),class:"mr-1"},null,8,["onClick"]),u(s,{icon:"mdi-check",size:"small",variant:"text",color:"success",onClick:a=>xe(e),class:"mr-1"},null,8,["onClick"]),u(s,{icon:"mdi-close",size:"small",variant:"text",color:"error",onClick:a=>(e=>{const a=te.value.findIndex(a=>a.id===e.id);-1!==a&&(te.value[a].status="dismissed",te.value[a].dismissed_at=(new Date).toISOString()),ze(`Alerta "${e.title}" foi dispensado`)})(e)},null,8,["onClick"])])]),default:f(()=>[u(Ae,{class:"alert-title"},{default:f(()=>[v(m(e.title),1)]),_:2},1024),u(Ie,{class:"alert-details"},{default:f(()=>[d("div",R,[u(l,{icon:"mdi-desktop-classic",size:"small",class:"mr-1"}),v(" "+m(e.machine_name)+" ("+m(e.machine_ip)+") ",1)]),d("div",E,m(e.description),1),d("div",j,[u(l,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),v(" "+m(Ce(e.created_at)),1)])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]))]),_:1})]),u(Re,{modelValue:re.value,"onUpdate:modelValue":a[2]||(a[2]=e=>re.value=e),"max-width":"600"},{default:f(()=>[ce.value?(n(),_(i,{key:0},{default:f(()=>[u(ge,{class:"d-flex align-center"},{default:f(()=>[u(Se,{color:De(ce.value.severity),size:"32",class:"mr-3"},{default:f(()=>[u(l,{icon:ke(ce.value.severity),color:"white",size:"small"},null,8,["icon"])]),_:1},8,["color"]),v(" "+m(ce.value.title),1)]),_:1}),u(t,null,{default:f(()=>{return[d("div",q,[a[17]||(a[17]=d("h4",{class:"text-subtitle-1 mb-2"},"Informações da Máquina",-1)),u(oe,{dense:""},{default:f(()=>[u(r,{cols:"6"},{default:f(()=>[d("div",$,[a[15]||(a[15]=d("span",{class:"detail-label"},"Nome:",-1)),d("span",F,m(ce.value.machine_name),1)])]),_:1}),u(r,{cols:"6"},{default:f(()=>[d("div",L,[a[16]||(a[16]=d("span",{class:"detail-label"},"IP:",-1)),d("span",B,m(ce.value.machine_ip),1)])]),_:1})]),_:1})]),u(Ve,{class:"my-4"}),d("div",K,[a[24]||(a[24]=d("h4",{class:"text-subtitle-1 mb-2"},"Detalhes do Alerta",-1)),d("div",N,[a[18]||(a[18]=d("span",{class:"detail-label"},"Severidade:",-1)),u(ye,{color:De(ce.value.severity),size:"small",variant:"flat"},{default:f(()=>[v(m(ce.value.severity.toUpperCase()),1)]),_:1},8,["color"])]),d("div",H,[a[19]||(a[19]=d("span",{class:"detail-label"},"Categoria:",-1)),d("span",G,m(ce.value.category),1)]),d("div",J,[a[20]||(a[20]=d("span",{class:"detail-label"},"Descrição:",-1)),d("span",Q,m(ce.value.description),1)]),d("div",W,[a[21]||(a[21]=d("span",{class:"detail-label"},"Valor Atual:",-1)),d("span",X,m(ce.value.current_value),1)]),d("div",Y,[a[22]||(a[22]=d("span",{class:"detail-label"},"Limite:",-1)),d("span",Z,m(ce.value.threshold),1)]),d("div",ee,[a[23]||(a[23]=d("span",{class:"detail-label"},"Criado em:",-1)),d("span",ae,m((e=ce.value.created_at,new Date(e).toLocaleString("pt-BR"))),1)])]),u(Ve,{class:"my-4"}),ce.value.recommendations?(n(),o("div",le,[a[25]||(a[25]=d("h4",{class:"text-subtitle-1 mb-2"},"Recomendações",-1)),d("ul",se,[(n(!0),o(h,null,p(ce.value.recommendations,e=>(n(),o("li",{key:e},m(e),1))),128))])])):g("",!0)];var e}),_:1}),u(Pe,null,{default:f(()=>[u(Oe),u(s,{variant:"text",onClick:a[0]||(a[0]=e=>re.value=!1)},{default:f(()=>[...a[26]||(a[26]=[v(" Fechar ",-1)])]),_:1}),u(s,{color:"success",variant:"flat",onClick:a[1]||(a[1]=e=>xe(ce.value))},{default:f(()=>[...a[27]||(a[27]=[v(" Resolver ",-1)])]),_:1})]),_:1})]),_:1})):g("",!0)]),_:1},8,["modelValue"]),u(Ee,{modelValue:ne.value,"onUpdate:modelValue":a[4]||(a[4]=e=>ne.value=e),color:ue.value,timeout:3e3,location:"top right"},{actions:f(()=>[u(s,{variant:"text",onClick:a[3]||(a[3]=e=>ne.value=!1)},{default:f(()=>[...a[28]||(a[28]=[v(" Fechar ",-1)])]),_:1})]),default:f(()=>[v(m(de.value)+" ",1)]),_:1},8,["modelValue","color"])])}}},[["__scopeId","data-v-53ea4200"]]);export{te as default};
//# sourceMappingURL=AlertsSystem-CdIBGmFi.js.map
