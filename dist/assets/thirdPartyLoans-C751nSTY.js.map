{"version":3,"file":"thirdPartyLoans-C751nSTY.js","sources":["../../src/stores/thirdPartyLoans.js"],"sourcesContent":["import logger from '@/utils/logger'\nimport { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\n\nexport const useThirdPartyLoansStore = defineStore('thirdPartyLoans', () => {\n  // Estado\n  const loans = ref([\n    {\n      id: 1,\n      code: 'TER001',\n      thirdParty: {\n        id: 1,\n        name: 'TechSolutions Ltda',\n        type: 'Empresa',\n        document: '12.345.678/0001-90',\n        contactName: 'Roberto Mendes',\n        contactEmail: 'roberto@techsolutions.com',\n        contactPhone: '(11) 98765-4321',\n        address: 'Rua das Flores, 123 - São Paulo/SP'\n      },\n      asset: {\n        id: 1,\n        name: 'Projetor Epson PowerLite',\n        code: 'PROJ001',\n        category: 'Audiovisual',\n        serialNumber: 'EP789123456'\n      },\n      loanDate: '2024-01-10',\n      expectedReturnDate: '2024-01-20',\n      returnDate: '2024-01-18',\n      status: 'Devolvido',\n      purpose: 'Apresentação de projeto para cliente',\n      notes: 'Empréstimo para evento corporativo',\n      condition: 'Perfeito',\n      returnNotes: 'Devolvido em perfeitas condições após evento',\n      createdAt: '2024-01-10T09:00:00Z',\n      updatedAt: '2024-01-18T17:30:00Z'\n    },\n    {\n      id: 2,\n      code: 'TER002',\n      thirdParty: {\n        id: 2,\n        name: 'João Carlos Silva',\n        type: 'Pessoa Física',\n        document: '123.456.789-00',\n        contactName: 'João Carlos Silva',\n        contactEmail: 'joao.carlos@email.com',\n        contactPhone: '(11) 99876-5432',\n        address: 'Av. Paulista, 456 - São Paulo/SP'\n      },\n      asset: {\n        id: 2,\n        name: 'Notebook Dell Latitude 5520',\n        code: 'NB001',\n        category: 'Informática',\n        serialNumber: 'DL123456789'\n      },\n      loanDate: '2024-01-15',\n      expectedReturnDate: '2024-02-15',\n      returnDate: null,\n      status: 'Ativo',\n      purpose: 'Trabalho freelance de desenvolvimento',\n      notes: 'Empréstimo para projeto de 30 dias',\n      condition: null,\n      returnNotes: null,\n      createdAt: '2024-01-15T14:00:00Z',\n      updatedAt: '2024-01-15T14:00:00Z'\n    },\n    {\n      id: 3,\n      code: 'TER003',\n      thirdParty: {\n        id: 3,\n        name: 'Consultoria ABC',\n        type: 'Prestador de Serviço',\n        document: '98.765.432/0001-10',\n        contactName: 'Maria Fernanda',\n        contactEmail: 'maria@consultoriaabc.com',\n        contactPhone: '(11) 97654-3210',\n        address: 'Rua Augusta, 789 - São Paulo/SP'\n      },\n      asset: {\n        id: 3,\n        name: 'Tablet iPad Pro',\n        code: 'TAB001',\n        category: 'Informática',\n        serialNumber: 'IP456789123'\n      },\n      loanDate: '2024-01-05',\n      expectedReturnDate: '2024-01-12',\n      returnDate: null,\n      status: 'Em Atraso',\n      purpose: 'Auditoria de processos',\n      notes: 'Empréstimo para consultoria externa',\n      condition: null,\n      returnNotes: null,\n      createdAt: '2024-01-05T10:30:00Z',\n      updatedAt: '2024-01-05T10:30:00Z'\n    },\n    {\n      id: 4,\n      code: 'TER004',\n      thirdParty: {\n        id: 4,\n        name: 'EventPro Produções',\n        type: 'Empresa',\n        document: '11.222.333/0001-44',\n        contactName: 'Carlos Eduardo',\n        contactEmail: 'carlos@eventpro.com',\n        contactPhone: '(11) 96543-2109',\n        address: 'Rua dos Eventos, 321 - São Paulo/SP'\n      },\n      asset: {\n        id: 4,\n        name: 'Câmera Canon EOS R6',\n        code: 'CAM001',\n        category: 'Audiovisual',\n        serialNumber: 'CN987654321'\n      },\n      loanDate: '2024-01-20',\n      expectedReturnDate: '2024-01-25',\n      returnDate: null,\n      status: 'Ativo',\n      purpose: 'Cobertura fotográfica de evento corporativo',\n      notes: 'Empréstimo para evento de lançamento',\n      condition: null,\n      returnNotes: null,\n      createdAt: '2024-01-20T11:15:00Z',\n      updatedAt: '2024-01-20T11:15:00Z'\n    }\n  ])\n\n  const availableAssets = ref([\n    { id: 1, name: 'Projetor Epson PowerLite', code: 'PROJ001', category: 'Audiovisual', status: 'Disponível' },\n    { id: 2, name: 'Notebook Dell Latitude 5520', code: 'NB001', category: 'Informática', status: 'Emprestado' },\n    { id: 3, name: 'Tablet iPad Pro', code: 'TAB001', category: 'Informática', status: 'Emprestado' },\n    { id: 4, name: 'Câmera Canon EOS R6', code: 'CAM001', category: 'Audiovisual', status: 'Emprestado' },\n    { id: 5, name: 'Monitor LG UltraWide', code: 'MON001', category: 'Informática', status: 'Disponível' },\n    { id: 6, name: 'Impressora HP LaserJet', code: 'IMP001', category: 'Informática', status: 'Disponível' },\n    { id: 7, name: 'Smartphone Samsung Galaxy', code: 'CEL001', category: 'Comunicação', status: 'Disponível' },\n    { id: 8, name: 'Microfone Shure SM58', code: 'MIC001', category: 'Audiovisual', status: 'Disponível' },\n    { id: 9, name: 'Switch Cisco 24 portas', code: 'SW001', category: 'Rede', status: 'Disponível' }\n  ])\n\n  const loading = ref(false)\n  const error = ref(null)\n\n  // Getters\n  const totalLoans = computed(() => loans.value.length)\n  \n  const activeLoans = computed(() => {\n    return loans.value.filter(loan => loan.status === 'Ativo')\n  })\n\n  const overdueLoans = computed(() => {\n    const today = new Date()\n    return loans.value.filter(loan => {\n      if (loan.status !== 'Ativo') return false\n      const expectedDate = new Date(loan.expectedReturnDate)\n      return expectedDate < today\n    })\n  })\n\n  const returnedLoans = computed(() => {\n    return loans.value.filter(loan => loan.status === 'Devolvido')\n  })\n\n  const loansByType = computed(() => {\n    const types = {}\n    loans.value.forEach(loan => {\n      const type = loan.thirdParty.type\n      if (!types[type]) {\n        types[type] = 0\n      }\n      types[type]++\n    })\n    return types\n  })\n\n  const loansByStatus = computed(() => {\n    const statuses = {}\n    loans.value.forEach(loan => {\n      if (!statuses[loan.status]) {\n        statuses[loan.status] = 0\n      }\n      statuses[loan.status]++\n    })\n    return statuses\n  })\n\n  const assetsOnLoan = computed(() => {\n    return loans.value\n      .filter(loan => loan.status === 'Ativo')\n      .map(loan => loan.asset.id)\n  })\n\n  const availableAssetsForLoan = computed(() => {\n    return availableAssets.value.filter(asset => \n      asset.status === 'Disponível' && !assetsOnLoan.value.includes(asset.id)\n    )\n  })\n\n  const loansByMonth = computed(() => {\n    const months = {}\n    loans.value.forEach(loan => {\n      const month = new Date(loan.loanDate).toISOString().slice(0, 7) // YYYY-MM\n      if (!months[month]) {\n        months[month] = 0\n      }\n      months[month]++\n    })\n    return months\n  })\n\n  // Actions\n  const fetchLoans = async () => {\n    loading.value = true\n    error.value = null\n    \n    try {\n      // Simular chamada à API\n      await new Promise(resolve => setTimeout(resolve, 1000))\n      // Em uma aplicação real, aqui seria feita a chamada à API\n      // const response = await api.get('/third-party-loans')\n      // loans.value = response.data\n      \n      loading.value = false\n    } catch (err) {\n      error.value = err.message\n      loading.value = false\n      throw err\n    }\n  }\n\n  const createLoan = async (loanData) => {\n    loading.value = true\n    error.value = null\n\n    try {\n      // Validações\n      const asset = availableAssets.value.find(a => a.id === loanData.assetId)\n      \n      if (!asset) {\n        throw new Error('Ativo não encontrado')\n      }\n      \n      if (asset.status !== 'Disponível') {\n        throw new Error('Ativo não está disponível para empréstimo')\n      }\n\n      // Validar datas\n      const loanDate = new Date(loanData.loanDate)\n      const expectedReturnDate = new Date(loanData.expectedReturnDate)\n      \n      if (expectedReturnDate <= loanDate) {\n        throw new Error('A data prevista de devolução deve ser posterior à data do empréstimo')\n      }\n\n      // Validar campos obrigatórios\n      if (!loanData.thirdPartyName || !loanData.contactName || !loanData.contactEmail) {\n        throw new Error('Todos os campos obrigatórios devem ser preenchidos')\n      }\n\n      // Simular chamada à API\n      await new Promise(resolve => setTimeout(resolve, 500))\n      \n      const newThirdParty = {\n        id: Date.now(),\n        name: loanData.thirdPartyName,\n        type: loanData.thirdPartyType,\n        document: loanData.thirdPartyDocument || '',\n        contactName: loanData.contactName,\n        contactEmail: loanData.contactEmail,\n        contactPhone: loanData.contactPhone || '',\n        address: ''\n      }\n\n      const newLoan = {\n        id: Date.now() + 1,\n        code: `TER${String(loans.value.length + 1).padStart(3, '0')}`,\n        thirdParty: newThirdParty,\n        asset,\n        loanDate: loanData.loanDate,\n        expectedReturnDate: loanData.expectedReturnDate,\n        returnDate: null,\n        status: 'Ativo',\n        purpose: loanData.purpose || '',\n        notes: loanData.notes || '',\n        condition: null,\n        returnNotes: null,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n      }\n\n      loans.value.push(newLoan)\n      \n      // Atualizar status do ativo\n      const assetIndex = availableAssets.value.findIndex(a => a.id === loanData.assetId)\n      if (assetIndex !== -1) {\n        availableAssets.value[assetIndex].status = 'Emprestado'\n      }\n      \n      loading.value = false\n      return newLoan\n      \n    } catch (err) {\n      error.value = err.message\n      loading.value = false\n      throw err\n    }\n  }\n\n  const returnLoan = async (loanId, returnData) => {\n    loading.value = true\n    error.value = null\n\n    try {\n      // Simular chamada à API\n      await new Promise(resolve => setTimeout(resolve, 500))\n      \n      const loanIndex = loans.value.findIndex(loan => loan.id === loanId)\n      if (loanIndex === -1) {\n        throw new Error('Empréstimo não encontrado')\n      }\n\n      const loan = loans.value[loanIndex]\n      if (loan.status !== 'Ativo' && loan.status !== 'Em Atraso') {\n        throw new Error('Este empréstimo não está ativo')\n      }\n\n      // Validar data de devolução\n      const returnDate = new Date(returnData.returnDate)\n      const loanDate = new Date(loan.loanDate)\n      \n      if (returnDate < loanDate) {\n        throw new Error('A data de devolução não pode ser anterior à data do empréstimo')\n      }\n\n      // Atualizar empréstimo\n      loans.value[loanIndex] = {\n        ...loan,\n        returnDate: returnData.returnDate,\n        status: 'Devolvido',\n        condition: returnData.condition,\n        returnNotes: returnData.returnNotes || '',\n        updatedAt: new Date().toISOString()\n      }\n\n      // Atualizar status do ativo\n      const assetIndex = availableAssets.value.findIndex(a => a.id === loan.asset.id)\n      if (assetIndex !== -1) {\n        availableAssets.value[assetIndex].status = 'Disponível'\n      }\n      \n      loading.value = false\n      return loans.value[loanIndex]\n      \n    } catch (err) {\n      error.value = err.message\n      loading.value = false\n      throw err\n    }\n  }\n\n  const updateLoan = async (loanId, loanData) => {\n    loading.value = true\n    error.value = null\n\n    try {\n      // Simular chamada à API\n      await new Promise(resolve => setTimeout(resolve, 500))\n      \n      const loanIndex = loans.value.findIndex(loan => loan.id === loanId)\n      if (loanIndex === -1) {\n        throw new Error('Empréstimo não encontrado')\n      }\n\n      loans.value[loanIndex] = {\n        ...loans.value[loanIndex],\n        ...loanData,\n        updatedAt: new Date().toISOString()\n      }\n      \n      loading.value = false\n      return loans.value[loanIndex]\n      \n    } catch (err) {\n      error.value = err.message\n      loading.value = false\n      throw err\n    }\n  }\n\n  const cancelLoan = async (loanId, reason) => {\n    loading.value = true\n    error.value = null\n\n    try {\n      // Simular chamada à API\n      await new Promise(resolve => setTimeout(resolve, 500))\n      \n      const loanIndex = loans.value.findIndex(loan => loan.id === loanId)\n      if (loanIndex === -1) {\n        throw new Error('Empréstimo não encontrado')\n      }\n\n      const loan = loans.value[loanIndex]\n      if (loan.status !== 'Ativo' && loan.status !== 'Em Atraso') {\n        throw new Error('Apenas empréstimos ativos podem ser cancelados')\n      }\n\n      // Atualizar empréstimo\n      loans.value[loanIndex] = {\n        ...loan,\n        status: 'Cancelado',\n        returnNotes: reason,\n        updatedAt: new Date().toISOString()\n      }\n\n      // Atualizar status do ativo\n      const assetIndex = availableAssets.value.findIndex(a => a.id === loan.asset.id)\n      if (assetIndex !== -1) {\n        availableAssets.value[assetIndex].status = 'Disponível'\n      }\n      \n      loading.value = false\n      return loans.value[loanIndex]\n      \n    } catch (err) {\n      error.value = err.message\n      loading.value = false\n      throw err\n    }\n  }\n\n  const getLoanById = (id) => {\n    return loans.value.find(loan => loan.id === id)\n  }\n\n  const getLoansByThirdParty = (thirdPartyId) => {\n    return loans.value.filter(loan => loan.thirdParty.id === thirdPartyId)\n  }\n\n  const getLoansByAsset = (assetId) => {\n    return loans.value.filter(loan => loan.asset.id === assetId)\n  }\n\n  const searchLoans = (query) => {\n    if (!query) return loans.value\n    \n    const searchTerm = query.toLowerCase()\n    return loans.value.filter(loan =>\n      loan.code.toLowerCase().includes(searchTerm) ||\n      loan.thirdParty.name.toLowerCase().includes(searchTerm) ||\n      loan.thirdParty.contactName.toLowerCase().includes(searchTerm) ||\n      loan.thirdParty.contactEmail.toLowerCase().includes(searchTerm) ||\n      loan.asset.name.toLowerCase().includes(searchTerm) ||\n      loan.asset.code.toLowerCase().includes(searchTerm) ||\n      loan.purpose.toLowerCase().includes(searchTerm) ||\n      loan.notes.toLowerCase().includes(searchTerm)\n    )\n  }\n\n  const filterLoansByStatus = (status) => {\n    if (!status) return loans.value\n    return loans.value.filter(loan => loan.status === status)\n  }\n\n  const filterLoansByType = (type) => {\n    if (!type) return loans.value\n    return loans.value.filter(loan => loan.thirdParty.type === type)\n  }\n\n  const filterLoansByDateRange = (startDate, endDate) => {\n    if (!startDate && !endDate) return loans.value\n    \n    return loans.value.filter(loan => {\n      const loanDate = new Date(loan.loanDate)\n      const start = startDate ? new Date(startDate) : new Date('1900-01-01')\n      const end = endDate ? new Date(endDate) : new Date('2100-12-31')\n      \n      return loanDate >= start && loanDate <= end\n    })\n  }\n\n  const getOverdueLoans = () => {\n    const today = new Date()\n    return loans.value.filter(loan => {\n      if (loan.status !== 'Ativo') return false\n      const expectedDate = new Date(loan.expectedReturnDate)\n      return expectedDate < today\n    })\n  }\n\n  const updateOverdueStatus = () => {\n    const today = new Date()\n    loans.value.forEach(loan => {\n      if (loan.status === 'Ativo') {\n        const expectedDate = new Date(loan.expectedReturnDate)\n        if (expectedDate < today) {\n          loan.status = 'Em Atraso'\n          loan.updatedAt = new Date().toISOString()\n        }\n      }\n    })\n  }\n\n  const getThirdPartyHistory = (thirdPartyId) => {\n    return loans.value.filter(loan => loan.thirdParty.id === thirdPartyId)\n      .sort((a, b) => new Date(b.loanDate) - new Date(a.loanDate))\n  }\n\n  const getAssetHistory = (assetId) => {\n    return loans.value.filter(loan => loan.asset.id === assetId)\n      .sort((a, b) => new Date(b.loanDate) - new Date(a.loanDate))\n  }\n\n  const getTopThirdParties = (limit = 5) => {\n    const thirdPartyLoans = {}\n    \n    loans.value.forEach(loan => {\n      const id = loan.thirdParty.id\n      if (!thirdPartyLoans[id]) {\n        thirdPartyLoans[id] = {\n          thirdParty: loan.thirdParty,\n          count: 0\n        }\n      }\n      thirdPartyLoans[id].count++\n    })\n    \n    return Object.values(thirdPartyLoans)\n      .sort((a, b) => b.count - a.count)\n      .slice(0, limit)\n  }\n\n  const exportLoans = async (format = 'csv', filters = {}) => {\n    try {\n      loading.value = true\n      \n      // Aplicar filtros se fornecidos\n      let loansToExport = loans.value\n      \n      if (filters.status) {\n        loansToExport = loansToExport.filter(loan => loan.status === filters.status)\n      }\n      \n      if (filters.type) {\n        loansToExport = loansToExport.filter(loan => loan.thirdParty.type === filters.type)\n      }\n      \n      if (filters.startDate || filters.endDate) {\n        loansToExport = filterLoansByDateRange(filters.startDate, filters.endDate)\n      }\n\n      // Simular exportação\n      await new Promise(resolve => setTimeout(resolve, 1000))\n      \n      if (format === 'csv') {\n        const csvContent = generateCSV(loansToExport)\n        downloadFile(csvContent, 'emprestimos-terceiros.csv', 'text/csv')\n      } else if (format === 'excel') {\n        // Implementar exportação para Excel\n        logger.debug('Exportação para Excel não implementada ainda')\n      }\n      \n      loading.value = false\n      return true\n      \n    } catch (err) {\n      error.value = err.message\n      loading.value = false\n      throw err\n    }\n  }\n\n  const generateCSV = (loansData) => {\n    const headers = [\n      'Código', 'Terceiro', 'Tipo', 'Documento', 'Contato', 'Email', 'Telefone',\n      'Ativo', 'Código Ativo', 'Data Empréstimo', 'Data Prevista', 'Data Devolução',\n      'Status', 'Finalidade', 'Condição', 'Observações'\n    ]\n    \n    const rows = loansData.map(loan => [\n      loan.code,\n      loan.thirdParty.name,\n      loan.thirdParty.type,\n      loan.thirdParty.document,\n      loan.thirdParty.contactName,\n      loan.thirdParty.contactEmail,\n      loan.thirdParty.contactPhone,\n      loan.asset.name,\n      loan.asset.code,\n      loan.loanDate,\n      loan.expectedReturnDate,\n      loan.returnDate || '',\n      loan.status,\n      loan.purpose,\n      loan.condition || '',\n      loan.notes\n    ])\n\n    const csvContent = [headers, ...rows]\n      .map(row => row.map(field => `\"${field}\"`).join(','))\n      .join('\\n')\n\n    return csvContent\n  }\n\n  const downloadFile = (content, filename, contentType) => {\n    const blob = new Blob([content], { type: contentType })\n    const url = window.URL.createObjectURL(blob)\n    const link = document.createElement('a')\n    link.href = url\n    link.download = filename\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n    window.URL.revokeObjectURL(url)\n  }\n\n  const clearError = () => {\n    error.value = null\n  }\n\n  return {\n    // Estado\n    loans,\n    availableAssets,\n    loading,\n    error,\n    \n    // Getters\n    totalLoans,\n    activeLoans,\n    overdueLoans,\n    returnedLoans,\n    loansByType,\n    loansByStatus,\n    assetsOnLoan,\n    availableAssetsForLoan,\n    loansByMonth,\n    \n    // Actions\n    fetchLoans,\n    createLoan,\n    returnLoan,\n    updateLoan,\n    cancelLoan,\n    getLoanById,\n    getLoansByThirdParty,\n    getLoansByAsset,\n    searchLoans,\n    filterLoansByStatus,\n    filterLoansByType,\n    filterLoansByDateRange,\n    getOverdueLoans,\n    updateOverdueStatus,\n    getThirdPartyHistory,\n    getAssetHistory,\n    getTopThirdParties,\n    exportLoans,\n    clearError\n  }\n})"],"names":["useThirdPartyLoansStore","defineStore","loans","ref","id","code","thirdParty","name","type","document","contactName","contactEmail","contactPhone","address","asset","category","serialNumber","loanDate","expectedReturnDate","returnDate","status","purpose","notes","condition","returnNotes","createdAt","updatedAt","availableAssets","loading","error","totalLoans","computed","value","length","activeLoans","filter","loan","overdueLoans","today","Date","returnedLoans","loansByType","types","forEach","loansByStatus","statuses","assetsOnLoan","map","availableAssetsForLoan","includes","loansByMonth","months","month","toISOString","slice","filterLoansByDateRange","startDate","endDate","start","end","generateCSV","loansData","row","field","join","downloadFile","content","filename","contentType","blob","Blob","url","window","URL","createObjectURL","link","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","fetchLoans","async","Promise","resolve","setTimeout","err","message","createLoan","loanData","find","a","assetId","Error","thirdPartyName","newThirdParty","now","thirdPartyType","thirdPartyDocument","newLoan","String","padStart","push","assetIndex","findIndex","returnLoan","loanId","returnData","loanIndex","updateLoan","cancelLoan","reason","getLoanById","getLoansByThirdParty","thirdPartyId","getLoansByAsset","searchLoans","query","searchTerm","toLowerCase","filterLoansByStatus","filterLoansByType","getOverdueLoans","updateOverdueStatus","getThirdPartyHistory","sort","b","getAssetHistory","getTopThirdParties","limit","thirdPartyLoans","count","Object","values","exportLoans","format","filters","loansToExport","csvContent","logger","debug","clearError"],"mappings":"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"}