{"version":3,"file":"LoadingState-Bai_lHj2.js","sources":["../../src/composables/useLoading.js","../../src/components/common/LoadingState.vue"],"sourcesContent":["import { ref, computed } from 'vue'\n\n/**\n * Composable para gerenciar estados de loading de forma consistente\n * @param {Object} options - Opções de configuração\n * @param {boolean} options.initialState - Estado inicial do loading\n * @param {number} options.minDuration - Duração mínima do loading em ms\n */\nexport function useLoading(options = {}) {\n  const {\n    initialState = false,\n    minDuration = 300 // Mínimo de 300ms para evitar flicker\n  } = options\n\n  // Estados\n  const isLoading = ref(initialState)\n  const loadingStates = ref(new Map())\n  const startTime = ref(null)\n\n  // Computed\n  const hasAnyLoading = computed(() => {\n    return isLoading.value || Array.from(loadingStates.value.values()).some(state => state)\n  })\n\n  // Métodos principais\n  const startLoading = async (key = 'default') => {\n    if (key === 'default') {\n      isLoading.value = true\n      startTime.value = Date.now()\n    } else {\n      loadingStates.value.set(key, true)\n    }\n  }\n\n  const stopLoading = async (key = 'default') => {\n    const ensureMinDuration = async () => {\n      if (startTime.value && minDuration > 0) {\n        const elapsed = Date.now() - startTime.value\n        if (elapsed < minDuration) {\n          await new Promise(resolve => setTimeout(resolve, minDuration - elapsed))\n        }\n      }\n    }\n\n    if (key === 'default') {\n      await ensureMinDuration()\n      isLoading.value = false\n      startTime.value = null\n    } else {\n      loadingStates.value.set(key, false)\n    }\n  }\n\n  // Wrapper para executar função com loading\n  const withLoading = async (fn, key = 'default') => {\n    try {\n      await startLoading(key)\n      const result = await fn()\n      return result\n    } finally {\n      await stopLoading(key)\n    }\n  }\n\n  // Verificar estado específico\n  const isLoadingKey = (key) => {\n    return loadingStates.value.get(key) || false\n  }\n\n  // Limpar todos os estados\n  const clearAll = () => {\n    isLoading.value = false\n    loadingStates.value.clear()\n    startTime.value = null\n  }\n\n  // Estados específicos para operações comuns\n  const loadingStates_common = {\n    fetching: computed(() => isLoadingKey('fetching')),\n    saving: computed(() => isLoadingKey('saving')),\n    deleting: computed(() => isLoadingKey('deleting')),\n    creating: computed(() => isLoadingKey('creating')),\n    updating: computed(() => isLoadingKey('updating'))\n  }\n\n  // Métodos de conveniência\n  const startFetching = () => startLoading('fetching')\n  const stopFetching = () => stopLoading('fetching')\n  const startSaving = () => startLoading('saving')\n  const stopSaving = () => stopLoading('saving')\n  const startDeleting = () => startLoading('deleting')\n  const stopDeleting = () => stopLoading('deleting')\n  const startCreating = () => startLoading('creating')\n  const stopCreating = () => stopLoading('creating')\n  const startUpdating = () => startLoading('updating')\n  const stopUpdating = () => stopLoading('updating')\n\n  // Wrappers específicos\n  const withFetching = (fn) => withLoading(fn, 'fetching')\n  const withSaving = (fn) => withLoading(fn, 'saving')\n  const withDeleting = (fn) => withLoading(fn, 'deleting')\n  const withCreating = (fn) => withLoading(fn, 'creating')\n  const withUpdating = (fn) => withLoading(fn, 'updating')\n\n  return {\n    // Estados principais\n    isLoading,\n    hasAnyLoading,\n    \n    // Estados específicos\n    ...loadingStates_common,\n    \n    // Métodos principais\n    startLoading,\n    stopLoading,\n    withLoading,\n    isLoadingKey,\n    clearAll,\n    \n    // Métodos de conveniência\n    startFetching,\n    stopFetching,\n    startSaving,\n    stopSaving,\n    startDeleting,\n    stopDeleting,\n    startCreating,\n    stopCreating,\n    startUpdating,\n    stopUpdating,\n    \n    // Wrappers específicos\n    withFetching,\n    withSaving,\n    withDeleting,\n    withCreating,\n    withUpdating\n  }\n}\n\n// Hook para loading de página inteira\nexport function usePageLoading() {\n  const loading = useLoading({ minDuration: 500 })\n  \n  return {\n    ...loading,\n    // Método específico para carregamento de página\n    loadPage: async (loadFn) => {\n      return loading.withLoading(loadFn)\n    }\n  }\n}\n\n// Hook para loading de formulários\nexport function useFormLoading() {\n  const loading = useLoading({ minDuration: 200 })\n  \n  return {\n    ...loading,\n    // Método específico para submissão de formulário\n    submitForm: async (submitFn) => {\n      return loading.withSaving(submitFn)\n    }\n  }\n}","<template>\n  <div class=\"loading-state\" :class=\"{ 'overlay': overlay, 'inline': inline }\">\n    <div class=\"loading-content\">\n      <div class=\"loading-spinner\" :class=\"size\">\n        <i class=\"fas fa-spinner fa-spin\"></i>\n      </div>\n      <div v-if=\"message\" class=\"loading-message\">{{ message }}</div>\n    </div>\n  </div>\n</template>\n\n<script setup>\ndefineProps({\n  // Mensagem de loading personalizada\n  message: {\n    type: String,\n    default: 'Carregando...'\n  },\n  \n  // Tamanho do spinner\n  size: {\n    type: String,\n    default: 'medium',\n    validator: (value) => ['small', 'medium', 'large'].includes(value)\n  },\n  \n  // Se deve ser um overlay sobre o conteúdo\n  overlay: {\n    type: Boolean,\n    default: false\n  },\n  \n  // Se deve ser inline (sem posicionamento absoluto)\n  inline: {\n    type: Boolean,\n    default: false\n  }\n})\n</script>\n\n<style scoped>\n.loading-state {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  min-height: 200px;\n}\n\n.loading-state.overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(2px);\n  z-index: 1000;\n  min-height: auto;\n}\n\n.loading-state.inline {\n  min-height: auto;\n  padding: 1rem;\n}\n\n.loading-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n}\n\n.loading-spinner {\n  color: var(--primary-color, #3b82f6);\n  animation: pulse 2s infinite;\n}\n\n.loading-spinner.small i {\n  font-size: 1rem;\n}\n\n.loading-spinner.medium i {\n  font-size: 1.5rem;\n}\n\n.loading-spinner.large i {\n  font-size: 2rem;\n}\n\n.loading-message {\n  color: var(--text-secondary, #6b7280);\n  font-size: 0.875rem;\n  font-weight: 500;\n  text-align: center;\n}\n\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n\n/* Dark mode support */\n@media (prefers-color-scheme: dark) {\n  .loading-state.overlay {\n    background: rgba(17, 24, 39, 0.9);\n  }\n  \n  .loading-message {\n    color: var(--text-secondary-dark, #9ca3af);\n  }\n}\n</style>"],"names":["useLoading","options","initialState","minDuration","isLoading","ref","loadingStates","Map","startTime","hasAnyLoading","computed","value","Array","from","values","some","state","startLoading","async","key","Date","now","set","stopLoading","elapsed","Promise","resolve","setTimeout","ensureMinDuration","withLoading","fn","isLoadingKey","get","loadingStates_common","fetching","saving","deleting","creating","updating","clearAll","clear","startFetching","stopFetching","startSaving","stopSaving","startDeleting","stopDeleting","startCreating","stopCreating","startUpdating","stopUpdating","withFetching","withSaving","withDeleting","withCreating","withUpdating","usePageLoading","loading","loadPage","loadFn","_createElementBlock","class","_normalizeClass","overlay","__props","inline","_createElementVNode","_hoisted_1","size","message","_hoisted_2","_toDisplayString"],"mappings":"sIAQO,SAASA,EAAWC,EAAU,IACnC,MAAMC,aACJA,GAAe,EAAAC,YACfA,EAAc,KACZF,EAGEG,EAAYC,EAAIH,GAChBI,EAAgBD,EAAI,IAAIE,KACxBC,EAAYH,EAAI,MAGhBI,EAAgBC,EAAS,IACtBN,EAAUO,OAASC,MAAMC,KAAKP,EAAcK,MAAMG,UAAUC,KAAKC,GAASA,IAI7EC,EAAeC,MAAOC,EAAM,aACpB,YAARA,GACFf,EAAUO,OAAQ,EAClBH,EAAUG,MAAQS,KAAKC,OAEvBf,EAAcK,MAAMW,IAAIH,GAAK,IAI3BI,EAAcL,MAAOC,EAAM,aAUnB,YAARA,QATsBD,WACxB,GAAIV,EAAUG,OAASR,EAAc,EAAG,CACtC,MAAMqB,EAAUJ,KAAKC,MAAQb,EAAUG,MACnCa,EAAUrB,SACN,IAAIsB,QAAQC,GAAWC,WAAWD,EAASvB,EAAcqB,GAEnE,GAIMI,GACNxB,EAAUO,OAAQ,EAClBH,EAAUG,MAAQ,MAElBL,EAAcK,MAAMW,IAAIH,GAAK,IAK3BU,EAAcX,MAAOY,EAAIX,EAAM,aACnC,UACQF,EAAaE,GAEnB,aADqBW,GAEvB,CAAA,cACQP,EAAYJ,EACpB,GAIIY,EAAgBZ,GACbb,EAAcK,MAAMqB,IAAIb,KAAQ,EAWnCc,EAAuB,CAC3BC,SAAUxB,EAAS,IAAMqB,EAAa,aACtCI,OAAQzB,EAAS,IAAMqB,EAAa,WACpCK,SAAU1B,EAAS,IAAMqB,EAAa,aACtCM,SAAU3B,EAAS,IAAMqB,EAAa,aACtCO,SAAU5B,EAAS,IAAMqB,EAAa,cAsBxC,MAAO,CAEL3B,YACAK,mBAGGwB,EAGHhB,eACAM,cACAM,cACAE,eACAQ,SA/Ce,KACfnC,EAAUO,OAAQ,EAClBL,EAAcK,MAAM6B,QACpBhC,EAAUG,MAAQ,MA+ClB8B,cAlCoB,IAAMxB,EAAa,YAmCvCyB,aAlCmB,IAAMnB,EAAY,YAmCrCoB,YAlCkB,IAAM1B,EAAa,UAmCrC2B,WAlCiB,IAAMrB,EAAY,UAmCnCsB,cAlCoB,IAAM5B,EAAa,YAmCvC6B,aAlCmB,IAAMvB,EAAY,YAmCrCwB,cAlCoB,IAAM9B,EAAa,YAmCvC+B,aAlCmB,IAAMzB,EAAY,YAmCrC0B,cAlCoB,IAAMhC,EAAa,YAmCvCiC,aAlCmB,IAAM3B,EAAY,YAqCrC4B,aAlCoBrB,GAAOD,EAAYC,EAAI,YAmC3CsB,WAlCkBtB,GAAOD,EAAYC,EAAI,UAmCzCuB,aAlCoBvB,GAAOD,EAAYC,EAAI,YAmC3CwB,aAlCoBxB,GAAOD,EAAYC,EAAI,YAmC3CyB,aAlCoBzB,GAAOD,EAAYC,EAAI,YAoC/C,CAGO,SAAS0B,IACd,MAAMC,EAAUzD,EAAW,CAAEG,YAAa,MAE1C,MAAO,IACFsD,EAEHC,SAAUxC,MAAOyC,GACRF,EAAQ5B,YAAY8B,GAGjC,sUCtJEC,EAOM,MAAA,CAPDC,MAAKC,EAAA,CAAC,gBAAe,CAAAC,QAAsBC,EAAAD,eAAmBC,EAAAC,YACjEC,EAKM,MALNC,EAKM,CAJJD,EAEM,MAAA,CAFDL,MAAKC,EAAA,CAAC,kBAA0BE,EAAAI,yBACnCF,EAAsC,IAAA,CAAnCL,MAAM,0BAAwB,MAAA,SAExBG,EAAAK,aAAXT,EAA+D,MAA/DU,EAA+DC,EAAhBP,EAAAK,SAAO"}