import{r as a,c as s,o as l,a as e,e as i,f as t,x as n,z as c,D as r,y as o,B as d,L as u,m,an as f,a9 as p,K as v,F as h,C as b,q as y,u as g,k}from"./vue-vendor-BY5hdAT7.js";import{u as M}from"./machines-DNpDirAW.js";import{f as w}from"./dateUtils-uLrYVFEP.js";import{_ as C}from"./index-Dur0lEaU.js";import"./utils-vendor-COuxBHZ0.js";const U={class:"machines-monitoring",role:"main","aria-labelledby":"machines-title"},x={class:"page-header"},z={class:"header-content"},A={class:"header-actions"},q=["disabled","aria-label"],R=["aria-label"],$={key:0,class:"last-update"},D={key:0,class:"ws-status connected"},F={key:1,class:"ws-status disconnected"},S={class:"metrics-grid"},T={class:"metric-card total"},I={class:"metric-content"},V={class:"metric-value"},j={class:"metric-card online"},O={class:"metric-content"},P={class:"metric-value"},K={class:"metric-percentage"},L={class:"metric-card offline"},N={class:"metric-content"},_={class:"metric-value"},B={class:"metric-percentage"},W={class:"metric-card warning"},E={class:"metric-content"},H={class:"metric-value"},J={class:"metric-percentage"},G={class:"metric-card critical"},Q={class:"metric-content"},X={class:"metric-value"},Y={class:"metric-percentage"},Z={class:"metric-card performance"},aa={class:"metric-content"},sa={class:"metric-value"},la={class:"performance-bar"},ea={class:"metric-card performance"},ia={class:"metric-content"},ta={class:"metric-value"},na={class:"performance-bar"},ca={class:"metric-card performance"},ra={class:"metric-content"},oa={class:"metric-value"},da={class:"performance-bar"},ua={class:"filters-section"},ma={class:"filters-grid"},fa={class:"filter-group"},pa={class:"filter-group"},va={class:"filter-group"},ha={class:"filter-group"},ba={class:"machines-section"},ya={class:"section-header"},ga={class:"view-options"},ka={key:0,class:"loading-state"},Ma={key:1,class:"error-state"},wa={key:2,class:"empty-state"},Ca={key:0},Ua={key:1},xa={key:3,class:"machines-grid"},za=["onClick","aria-label","onKeydown"],Aa={class:"machine-header"},qa={class:"machine-status"},Ra={class:"machine-name"},$a={class:"machine-info"},Da={class:"info-row"},Fa={class:"value"},Sa={class:"info-row"},Ta={class:"value"},Ia={class:"info-row"},Va={class:"value"},ja={class:"info-row"},Oa={class:"value"},Pa={key:0,class:"machine-performance"},Ka={class:"performance-metric"},La={class:"metric-bar"},Na={class:"metric-value"},_a={class:"performance-metric"},Ba={class:"metric-bar"},Wa={class:"metric-value"},Ea={class:"performance-metric"},Ha={class:"metric-bar"},Ja={class:"metric-value"},Ga={class:"machine-footer"},Qa={class:"last-seen"},Xa={key:0,class:"uptime"},Ya={key:4,class:"machines-table"},Za={class:"table"},as=["onClick","onKeydown"],ss={key:0,class:"performance-cell"},ls={class:"mini-bar"},es={key:1},is={key:0,class:"performance-cell"},ts={class:"mini-bar"},ns={key:1},cs={key:0,class:"performance-cell"},rs={class:"mini-bar"},os={key:1},ds={class:"action-buttons"},us=["onClick","aria-label"],ms=["onClick","aria-label"],fs={key:0,class:"machine-details-modal"},ps=C({__name:"Machines",setup(C){const ps=M(),vs=a("grid"),hs=a(!1),{machines:bs,selectedMachine:ys,loading:gs,error:ks,lastUpdate:Ms,wsConnected:ws,filters:Cs,monitoringConfig:Us,metrics:xs,filteredMachines:zs}=ps,As=s(()=>"all"!==Cs.status||""!==Cs.location||""!==Cs.department||""!==Cs.search),qs=async()=>{await ps.fetchMachines(!0)},Rs=a=>{ps.selectMachine(a)},$s=()=>{},Ds=()=>{ps.clearFilters()},Fs=()=>{ps.updateMonitoringConfig({autoRefresh:!Us.autoRefresh})},Ss=(a,s)=>s>0?Math.round(a/s*100):0,Ts=a=>{if(a<24)return`${a}h`;return`${Math.floor(a/24)}d ${a%24}h`};return l(async()=>{await qs(),await ps.connectWebSocket(),ps.autoRefresh&&ps.startAutoRefresh()}),e(()=>{ps.stopAutoRefresh(),ps.disconnectWebSocket()}),(a,s)=>(k(),i("div",U,[t("div",x,[t("div",z,[s[7]||(s[7]=t("h1",{id:"machines-title"},"Monitoramento de Máquinas",-1)),t("div",A,[t("button",{onClick:qs,disabled:c(gs),class:"btn btn-primary","aria-label":c(gs)?"Atualizando dados...":"Atualizar dados das máquinas"},[t("i",{class:o(["fas fa-sync-alt",{"fa-spin":c(gs)}])},null,2),r(" "+d(c(gs)?"Atualizando...":"Atualizar"),1)],8,q),t("button",{onClick:Fs,class:o(["btn btn-secondary",{active:c(Us).autoRefresh}]),"aria-label":c(Us).autoRefresh?"Desativar atualização automática":"Ativar atualização automática"},[t("i",{class:o(["fas",c(Us).autoRefresh?"fa-pause":"fa-play"])},null,2),s[6]||(s[6]=r(" Auto-refresh ",-1))],10,R)])]),c(Ms)?(k(),i("div",$,[s[10]||(s[10]=t("i",{class:"fas fa-clock"},null,-1)),r(" Última atualização: "+d(c(w)(c(Ms)))+" ",1),c(ws)?(k(),i("span",D,[...s[8]||(s[8]=[t("i",{class:"fas fa-circle"},null,-1),r(" Tempo real ativo ",-1)])])):(k(),i("span",F,[...s[9]||(s[9]=[t("i",{class:"fas fa-circle"},null,-1),r(" Tempo real inativo ",-1)])]))])):n("",!0)]),t("div",S,[t("div",T,[s[12]||(s[12]=t("div",{class:"metric-icon"},[t("i",{class:"fas fa-desktop"})],-1)),t("div",I,[s[11]||(s[11]=t("h3",null,"Total de Máquinas",-1)),t("div",V,d(c(xs).totalMachines),1)])]),t("div",j,[s[14]||(s[14]=t("div",{class:"metric-icon"},[t("i",{class:"fas fa-check-circle"})],-1)),t("div",O,[s[13]||(s[13]=t("h3",null,"Online",-1)),t("div",P,d(c(xs).onlineMachines),1),t("div",K,d(Ss(c(xs).onlineMachines,c(xs).totalMachines))+"%",1)])]),t("div",L,[s[16]||(s[16]=t("div",{class:"metric-icon"},[t("i",{class:"fas fa-times-circle"})],-1)),t("div",N,[s[15]||(s[15]=t("h3",null,"Offline",-1)),t("div",_,d(c(xs).offlineMachines),1),t("div",B,d(Ss(c(xs).offlineMachines,c(xs).totalMachines))+"%",1)])]),t("div",W,[s[18]||(s[18]=t("div",{class:"metric-icon"},[t("i",{class:"fas fa-exclamation-triangle"})],-1)),t("div",E,[s[17]||(s[17]=t("h3",null,"Atenção",-1)),t("div",H,d(c(xs).warningMachines),1),t("div",J,d(Ss(c(xs).warningMachines,c(xs).totalMachines))+"%",1)])]),t("div",G,[s[20]||(s[20]=t("div",{class:"metric-icon"},[t("i",{class:"fas fa-exclamation-circle"})],-1)),t("div",Q,[s[19]||(s[19]=t("h3",null,"Crítico",-1)),t("div",X,d(c(xs).criticalMachines),1),t("div",Y,d(Ss(c(xs).criticalMachines,c(xs).totalMachines))+"%",1)])]),t("div",Z,[s[22]||(s[22]=t("div",{class:"metric-icon"},[t("i",{class:"fas fa-tachometer-alt"})],-1)),t("div",aa,[s[21]||(s[21]=t("h3",null,"CPU Média",-1)),t("div",sa,d(c(xs).avgCpuUsage.toFixed(1))+"%",1),t("div",la,[t("div",{class:"performance-fill",style:u({width:c(xs).avgCpuUsage+"%"})},null,4)])])]),t("div",ea,[s[24]||(s[24]=t("div",{class:"metric-icon"},[t("i",{class:"fas fa-memory"})],-1)),t("div",ia,[s[23]||(s[23]=t("h3",null,"Memória Média",-1)),t("div",ta,d(c(xs).avgMemoryUsage.toFixed(1))+"%",1),t("div",na,[t("div",{class:"performance-fill",style:u({width:c(xs).avgMemoryUsage+"%"})},null,4)])])]),t("div",ca,[s[26]||(s[26]=t("div",{class:"metric-icon"},[t("i",{class:"fas fa-hdd"})],-1)),t("div",ra,[s[25]||(s[25]=t("h3",null,"Disco Médio",-1)),t("div",oa,d(c(xs).avgDiskUsage.toFixed(1))+"%",1),t("div",da,[t("div",{class:"performance-fill",style:u({width:c(xs).avgDiskUsage+"%"})},null,4)])])])]),t("div",ua,[t("div",ma,[t("div",fa,[s[28]||(s[28]=t("label",{for:"status-filter"},"Status:",-1)),m(t("select",{id:"status-filter","onUpdate:modelValue":s[0]||(s[0]=a=>c(Cs).status=a),onChange:$s,class:"form-select"},[...s[27]||(s[27]=[p('<option value="all" data-v-46459453>Todos</option><option value="online" data-v-46459453>Online</option><option value="offline" data-v-46459453>Offline</option><option value="warning" data-v-46459453>Atenção</option><option value="critical" data-v-46459453>Crítico</option>',5)])],544),[[f,c(Cs).status]])]),t("div",pa,[s[29]||(s[29]=t("label",{for:"location-filter"},"Localização:",-1)),m(t("input",{id:"location-filter","onUpdate:modelValue":s[1]||(s[1]=a=>c(Cs).location=a),onInput:$s,type:"text",placeholder:"Filtrar por localização...",class:"form-input"},null,544),[[v,c(Cs).location]])]),t("div",va,[s[30]||(s[30]=t("label",{for:"department-filter"},"Departamento:",-1)),m(t("input",{id:"department-filter","onUpdate:modelValue":s[2]||(s[2]=a=>c(Cs).department=a),onInput:$s,type:"text",placeholder:"Filtrar por departamento...",class:"form-input"},null,544),[[v,c(Cs).department]])]),t("div",ha,[s[31]||(s[31]=t("label",{for:"search-filter"},"Buscar:",-1)),m(t("input",{id:"search-filter","onUpdate:modelValue":s[3]||(s[3]=a=>c(Cs).search=a),onInput:$s,type:"text",placeholder:"Nome, hostname, IP, usuário...",class:"form-input"},null,544),[[v,c(Cs).search]])]),t("div",{class:"filter-actions"},[t("button",{onClick:Ds,class:"btn btn-outline"},[...s[32]||(s[32]=[t("i",{class:"fas fa-times"},null,-1),r(" Limpar Filtros ",-1)])])])])]),t("div",ba,[t("div",ya,[t("h2",null,"Máquinas ("+d(c(zs).length)+")",1),t("div",ga,[t("button",{onClick:s[4]||(s[4]=a=>vs.value="grid"),class:o([{active:"grid"===vs.value},"btn btn-sm"]),"aria-label":"Visualização em grade"},[...s[33]||(s[33]=[t("i",{class:"fas fa-th"},null,-1)])],2),t("button",{onClick:s[5]||(s[5]=a=>vs.value="list"),class:o([{active:"list"===vs.value},"btn btn-sm"]),"aria-label":"Visualização em lista"},[...s[34]||(s[34]=[t("i",{class:"fas fa-list"},null,-1)])],2)])]),c(gs)&&0===c(bs).length?(k(),i("div",ka,[...s[35]||(s[35]=[t("div",{class:"loading-spinner"},[t("i",{class:"fas fa-spinner fa-spin"})],-1),t("p",null,"Carregando máquinas...",-1)])])):c(ks)&&0===c(bs).length?(k(),i("div",Ma,[s[37]||(s[37]=t("div",{class:"error-icon"},[t("i",{class:"fas fa-exclamation-triangle"})],-1)),s[38]||(s[38]=t("h3",null,"Erro ao carregar máquinas",-1)),t("p",null,d(c(ks)),1),t("button",{onClick:qs,class:"btn btn-primary"},[...s[36]||(s[36]=[t("i",{class:"fas fa-retry"},null,-1),r(" Tentar Novamente ",-1)])])])):0===c(zs).length?(k(),i("div",wa,[s[39]||(s[39]=t("div",{class:"empty-icon"},[t("i",{class:"fas fa-desktop"})],-1)),s[40]||(s[40]=t("h3",null,"Nenhuma máquina encontrada",-1)),As.value?(k(),i("p",Ca,"Tente ajustar os filtros para ver mais resultados.")):(k(),i("p",Ua,"Nenhuma máquina foi registrada ainda."))])):"grid"===vs.value?(k(),i("div",xa,[(k(!0),i(h,null,b(c(zs),l=>{var e;return k(),i("div",{key:l.id,class:o(["machine-card",[`status-${l.status}`,{selected:(null==(e=c(ys))?void 0:e.id)===l.id}]]),onClick:a=>Rs(l),role:"button",tabindex:"0","aria-label":`Máquina ${l.name} - Status: ${l.status}`,onKeydown:[y(a=>Rs(l),["enter"]),y(g(a=>Rs(l),["prevent"]),["space"])]},[t("div",Aa,[t("div",qa,[t("i",{class:o(["fas fa-circle",`status-${l.status}`])},null,2)]),t("div",Ra,[t("h3",null,d(l.name),1),t("p",null,d(l.hostname),1)])]),t("div",$a,[t("div",Da,[s[41]||(s[41]=t("span",{class:"label"},"IP:",-1)),t("span",Fa,d(l.ip),1)]),t("div",Sa,[s[42]||(s[42]=t("span",{class:"label"},"Usuário:",-1)),t("span",Ta,d(l.user),1)]),t("div",Ia,[s[43]||(s[43]=t("span",{class:"label"},"Local:",-1)),t("span",Va,d(l.location),1)]),t("div",ja,[s[44]||(s[44]=t("span",{class:"label"},"Depto:",-1)),t("span",Oa,d(l.department),1)])]),l.performance&&"online"===l.status?(k(),i("div",Pa,[t("div",Ka,[s[45]||(s[45]=t("span",{class:"metric-label"},"CPU",-1)),t("div",La,[t("div",{class:"metric-fill",style:u({width:l.performance.cpu+"%"})},null,4)]),t("span",Na,d(l.performance.cpu)+"%",1)]),t("div",_a,[s[46]||(s[46]=t("span",{class:"metric-label"},"RAM",-1)),t("div",Ba,[t("div",{class:"metric-fill",style:u({width:l.performance.memory+"%"})},null,4)]),t("span",Wa,d(l.performance.memory)+"%",1)]),t("div",Ea,[s[47]||(s[47]=t("span",{class:"metric-label"},"Disco",-1)),t("div",Ha,[t("div",{class:"metric-fill",style:u({width:l.performance.disk+"%"})},null,4)]),t("span",Ja,d(l.performance.disk)+"%",1)])])):n("",!0),t("div",Ga,[t("span",Qa,[s[48]||(s[48]=t("i",{class:"fas fa-clock"},null,-1)),r(" "+d(a.formatRelativeTime(l.lastSeen)),1)]),l.uptime?(k(),i("span",Xa,[s[49]||(s[49]=t("i",{class:"fas fa-arrow-up"},null,-1)),r(" "+d(Ts(l.uptime)),1)])):n("",!0)])],42,za)}),128))])):(k(),i("div",Ya,[t("table",Za,[s[53]||(s[53]=t("thead",null,[t("tr",null,[t("th",null,"Status"),t("th",null,"Nome"),t("th",null,"Hostname"),t("th",null,"IP"),t("th",null,"Usuário"),t("th",null,"Localização"),t("th",null,"Departamento"),t("th",null,"CPU"),t("th",null,"Memória"),t("th",null,"Disco"),t("th",null,"Última Conexão"),t("th",null,"Ações")])],-1)),t("tbody",null,[(k(!0),i(h,null,b(c(zs),l=>{var e,m;return k(),i("tr",{key:l.id,class:o([`status-${l.status}`,{selected:(null==(e=c(ys))?void 0:e.id)===l.id}]),onClick:a=>Rs(l),role:"button",tabindex:"0",onKeydown:[y(a=>Rs(l),["enter"]),y(g(a=>Rs(l),["prevent"]),["space"])]},[t("td",null,[t("span",{class:o(["status-badge",`status-${l.status}`])},[s[50]||(s[50]=t("i",{class:"fas fa-circle"},null,-1)),r(" "+d((m=l.status,{online:"Online",offline:"Offline",warning:"Atenção",critical:"Crítico"}[m]||m)),1)],2)]),t("td",null,d(l.name),1),t("td",null,d(l.hostname),1),t("td",null,d(l.ip),1),t("td",null,d(l.user),1),t("td",null,d(l.location),1),t("td",null,d(l.department),1),t("td",null,[l.performance&&"online"===l.status?(k(),i("div",ss,[t("span",null,d(l.performance.cpu)+"%",1),t("div",ls,[t("div",{class:"mini-fill",style:u({width:l.performance.cpu+"%"})},null,4)])])):(k(),i("span",es,"-"))]),t("td",null,[l.performance&&"online"===l.status?(k(),i("div",is,[t("span",null,d(l.performance.memory)+"%",1),t("div",ts,[t("div",{class:"mini-fill",style:u({width:l.performance.memory+"%"})},null,4)])])):(k(),i("span",ns,"-"))]),t("td",null,[l.performance&&"online"===l.status?(k(),i("div",cs,[t("span",null,d(l.performance.disk)+"%",1),t("div",rs,[t("div",{class:"mini-fill",style:u({width:l.performance.disk+"%"})},null,4)])])):(k(),i("span",os,"-"))]),t("td",null,d(a.formatRelativeTime(l.lastSeen)),1),t("td",null,[t("div",ds,[t("button",{onClick:g(a=>(a=>{ps.selectMachine(a),hs.value=!0})(l),["stop"]),class:"btn btn-sm btn-outline","aria-label":`Ver detalhes da máquina ${l.name}`},[...s[51]||(s[51]=[t("i",{class:"fas fa-eye"},null,-1)])],8,us),"online"===l.status?(k(),i("button",{key:0,onClick:g(a=>(async a=>{await ps.fetchMachineStatus(a)})(l.id),["stop"]),class:"btn btn-sm btn-outline","aria-label":`Atualizar status da máquina ${l.name}`},[...s[52]||(s[52]=[t("i",{class:"fas fa-sync-alt"},null,-1)])],8,ms)):n("",!0)])])],42,as)}),128))])])]))]),c(ys)&&hs.value?(k(),i("div",fs)):n("",!0)]))}},[["__scopeId","data-v-46459453"]]);export{ps as default};
//# sourceMappingURL=Machines-DaaXBbjY.js.map
