import{b as e,r as t,c as a,w as s,o as l,e as i,f as o,x as n,D as r,B as d,m as c,K as u,an as v,a9 as p,F as m,C as h,y as g,u as y,k as b}from"./vue-vendor-BY5hdAT7.js";import{_ as f,l as x}from"./index-Dur0lEaU.js";import"./utils-vendor-COuxBHZ0.js";const T=e("schedules",{state:()=>({schedules:[{id:1,title:"Manutenção Preventiva - Servidores",description:"Verificação geral dos servidores, limpeza e atualização de sistema",type:"preventive",frequency:"monthly",priority:"high",status:"active",assetId:1,assetCode:"SRV-001",assetName:"Servidor Dell PowerEdge",assignedTo:"Carlos Oliveira",department:"TI",startDate:"2024-01-01",nextExecution:"2024-03-01",lastExecution:"2024-02-01",estimatedDuration:4,notes:"Verificar temperatura, logs de erro e performance",createdAt:"2024-01-01T08:00:00Z",updatedAt:"2024-02-01T10:30:00Z",executionHistory:[{id:1,executedAt:"2024-02-01T08:00:00Z",completedAt:"2024-02-01T12:00:00Z",status:"completed",notes:"Manutenção realizada com sucesso",technician:"Carlos Oliveira"},{id:2,executedAt:"2024-01-01T08:00:00Z",completedAt:"2024-01-01T11:30:00Z",status:"completed",notes:"Primeira execução do cronograma",technician:"Carlos Oliveira"}]},{id:2,title:"Backup e Verificação - Notebooks",description:"Backup de dados e verificação de integridade dos notebooks",type:"preventive",frequency:"weekly",priority:"medium",status:"active",assetId:2,assetCode:"NB-001",assetName:"Notebook Dell Latitude",assignedTo:"João Silva",department:"TI",startDate:"2024-01-15",nextExecution:"2024-02-19",lastExecution:"2024-02-12",estimatedDuration:2,notes:"Verificar backup automático e integridade dos dados",createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-02-12T14:00:00Z",executionHistory:[{id:3,executedAt:"2024-02-12T09:00:00Z",completedAt:"2024-02-12T11:00:00Z",status:"completed",notes:"Backup verificado, tudo funcionando",technician:"João Silva"}]},{id:3,title:"Limpeza e Calibração - Impressoras",description:"Limpeza interna e calibração das impressoras",type:"preventive",frequency:"quarterly",priority:"low",status:"active",assetId:3,assetCode:"IMP-001",assetName:"Impressora HP LaserJet",assignedTo:"Maria Santos",department:"TI",startDate:"2024-01-01",nextExecution:"2024-04-01",lastExecution:"2024-01-01",estimatedDuration:1,notes:"Verificar qualidade de impressão e nível de toner",createdAt:"2024-01-01T10:00:00Z",updatedAt:"2024-01-01T10:00:00Z",executionHistory:[{id:4,executedAt:"2024-01-01T10:00:00Z",completedAt:"2024-01-01T11:00:00Z",status:"completed",notes:"Limpeza realizada, calibração ok",technician:"Maria Santos"}]},{id:4,title:"Atualização de Antivírus",description:"Atualização e verificação do sistema antivírus",type:"preventive",frequency:"daily",priority:"high",status:"paused",assetId:4,assetCode:"CPU-025",assetName:"Desktop HP ProDesk",assignedTo:"Ana Costa",department:"TI",startDate:"2024-02-01",nextExecution:"2024-02-16",lastExecution:"2024-02-15",estimatedDuration:.5,notes:"Verificação automática pausada para investigação",createdAt:"2024-02-01T08:00:00Z",updatedAt:"2024-02-15T16:00:00Z",executionHistory:[]},{id:5,title:"Verificação de Rede",description:"Teste de conectividade e performance da rede",type:"preventive",frequency:"weekly",priority:"medium",status:"active",assetId:5,assetCode:"SW-001",assetName:"Switch Cisco 24 portas",assignedTo:"Pedro Alves",department:"TI",startDate:"2024-01-08",nextExecution:"2024-02-19",lastExecution:"2024-02-12",estimatedDuration:3,notes:"Verificar latência e throughput",createdAt:"2024-01-08T08:00:00Z",updatedAt:"2024-02-12T15:00:00Z",executionHistory:[{id:5,executedAt:"2024-02-12T08:00:00Z",completedAt:"2024-02-12T11:00:00Z",status:"completed",notes:"Rede funcionando normalmente",technician:"Pedro Alves"}]}],technicians:[{id:1,name:"João Silva",department:"TI",specialties:["Hardware","Backup"]},{id:2,name:"Maria Santos",department:"TI",specialties:["Impressoras","Periféricos"]},{id:3,name:"Carlos Oliveira",department:"TI",specialties:["Servidores","Infraestrutura"]},{id:4,name:"Ana Costa",department:"TI",specialties:["Software","Segurança"]},{id:5,name:"Pedro Alves",department:"TI",specialties:["Redes","Conectividade"]}],availableAssets:[{id:1,code:"SRV-001",name:"Servidor Dell PowerEdge",category:"Infraestrutura"},{id:2,code:"NB-001",name:"Notebook Dell Latitude",category:"Informática"},{id:3,code:"IMP-001",name:"Impressora HP LaserJet",category:"Periféricos"},{id:4,code:"CPU-025",name:"Desktop HP ProDesk",category:"Informática"},{id:5,code:"SW-001",name:"Switch Cisco 24 portas",category:"Rede"}],searchTerm:"",filters:{status:"",type:"",frequency:"",priority:"",assignedTo:"",dateRange:{start:"",end:""}},loading:!1,error:null}),getters:{totalSchedules:e=>e.schedules.length,activeSchedules:e=>e.schedules.filter(e=>"active"===e.status),pausedSchedules:e=>e.schedules.filter(e=>"paused"===e.status),overdueSchedules:e=>{const t=(new Date).toISOString().split("T")[0];return e.schedules.filter(e=>"active"===e.status&&e.nextExecution<t)},schedulesByFrequency:e=>{const t={};return e.schedules.forEach(e=>{t[e.frequency]=(t[e.frequency]||0)+1}),t},schedulesByPriority:e=>{const t={};return e.schedules.forEach(e=>{t[e.priority]=(t[e.priority]||0)+1}),t},upcomingExecutions:e=>{const t=new Date,a=new Date(t.getTime()+6048e5);return e.schedules.filter(e=>"active"===e.status).filter(e=>{const s=new Date(e.nextExecution);return s>=t&&s<=a}).sort((e,t)=>new Date(e.nextExecution)-new Date(t.nextExecution))},filteredSchedules:e=>{let t=e.schedules;if(e.searchTerm){const a=e.searchTerm.toLowerCase();t=t.filter(e=>e.title.toLowerCase().includes(a)||e.description.toLowerCase().includes(a)||e.assetCode.toLowerCase().includes(a)||e.assetName.toLowerCase().includes(a)||e.assignedTo.toLowerCase().includes(a))}return e.filters.status&&(t=t.filter(t=>t.status===e.filters.status)),e.filters.type&&(t=t.filter(t=>t.type===e.filters.type)),e.filters.frequency&&(t=t.filter(t=>t.frequency===e.filters.frequency)),e.filters.priority&&(t=t.filter(t=>t.priority===e.filters.priority)),e.filters.assignedTo&&(t=t.filter(t=>t.assignedTo===e.filters.assignedTo)),e.filters.dateRange.start&&e.filters.dateRange.end&&(t=t.filter(t=>{const a=t.nextExecution;return a>=e.filters.dateRange.start&&a<=e.filters.dateRange.end})),t}},actions:{async fetchSchedules(){this.loading=!0,this.error=null;try{await new Promise(e=>setTimeout(e,500)),this.loading=!1}catch(e){throw this.error="Erro ao carregar agendamentos",this.loading=!1,e}},async createSchedule(e){this.loading=!0,this.error=null;try{await new Promise(e=>setTimeout(e,300));const t={id:Date.now(),...e,status:"active",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),executionHistory:[]};this.schedules.unshift(t),this.loading=!1}catch(t){throw this.error="Erro ao criar agendamento",this.loading=!1,t}},async updateSchedule(e,t){this.loading=!0,this.error=null;try{await new Promise(e=>setTimeout(e,300));const a=this.schedules.findIndex(t=>t.id===e);-1!==a&&(this.schedules[a]={...this.schedules[a],...t,updatedAt:(new Date).toISOString()}),this.loading=!1}catch(a){throw this.error="Erro ao atualizar agendamento",this.loading=!1,a}},async toggleScheduleStatus(e){this.loading=!0,this.error=null;try{await new Promise(e=>setTimeout(e,300));const t=this.schedules.find(t=>t.id===e);t&&(t.status="active"===t.status?"paused":"active",t.updatedAt=(new Date).toISOString()),this.loading=!1}catch(t){throw this.error="Erro ao alterar status do agendamento",this.loading=!1,t}},async executeSchedule(e,t=""){this.loading=!0,this.error=null;try{await new Promise(e=>setTimeout(e,500));const a=this.schedules.find(t=>t.id===e);if(a){const e={id:Date.now(),executedAt:(new Date).toISOString(),completedAt:(new Date).toISOString(),status:"completed",notes:t||"Execução manual",technician:a.assignedTo};a.executionHistory.unshift(e),a.lastExecution=(new Date).toISOString().split("T")[0],a.nextExecution=this.calculateNextExecution(a.frequency,a.lastExecution),a.updatedAt=(new Date).toISOString()}this.loading=!1}catch(a){throw this.error="Erro ao executar agendamento",this.loading=!1,a}},async deleteSchedule(e){this.loading=!0,this.error=null;try{await new Promise(e=>setTimeout(e,300));const t=this.schedules.findIndex(t=>t.id===e);-1!==t&&this.schedules.splice(t,1),this.loading=!1}catch(t){throw this.error="Erro ao deletar agendamento",this.loading=!1,t}},calculateNextExecution(e,t){const a=new Date(t);switch(e){case"daily":default:a.setDate(a.getDate()+1);break;case"weekly":a.setDate(a.getDate()+7);break;case"monthly":a.setMonth(a.getMonth()+1);break;case"quarterly":a.setMonth(a.getMonth()+3);break;case"yearly":a.setFullYear(a.getFullYear()+1)}return a.toISOString().split("T")[0]},async exportSchedules(){this.loading=!0,this.error=null;try{await new Promise(e=>setTimeout(e,500));const e=this.generateCSV();this.downloadFile(e,"agendamentos.csv","text/csv"),this.loading=!1}catch(e){throw this.error="Erro ao exportar dados",this.loading=!1,e}},generateCSV(){return[["Código","Título","Tipo","Frequência","Prioridade","Status","Ativo","Responsável","Próxima Execução","Última Execução"],...this.filteredSchedules.map(e=>[e.id,e.title,e.type,e.frequency,e.priority,e.status,`${e.assetCode} - ${e.assetName}`,e.assignedTo,e.nextExecution,e.lastExecution||"Nunca"])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n")},downloadFile(e,t,a){const s=new Blob([e],{type:a}),l=window.URL.createObjectURL(s),i=document.createElement("a");i.href=l,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(l)},setSearchTerm(e){this.searchTerm=e},setFilters(e){this.filters={...this.filters,...e}},clearFilters(){this.searchTerm="",this.filters={status:"",type:"",frequency:"",priority:"",assignedTo:"",dateRange:{start:"",end:""}}},getStatusLabel:e=>({active:"Ativo",paused:"Pausado",inactive:"Inativo"}[e]||e),getTypeLabel:e=>({preventive:"Preventiva",corrective:"Corretiva"}[e]||e),getFrequencyLabel:e=>({daily:"Diário",weekly:"Semanal",monthly:"Mensal",quarterly:"Trimestral",yearly:"Anual"}[e]||e),getPriorityLabel:e=>({low:"Baixa",medium:"Média",high:"Alta",urgent:"Urgente"}[e]||e)}}),S={class:"schedule-page"},w={class:"page-header"},D={class:"header-content"},A={class:"header-actions"},k=["disabled"],E={class:"stats-grid"},C={class:"stat-card"},I={class:"stat-content"},q={class:"stat-value"},P={class:"stat-card"},M={class:"stat-content"},L={class:"stat-value"},V={class:"stat-card"},N={class:"stat-content"},U={class:"stat-value"},O={class:"stat-card"},R={class:"stat-content"},F={class:"stat-value"},Z={class:"filters-section"},B={class:"filters-row"},z={class:"filter-group"},H={class:"filter-group"},$={class:"filter-group"},j={class:"filter-group"},J={class:"filter-group"},Y={key:0,class:"upcoming-section"},_={class:"upcoming-list"},W={class:"upcoming-date"},G={class:"date-day"},K={class:"date-month"},Q={class:"upcoming-content"},X={class:"upcoming-title"},ee={class:"upcoming-details"},te={class:"upcoming-asset"},ae={class:"upcoming-tech"},se={class:"upcoming-duration"},le={class:"upcoming-actions"},ie=["onClick","disabled"],oe={class:"table-section"},ne={class:"table-container"},re={key:0,class:"data-table"},de={class:"schedule-code"},ce={class:"schedule-title"},ue={class:"title"},ve={class:"description"},pe={class:"frequency"},me={class:"asset-info"},he={class:"asset-code"},ge={class:"asset-name"},ye={class:"technician"},be={class:"date-info"},fe={class:"next-date"},xe={key:0,class:"last-date"},Te={class:"action-buttons"},Se=["onClick"],we=["onClick"],De=["onClick","title","disabled"],Ae=["onClick","disabled"],ke={key:1,class:"loading-state"},Ee={key:2,class:"empty-state"},Ce={class:"modal-header"},Ie={class:"modal-body"},qe={class:"form-row"},Pe={class:"form-group"},Me={class:"form-group"},Le={class:"form-row"},Ve={class:"form-group"},Ne={class:"form-group"},Ue={class:"form-row"},Oe={class:"form-group"},Re=["value"],Fe={class:"form-group"},Ze=["value"],Be={class:"form-row"},ze={class:"form-group"},He={class:"form-group"},$e={class:"form-group"},je={class:"form-group"},Je={class:"modal-footer"},Ye=["disabled"],_e={class:"modal-body"},We={key:0,class:"schedule-details"},Ge={class:"details-grid"},Ke={class:"detail-item"},Qe={class:"detail-item"},Xe={class:"detail-item"},et={class:"detail-item"},tt={class:"detail-item"},at={class:"detail-item"},st={class:"detail-item"},lt={class:"detail-item"},it={class:"detail-item"},ot={class:"detail-item"},nt={class:"detail-item"},rt={class:"detail-item"},dt={class:"detail-section"},ct={key:0,class:"detail-section"},ut={key:1,class:"detail-section"},vt={class:"execution-history"},pt={class:"execution-header"},mt={class:"execution-date"},ht={class:"badge badge-success"},gt={class:"execution-details"},yt={key:0},bt={class:"modal-footer"},ft={key:3,class:"alert alert-success"},xt={key:4,class:"alert alert-error"},Tt=f({__name:"Schedule",setup(e){const f=T(),Tt=t(!1),St=t(!1),wt=t(null),Dt=t(null),At=t(""),kt=t({title:"",description:"",type:"",frequency:"",priority:"",assetId:"",assignedTo:"",startDate:"",estimatedDuration:"",notes:""}),Et=a(()=>f.loading),Ct=a(()=>f.error);a(()=>f.schedules);const It=a(()=>f.filteredSchedules),qt=a(()=>f.totalSchedules),Pt=a(()=>f.activeSchedules),Mt=a(()=>f.pausedSchedules),Lt=a(()=>f.overdueSchedules),Vt=a(()=>f.upcomingExecutions),Nt=a(()=>f.technicians),Ut=a(()=>f.availableAssets),Ot=a({get:()=>f.searchTerm,set:e=>f.setSearchTerm(e)}),Rt=a({get:()=>f.filters,set:e=>f.setFilters(e)}),Ft=()=>{wt.value=null,zt(),Tt.value=!0},Zt=()=>{Tt.value=!1,wt.value=null,zt()},Bt=()=>{St.value=!1,Dt.value=null},zt=()=>{kt.value={title:"",description:"",type:"",frequency:"",priority:"",assetId:"",assignedTo:"",startDate:"",estimatedDuration:"",notes:""}},Ht=e=>{Dt.value=e,St.value=!0},$t=e=>{wt.value=e,Ut.value.find(t=>t.id===e.assetId),kt.value={title:e.title,description:e.description,type:e.type,frequency:e.frequency,priority:e.priority,assetId:e.assetId,assignedTo:e.assignedTo,startDate:e.startDate,estimatedDuration:e.estimatedDuration,notes:e.notes||""},Bt(),Tt.value=!0},jt=async()=>{try{const e=Ut.value.find(e=>e.id===kt.value.assetId),t={...kt.value,assetCode:(null==e?void 0:e.code)||"",assetName:(null==e?void 0:e.name)||"",department:"TI",nextExecution:kt.value.startDate};wt.value?(await f.updateSchedule(wt.value.id,t),At.value="Agendamento atualizado com sucesso!"):(await f.createSchedule(t),At.value="Agendamento criado com sucesso!"),Zt(),setTimeout(()=>{At.value=""},3e3)}catch(e){x.error("Erro ao salvar agendamento:",e)}},Jt=async e=>{try{const t=prompt("Observações sobre a execução (opcional):");null!==t&&(await f.executeSchedule(e,t),At.value="Agendamento executado com sucesso!",setTimeout(()=>{At.value=""},3e3))}catch(t){x.error("Erro ao executar agendamento:",t)}},Yt=async()=>{try{await f.exportSchedules(),At.value="Dados exportados com sucesso!",setTimeout(()=>{At.value=""},3e3)}catch(e){x.error("Erro ao exportar dados:",e)}},_t=()=>{f.clearFilters()},Wt=e=>f.getStatusLabel(e),Gt=e=>f.getTypeLabel(e),Kt=e=>f.getFrequencyLabel(e),Qt=e=>f.getPriorityLabel(e),Xt=(e,t="DD/MM/YYYY")=>{if(!e)return"";const a=new Date(e);if("DD"===t)return a.getDate().toString().padStart(2,"0");if("MMM"===t){return["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][a.getMonth()]}return a.toLocaleDateString("pt-BR")},ea=e=>{if(!e)return"";return new Date(e).toLocaleString("pt-BR")},ta=(e,t)=>{if(!e||!t)return"N/A";const a=new Date(e),s=new Date(t)-a;return`${Math.round(s/36e5*10)/10}h`};return s(Ct,e=>{e&&setTimeout(()=>{f.error=null},5e3)}),l(async()=>{try{await f.fetchSchedules()}catch(e){x.error("Erro ao carregar agendamentos:",e)}}),(e,t)=>(b(),i("div",S,[o("div",w,[o("div",D,[t[20]||(t[20]=o("div",{class:"header-text"},[o("h1",{class:"page-title"},"Agendamentos"),o("p",{class:"page-subtitle"},"Gerencie agendamentos de manutenção preventiva e corretiva")],-1)),o("div",A,[o("button",{class:"btn btn-outline",onClick:Yt,disabled:Et.value},[...t[18]||(t[18]=[o("i",{class:"icon-download"},null,-1),r(" Exportar ",-1)])],8,k),o("button",{class:"btn btn-primary",onClick:Ft},[...t[19]||(t[19]=[o("i",{class:"icon-plus"},null,-1),r(" Novo Agendamento ",-1)])])])])]),o("div",E,[o("div",C,[t[22]||(t[22]=o("div",{class:"stat-icon primary"},[o("i",{class:"icon-calendar"})],-1)),o("div",I,[o("div",q,d(qt.value),1),t[21]||(t[21]=o("div",{class:"stat-label"},"Total de Agendamentos",-1))])]),o("div",P,[t[24]||(t[24]=o("div",{class:"stat-icon success"},[o("i",{class:"icon-play"})],-1)),o("div",M,[o("div",L,d(Pt.value.length),1),t[23]||(t[23]=o("div",{class:"stat-label"},"Ativos",-1))])]),o("div",V,[t[26]||(t[26]=o("div",{class:"stat-icon warning"},[o("i",{class:"icon-pause"})],-1)),o("div",N,[o("div",U,d(Mt.value.length),1),t[25]||(t[25]=o("div",{class:"stat-label"},"Pausados",-1))])]),o("div",O,[t[28]||(t[28]=o("div",{class:"stat-icon danger"},[o("i",{class:"icon-alert"})],-1)),o("div",R,[o("div",F,d(Lt.value.length),1),t[27]||(t[27]=o("div",{class:"stat-label"},"Em Atraso",-1))])])]),o("div",Z,[o("div",B,[o("div",z,[c(o("input",{type:"text",placeholder:"Buscar agendamentos...","onUpdate:modelValue":t[0]||(t[0]=e=>Ot.value=e),class:"search-input"},null,512),[[u,Ot.value]])]),o("div",H,[c(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>Rt.value.status=e),class:"filter-select"},[...t[29]||(t[29]=[o("option",{value:""},"Todos os Status",-1),o("option",{value:"active"},"Ativo",-1),o("option",{value:"paused"},"Pausado",-1),o("option",{value:"inactive"},"Inativo",-1)])],512),[[v,Rt.value.status]])]),o("div",$,[c(o("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>Rt.value.type=e),class:"filter-select"},[...t[30]||(t[30]=[o("option",{value:""},"Todos os Tipos",-1),o("option",{value:"preventive"},"Preventiva",-1),o("option",{value:"corrective"},"Corretiva",-1)])],512),[[v,Rt.value.type]])]),o("div",j,[c(o("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>Rt.value.frequency=e),class:"filter-select"},[...t[31]||(t[31]=[p('<option value="" data-v-a0881884>Todas as Frequências</option><option value="daily" data-v-a0881884>Diário</option><option value="weekly" data-v-a0881884>Semanal</option><option value="monthly" data-v-a0881884>Mensal</option><option value="quarterly" data-v-a0881884>Trimestral</option><option value="yearly" data-v-a0881884>Anual</option>',6)])],512),[[v,Rt.value.frequency]])]),o("div",J,[c(o("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>Rt.value.priority=e),class:"filter-select"},[...t[32]||(t[32]=[p('<option value="" data-v-a0881884>Todas as Prioridades</option><option value="low" data-v-a0881884>Baixa</option><option value="medium" data-v-a0881884>Média</option><option value="high" data-v-a0881884>Alta</option><option value="urgent" data-v-a0881884>Urgente</option>',5)])],512),[[v,Rt.value.priority]])]),o("div",{class:"filter-group"},[o("button",{class:"btn btn-outline btn-sm",onClick:_t},[...t[33]||(t[33]=[o("i",{class:"icon-x"},null,-1),r(" Limpar ",-1)])])])])]),Vt.value.length>0?(b(),i("div",Y,[t[34]||(t[34]=o("h3",{class:"section-title"},"Próximas Execuções (7 dias)",-1)),o("div",_,[(b(!0),i(m,null,h(Vt.value,e=>(b(),i("div",{key:e.id,class:"upcoming-item"},[o("div",W,[o("div",G,d(Xt(e.nextExecution,"DD")),1),o("div",K,d(Xt(e.nextExecution,"MMM")),1)]),o("div",Q,[o("div",X,d(e.title),1),o("div",ee,[o("span",te,d(e.assetCode),1),o("span",ae,d(e.assignedTo),1),o("span",se,d(e.estimatedDuration)+"h",1)])]),o("div",le,[o("button",{class:"btn btn-sm btn-primary",onClick:t=>Jt(e.id),disabled:Et.value}," Executar Agora ",8,ie)])]))),128))])])):n("",!0),o("div",oe,[o("div",ne,[!Et.value&&It.value.length>0?(b(),i("table",re,[t[38]||(t[38]=o("thead",null,[o("tr",null,[o("th",null,"Código"),o("th",null,"Título"),o("th",null,"Tipo"),o("th",null,"Frequência"),o("th",null,"Prioridade"),o("th",null,"Status"),o("th",null,"Ativo"),o("th",null,"Responsável"),o("th",null,"Próxima Execução"),o("th",null,"Ações")])],-1)),o("tbody",null,[(b(!0),i(m,null,h(It.value,e=>(b(),i("tr",{key:e.id},[o("td",null,[o("span",de,"#"+d(e.id),1)]),o("td",null,[o("div",ce,[o("div",ue,d(e.title),1),o("div",ve,d(e.description),1)])]),o("td",null,[o("span",{class:g(["badge",`badge-${e.type}`])},d(Gt(e.type)),3)]),o("td",null,[o("span",pe,d(Kt(e.frequency)),1)]),o("td",null,[o("span",{class:g(["badge",`badge-${e.priority}`])},d(Qt(e.priority)),3)]),o("td",null,[o("span",{class:g(["badge",`badge-${e.status}`])},d(Wt(e.status)),3)]),o("td",null,[o("div",me,[o("div",he,d(e.assetCode),1),o("div",ge,d(e.assetName),1)])]),o("td",null,[o("span",ye,d(e.assignedTo),1)]),o("td",null,[o("div",be,[o("div",fe,d(Xt(e.nextExecution)),1),e.lastExecution?(b(),i("div",xe," Última: "+d(Xt(e.lastExecution)),1)):n("",!0)])]),o("td",null,[o("div",Te,[o("button",{class:"btn btn-sm btn-outline",onClick:t=>Ht(e),title:"Visualizar"},[...t[35]||(t[35]=[o("i",{class:"icon-eye"},null,-1)])],8,Se),o("button",{class:"btn btn-sm btn-outline",onClick:t=>$t(e),title:"Editar"},[...t[36]||(t[36]=[o("i",{class:"icon-edit"},null,-1)])],8,we),o("button",{class:g(["btn btn-sm","active"===e.status?"btn-warning":"btn-success"]),onClick:t=>(async e=>{try{await f.toggleScheduleStatus(e),At.value="Status do agendamento alterado com sucesso!",setTimeout(()=>{At.value=""},3e3)}catch(t){x.error("Erro ao alterar status:",t)}})(e.id),title:"active"===e.status?"Pausar":"Ativar",disabled:Et.value},[o("i",{class:g("active"===e.status?"icon-pause":"icon-play")},null,2)],10,De),o("button",{class:"btn btn-sm btn-primary",onClick:t=>Jt(e.id),title:"Executar Agora",disabled:Et.value||"active"!==e.status},[...t[37]||(t[37]=[o("i",{class:"icon-play-circle"},null,-1)])],8,Ae)])])]))),128))])])):n("",!0),Et.value?(b(),i("div",ke,[...t[39]||(t[39]=[o("div",{class:"loading-spinner"},null,-1),o("p",null,"Carregando agendamentos...",-1)])])):n("",!0),Et.value||0!==It.value.length?n("",!0):(b(),i("div",Ee,[t[40]||(t[40]=o("div",{class:"empty-icon"},[o("i",{class:"icon-calendar"})],-1)),t[41]||(t[41]=o("h3",null,"Nenhum agendamento encontrado",-1)),t[42]||(t[42]=o("p",null,"Não há agendamentos que correspondam aos filtros aplicados.",-1)),o("button",{class:"btn btn-primary",onClick:_t}," Limpar Filtros ")]))])]),Tt.value?(b(),i("div",{key:1,class:"modal-overlay",onClick:Zt},[o("div",{class:"modal-content",onClick:t[15]||(t[15]=y(()=>{},["stop"]))},[o("div",Ce,[o("h3",null,d(wt.value?"Editar Agendamento":"Novo Agendamento"),1),o("button",{class:"modal-close",onClick:Zt},[...t[43]||(t[43]=[o("i",{class:"icon-x"},null,-1)])])]),o("div",Ie,[o("form",{onSubmit:y(jt,["prevent"])},[o("div",qe,[o("div",Pe,[t[44]||(t[44]=o("label",null,"Título *",-1)),c(o("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>kt.value.title=e),required:"",class:"form-input",placeholder:"Ex: Manutenção Preventiva - Servidores"},null,512),[[u,kt.value.title]])]),o("div",Me,[t[46]||(t[46]=o("label",null,"Tipo *",-1)),c(o("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>kt.value.type=e),required:"",class:"form-select"},[...t[45]||(t[45]=[o("option",{value:""},"Selecione o tipo",-1),o("option",{value:"preventive"},"Preventiva",-1),o("option",{value:"corrective"},"Corretiva",-1)])],512),[[v,kt.value.type]])])]),o("div",Le,[o("div",Ve,[t[48]||(t[48]=o("label",null,"Frequência *",-1)),c(o("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>kt.value.frequency=e),required:"",class:"form-select"},[...t[47]||(t[47]=[p('<option value="" data-v-a0881884>Selecione a frequência</option><option value="daily" data-v-a0881884>Diário</option><option value="weekly" data-v-a0881884>Semanal</option><option value="monthly" data-v-a0881884>Mensal</option><option value="quarterly" data-v-a0881884>Trimestral</option><option value="yearly" data-v-a0881884>Anual</option>',6)])],512),[[v,kt.value.frequency]])]),o("div",Ne,[t[50]||(t[50]=o("label",null,"Prioridade *",-1)),c(o("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>kt.value.priority=e),required:"",class:"form-select"},[...t[49]||(t[49]=[p('<option value="" data-v-a0881884>Selecione a prioridade</option><option value="low" data-v-a0881884>Baixa</option><option value="medium" data-v-a0881884>Média</option><option value="high" data-v-a0881884>Alta</option><option value="urgent" data-v-a0881884>Urgente</option>',5)])],512),[[v,kt.value.priority]])])]),o("div",Ue,[o("div",Oe,[t[52]||(t[52]=o("label",null,"Ativo *",-1)),c(o("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>kt.value.assetId=e),required:"",class:"form-select"},[t[51]||(t[51]=o("option",{value:""},"Selecione o ativo",-1)),(b(!0),i(m,null,h(Ut.value,e=>(b(),i("option",{key:e.id,value:e.id},d(e.code)+" - "+d(e.name),9,Re))),128))],512),[[v,kt.value.assetId]])]),o("div",Fe,[t[54]||(t[54]=o("label",null,"Responsável *",-1)),c(o("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>kt.value.assignedTo=e),required:"",class:"form-select"},[t[53]||(t[53]=o("option",{value:""},"Selecione o responsável",-1)),(b(!0),i(m,null,h(Nt.value,e=>(b(),i("option",{key:e.id,value:e.name},d(e.name)+" - "+d(e.specialties.join(", ")),9,Ze))),128))],512),[[v,kt.value.assignedTo]])])]),o("div",Be,[o("div",ze,[t[55]||(t[55]=o("label",null,"Data de Início *",-1)),c(o("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=e=>kt.value.startDate=e),required:"",class:"form-input"},null,512),[[u,kt.value.startDate]])]),o("div",He,[t[56]||(t[56]=o("label",null,"Duração Estimada (horas) *",-1)),c(o("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=e=>kt.value.estimatedDuration=e),required:"",min:"0.5",step:"0.5",class:"form-input",placeholder:"Ex: 2.5"},null,512),[[u,kt.value.estimatedDuration]])])]),o("div",$e,[t[57]||(t[57]=o("label",null,"Descrição *",-1)),c(o("textarea",{"onUpdate:modelValue":t[13]||(t[13]=e=>kt.value.description=e),required:"",class:"form-textarea",rows:"3",placeholder:"Descreva as atividades a serem realizadas..."},null,512),[[u,kt.value.description]])]),o("div",je,[t[58]||(t[58]=o("label",null,"Observações",-1)),c(o("textarea",{"onUpdate:modelValue":t[14]||(t[14]=e=>kt.value.notes=e),class:"form-textarea",rows:"2",placeholder:"Observações adicionais..."},null,512),[[u,kt.value.notes]])])],32)]),o("div",Je,[o("button",{type:"button",class:"btn btn-outline",onClick:Zt}," Cancelar "),o("button",{type:"button",class:"btn btn-primary",onClick:jt,disabled:Et.value},d(wt.value?"Atualizar":"Criar")+" Agendamento ",9,Ye)])])])):n("",!0),St.value?(b(),i("div",{key:2,class:"modal-overlay",onClick:Bt},[o("div",{class:"modal-content modal-large",onClick:t[17]||(t[17]=y(()=>{},["stop"]))},[o("div",{class:"modal-header"},[t[60]||(t[60]=o("h3",null,"Detalhes do Agendamento",-1)),o("button",{class:"modal-close",onClick:Bt},[...t[59]||(t[59]=[o("i",{class:"icon-x"},null,-1)])])]),o("div",_e,[Dt.value?(b(),i("div",We,[o("div",Ge,[o("div",Ke,[t[61]||(t[61]=o("label",null,"Código",-1)),o("span",null,"#"+d(Dt.value.id),1)]),o("div",Qe,[t[62]||(t[62]=o("label",null,"Status",-1)),o("span",{class:g(["badge",`badge-${Dt.value.status}`])},d(Wt(Dt.value.status)),3)]),o("div",Xe,[t[63]||(t[63]=o("label",null,"Título",-1)),o("span",null,d(Dt.value.title),1)]),o("div",et,[t[64]||(t[64]=o("label",null,"Tipo",-1)),o("span",{class:g(["badge",`badge-${Dt.value.type}`])},d(Gt(Dt.value.type)),3)]),o("div",tt,[t[65]||(t[65]=o("label",null,"Frequência",-1)),o("span",null,d(Kt(Dt.value.frequency)),1)]),o("div",at,[t[66]||(t[66]=o("label",null,"Prioridade",-1)),o("span",{class:g(["badge",`badge-${Dt.value.priority}`])},d(Qt(Dt.value.priority)),3)]),o("div",st,[t[67]||(t[67]=o("label",null,"Ativo",-1)),o("span",null,d(Dt.value.assetCode)+" - "+d(Dt.value.assetName),1)]),o("div",lt,[t[68]||(t[68]=o("label",null,"Responsável",-1)),o("span",null,d(Dt.value.assignedTo),1)]),o("div",it,[t[69]||(t[69]=o("label",null,"Data de Início",-1)),o("span",null,d(Xt(Dt.value.startDate)),1)]),o("div",ot,[t[70]||(t[70]=o("label",null,"Próxima Execução",-1)),o("span",null,d(Xt(Dt.value.nextExecution)),1)]),o("div",nt,[t[71]||(t[71]=o("label",null,"Última Execução",-1)),o("span",null,d(Dt.value.lastExecution?Xt(Dt.value.lastExecution):"Nunca"),1)]),o("div",rt,[t[72]||(t[72]=o("label",null,"Duração Estimada",-1)),o("span",null,d(Dt.value.estimatedDuration)+" horas",1)])]),o("div",dt,[t[73]||(t[73]=o("label",null,"Descrição",-1)),o("p",null,d(Dt.value.description),1)]),Dt.value.notes?(b(),i("div",ct,[t[74]||(t[74]=o("label",null,"Observações",-1)),o("p",null,d(Dt.value.notes),1)])):n("",!0),Dt.value.executionHistory.length>0?(b(),i("div",ut,[t[78]||(t[78]=o("label",null,"Histórico de Execuções",-1)),o("div",vt,[(b(!0),i(m,null,h(Dt.value.executionHistory,e=>(b(),i("div",{key:e.id,class:"execution-item"},[o("div",pt,[o("span",mt,d(ea(e.executedAt)),1),o("span",ht,d(e.status),1)]),o("div",gt,[o("p",null,[t[75]||(t[75]=o("strong",null,"Técnico:",-1)),r(" "+d(e.technician),1)]),o("p",null,[t[76]||(t[76]=o("strong",null,"Duração:",-1)),r(" "+d(ta(e.executedAt,e.completedAt)),1)]),e.notes?(b(),i("p",yt,[t[77]||(t[77]=o("strong",null,"Observações:",-1)),r(" "+d(e.notes),1)])):n("",!0)])]))),128))])])):n("",!0)])):n("",!0)]),o("div",bt,[o("button",{type:"button",class:"btn btn-outline",onClick:Bt}," Fechar "),o("button",{type:"button",class:"btn btn-primary",onClick:t[16]||(t[16]=e=>$t(Dt.value))}," Editar ")])])])):n("",!0),At.value?(b(),i("div",ft,d(At.value),1)):n("",!0),Ct.value?(b(),i("div",xt,d(Ct.value),1)):n("",!0)]))}},[["__scopeId","data-v-a0881884"]]);export{Tt as default};
//# sourceMappingURL=Schedule-Bt1_Brj_.js.map
