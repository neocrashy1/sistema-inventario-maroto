import{r as a,c as s,o as l,e,f as i,D as t,y as n,F as c,C as o,B as d,m as r,K as u,L as v,n as m,k as p}from"./vue-vendor-BY5hdAT7.js";import{_ as h,l as f}from"./index-Dur0lEaU.js";import{u as b}from"./reports-B0ZoCeuq.js";import"./utils-vendor-COuxBHZ0.js";import"./serviceOrders-nzPMGKta.js";import"./employeeLoans-BCft1fZR.js";import"./thirdPartyLoans-C751nSTY.js";import"./physicalInventory-DJKBk5BT.js";import"./audits-BUtnpEeu.js";const y={class:"analytics"},g={class:"page-header"},k={class:"page-actions"},w=["disabled"],C=["disabled"],A={class:"time-range-selector"},D={class:"time-range-buttons"},R=["onClick"],j={class:"custom-date-range"},x={class:"kpi-section"},L={class:"kpi-grid"},S={class:"kpi-card"},I={class:"kpi-content"},V={class:"kpi-value"},U={class:"kpi-change positive"},B={class:"kpi-card"},G={class:"kpi-content"},O={class:"kpi-value"},z={class:"kpi-change positive"},M={class:"kpi-card"},T={class:"kpi-content"},F={class:"kpi-value"},P={class:"kpi-change negative"},_={class:"kpi-card"},E={class:"kpi-content"},N={class:"kpi-value"},K={class:"kpi-change neutral"},$={class:"charts-section"},q={class:"charts-grid"},H={class:"chart-card"},J={class:"chart-header"},Q={class:"chart-actions"},W={class:"chart-container"},X={class:"chart-placeholder"},Y={class:"chart-card"},Z={class:"chart-header"},aa={class:"chart-actions"},sa={class:"chart-container"},la={class:"chart-placeholder"},ea={class:"chart-card"},ia={class:"chart-header"},ta={class:"chart-actions"},na={class:"chart-container"},ca={class:"chart-placeholder"},oa={class:"chart-card"},da={class:"chart-header"},ra={class:"chart-actions"},ua={class:"chart-container"},va={class:"chart-placeholder"},ma={class:"detailed-analytics"},pa={class:"analytics-grid"},ha={class:"analytics-card"},fa={class:"analytics-list"},ba={class:"item-info"},ya={class:"item-name"},ga={class:"item-category"},ka={class:"item-value"},wa={class:"analytics-card"},Ca={class:"analytics-list"},Aa={class:"item-info"},Da={class:"item-name"},Ra={class:"item-category"},ja={class:"item-usage"},xa={class:"usage-bar"},La={class:"analytics-card"},Sa={class:"analytics-list"},Ia={class:"item-info"},Va={class:"item-name"},Ua={class:"item-category"},Ba={class:"alert-date"},Ga={class:"analytics-card"},Oa={class:"financial-metrics"},za={class:"metric"},Ma={class:"metric-value"},Ta={class:"metric"},Fa={class:"metric-value negative"},Pa={class:"metric"},_a={class:"metric-value"},Ea={class:"metric"},Na={class:"metric-value"},Ka=h({__name:"Analytics",setup(h){const Ka=b(),$a=a(!1),qa=a("last-30-days"),Ha=a(""),Ja=a(""),Qa=a(null),Wa=a(null),Xa=a(null),Ya=a(null),Za=[{value:"last-7-days",label:"7 dias"},{value:"last-30-days",label:"30 dias"},{value:"last-90-days",label:"90 dias"},{value:"last-year",label:"1 ano"},{value:"custom",label:"Personalizado"}],as=s(()=>Ka.analyticsData),ss=async()=>{$a.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),await ns()}finally{$a.value=!1}},ls=()=>{const a={period:qa.value,kpis:as.value,exportedAt:(new Date).toISOString()},s=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),l=URL.createObjectURL(s),e=document.createElement("a");e.href=l,e.download=`analytics-${(new Date).toISOString().split("T")[0]}.json`,e.click(),URL.revokeObjectURL(l)},es=a=>{f.debug(`Exportando gráfico: ${a}`)},is=()=>{Ha.value&&Ja.value&&(qa.value="custom")},ts=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),ns=async()=>{if(await m(),Qa.value){const a=Qa.value.getContext("2d");drawLineChart(a,as.value.assetsTrend)}if(Wa.value){const a=Wa.value.getContext("2d");drawPieChart(a,as.value.categoriesData)}if(Xa.value){const a=Xa.value.getContext("2d");drawBarChart(a,as.value.maintenanceData)}if(Ya.value){const a=Ya.value.getContext("2d");drawDoughnutChart(a,as.value.statusData)}};return l(()=>{f.debug("Analytics view montada")}),(a,s)=>{var l,m,h,f,b,Ka,Qa,Wa,Xa,Ya,ns;return p(),e("div",y,[i("div",g,[s[8]||(s[8]=i("div",{class:"page-header-content"},[i("h1",{class:"page-title"},"Analytics"),i("p",{class:"page-subtitle"},"Análises avançadas e indicadores de performance do sistema")],-1)),i("div",k,[i("button",{class:"btn btn-outline",onClick:ls,disabled:$a.value},[...s[6]||(s[6]=[i("i",{class:"fas fa-download"},null,-1),t(" Exportar Dados ",-1)])],8,w),i("button",{class:"btn btn-primary",onClick:ss,disabled:$a.value},[i("i",{class:n(["fas fa-sync-alt",{"fa-spin":$a.value}])},null,2),s[7]||(s[7]=t(" Atualizar ",-1))],8,C)])]),i("div",A,[i("div",D,[(p(),e(c,null,o(Za,a=>i("button",{key:a.value,class:n(["btn btn-sm",{"btn-primary":qa.value===a.value,"btn-outline":qa.value!==a.value}]),onClick:s=>qa.value=a.value},d(a.label),11,R)),64))]),i("div",j,[r(i("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=a=>Ha.value=a),class:"form-input form-input-sm"},null,512),[[u,Ha.value]]),s[9]||(s[9]=i("span",null,"até",-1)),r(i("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=a=>Ja.value=a),class:"form-input form-input-sm"},null,512),[[u,Ja.value]]),i("button",{class:"btn btn-sm btn-outline",onClick:is}," Aplicar ")])]),i("div",x,[s[22]||(s[22]=i("h2",{class:"section-title"},"Indicadores Principais",-1)),i("div",L,[i("div",S,[s[12]||(s[12]=i("div",{class:"kpi-icon assets"},[i("i",{class:"fas fa-boxes"})],-1)),i("div",I,[i("div",V,d((ns=as.value.totalAssets,new Intl.NumberFormat("pt-BR").format(ns))),1),s[11]||(s[11]=i("div",{class:"kpi-label"},"Total de Ativos",-1)),i("div",U,[s[10]||(s[10]=i("i",{class:"fas fa-arrow-up"},null,-1)),t(" +"+d(as.value.assetsGrowth)+"% este mês ",1)])])]),i("div",B,[s[15]||(s[15]=i("div",{class:"kpi-icon value"},[i("i",{class:"fas fa-dollar-sign"})],-1)),i("div",G,[i("div",O,d(ts(as.value.totalValue)),1),s[14]||(s[14]=i("div",{class:"kpi-label"},"Valor Total",-1)),i("div",z,[s[13]||(s[13]=i("i",{class:"fas fa-arrow-up"},null,-1)),t(" +"+d(as.value.valueGrowth)+"% este mês ",1)])])]),i("div",M,[s[18]||(s[18]=i("div",{class:"kpi-icon utilization"},[i("i",{class:"fas fa-chart-pie"})],-1)),i("div",T,[i("div",F,d(as.value.utilizationRate)+"%",1),s[17]||(s[17]=i("div",{class:"kpi-label"},"Taxa de Utilização",-1)),i("div",P,[s[16]||(s[16]=i("i",{class:"fas fa-arrow-down"},null,-1)),t(" "+d(as.value.utilizationChange)+"% este mês ",1)])])]),i("div",_,[s[21]||(s[21]=i("div",{class:"kpi-icon maintenance"},[i("i",{class:"fas fa-tools"})],-1)),i("div",E,[i("div",N,d(ts(as.value.maintenanceCosts)),1),s[20]||(s[20]=i("div",{class:"kpi-label"},"Custos de Manutenção",-1)),i("div",K,[s[19]||(s[19]=i("i",{class:"fas fa-minus"},null,-1)),t(" "+d(as.value.maintenanceChange)+"% este mês ",1)])])])])]),i("div",$,[i("div",q,[i("div",H,[i("div",J,[s[24]||(s[24]=i("h3",null,"Crescimento de Ativos",-1)),i("div",Q,[i("button",{class:"btn btn-sm btn-outline",onClick:s[2]||(s[2]=a=>es("assets-trend"))},[...s[23]||(s[23]=[i("i",{class:"fas fa-download"},null,-1)])])])]),i("div",W,[i("div",X,[s[25]||(s[25]=i("p",null,"Gráfico de Crescimento de Ativos",-1)),i("p",null,d((null==(h=null==(m=null==(l=as.value)?void 0:l.trends)?void 0:m.monthlyGrowth)?void 0:h.length)||0)+" pontos de dados",1)])])]),i("div",Y,[i("div",Z,[s[27]||(s[27]=i("h3",null,"Distribuição por Categoria",-1)),i("div",aa,[i("button",{class:"btn btn-sm btn-outline",onClick:s[3]||(s[3]=a=>es("categories"))},[...s[26]||(s[26]=[i("i",{class:"fas fa-download"},null,-1)])])])]),i("div",sa,[i("div",la,[s[28]||(s[28]=i("p",null,"Gráfico de Distribuição por Categoria",-1)),i("p",null,d((null==(b=null==(f=as.value)?void 0:f.categories)?void 0:b.length)||0)+" categorias",1)])])]),i("div",ea,[i("div",ia,[s[30]||(s[30]=i("h3",null,"Custos de Manutenção",-1)),i("div",ta,[i("button",{class:"btn btn-sm btn-outline",onClick:s[4]||(s[4]=a=>es("maintenance"))},[...s[29]||(s[29]=[i("i",{class:"fas fa-download"},null,-1)])])])]),i("div",na,[i("div",ca,[s[31]||(s[31]=i("p",null,"Gráfico de Custos de Manutenção",-1)),i("p",null,d((null==(Wa=null==(Qa=null==(Ka=as.value)?void 0:Ka.maintenance)?void 0:Qa.costs)?void 0:Wa.length)||0)+" registros",1)])])]),i("div",oa,[i("div",da,[s[33]||(s[33]=i("h3",null,"Status dos Ativos",-1)),i("div",ra,[i("button",{class:"btn btn-sm btn-outline",onClick:s[5]||(s[5]=a=>es("status"))},[...s[32]||(s[32]=[i("i",{class:"fas fa-download"},null,-1)])])])]),i("div",ua,[i("div",va,[s[34]||(s[34]=i("p",null,"Gráfico de Status dos Ativos",-1)),i("p",null,d((null==(Ya=null==(Xa=as.value)?void 0:Xa.status)?void 0:Ya.length)||0)+" status",1)])])])])]),i("div",ma,[i("div",pa,[i("div",ha,[s[35]||(s[35]=i("h3",null,"Ativos de Maior Valor",-1)),i("div",fa,[(p(!0),e(c,null,o(as.value.topAssetsByValue,a=>(p(),e("div",{key:a.id,class:"analytics-item"},[i("div",ba,[i("div",ya,d(a.name),1),i("div",ga,d(a.category),1)]),i("div",ka,d(ts(a.value)),1)]))),128))])]),i("div",wa,[s[36]||(s[36]=i("h3",null,"Ativos Mais Utilizados",-1)),i("div",Ca,[(p(!0),e(c,null,o(as.value.mostUsedAssets,a=>(p(),e("div",{key:a.id,class:"analytics-item"},[i("div",Aa,[i("div",Da,d(a.name),1),i("div",Ra,d(a.category),1)]),i("div",ja,[i("div",xa,[i("div",{class:"usage-fill",style:v({width:a.usageRate+"%"})},null,4)]),i("span",null,d(a.usageRate)+"%",1)])]))),128))])]),i("div",La,[s[38]||(s[38]=i("h3",null,"Alertas de Manutenção",-1)),i("div",Sa,[(p(!0),e(c,null,o(as.value.maintenanceAlerts,a=>{return p(),e("div",{key:a.id,class:n(["analytics-item alert-item",a.priority])},[s[37]||(s[37]=i("div",{class:"alert-icon"},[i("i",{class:"fas fa-exclamation-triangle"})],-1)),i("div",Ia,[i("div",Va,d(a.asset),1),i("div",Ua,d(a.type),1)]),i("div",Ba,d((l=a.dueDate,new Date(l).toLocaleDateString("pt-BR"))),1)],2);var l}),128))])]),i("div",Ga,[s[43]||(s[43]=i("h3",null,"Resumo Financeiro",-1)),i("div",Oa,[i("div",za,[s[39]||(s[39]=i("div",{class:"metric-label"},"Valor Total dos Ativos",-1)),i("div",Ma,d(ts(as.value.financialSummary.totalValue)),1)]),i("div",Ta,[s[40]||(s[40]=i("div",{class:"metric-label"},"Depreciação Acumulada",-1)),i("div",Fa,d(ts(as.value.financialSummary.depreciation)),1)]),i("div",Pa,[s[41]||(s[41]=i("div",{class:"metric-label"},"Valor Líquido",-1)),i("div",_a,d(ts(as.value.financialSummary.netValue)),1)]),i("div",Ea,[s[42]||(s[42]=i("div",{class:"metric-label"},"ROI Médio",-1)),i("div",Na,d(as.value.financialSummary.averageROI)+"%",1)])])])])])])}}},[["__scopeId","data-v-0dbe4c31"]]);export{Ka as default};
//# sourceMappingURL=Analytics-Dq670url.js.map
