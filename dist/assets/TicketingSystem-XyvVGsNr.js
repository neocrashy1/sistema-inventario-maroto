import{r as e,c as a,o as t,j as l,e as i,k as s,f as o,g as r,D as d,B as n,l as u,I as c,u as m,x as v}from"./vue-vendor-BY5hdAT7.js";import{_ as p,t as h,l as f,k as _}from"./index-Dur0lEaU.js";import"./utils-vendor-COuxBHZ0.js";const g={class:"ticketing-system"},b={class:"ticketing-header"},y={class:"header-content"},k={class:"header-info"},w={class:"ticketing-title"},C={class:"ticketing-subtitle"},V={class:"header-actions"},S={class:"ticketing-stats"},x={class:"stat-value"},D={class:"stat-value"},A={class:"stat-value"},z={class:"stat-value"},O={class:"ticketing-filters"},P={class:"ticketing-list"},E={class:"d-flex justify-space-between align-center w-100"},R={class:"text-body-2 text-medium-emphasis"},U={key:1},I={class:"ticket-id"},T={class:"machine-info"},M={class:"machine-name"},j={class:"machine-ip text-caption text-medium-emphasis"},q={key:0,class:"assignee-info"},L={key:1,class:"text-medium-emphasis"},N={class:"date-info"},$={class:"date-value"},F={class:"date-relative text-caption text-medium-emphasis"},K={class:"action-buttons"},B={class:"text-subtitle-1 mb-3"},H={class:"text-body-1 mb-4"},J={key:0,class:"resolution-section"},G={class:"text-body-2"},Q={class:"ticket-metadata"},W={class:"metadata-item mb-3"},X={class:"metadata-item mb-3"},Y={key:0,class:"metadata-item mb-3"},Z={class:"ml-2"},ee={class:"font-weight-medium"},ae={class:"text-caption text-medium-emphasis"},te={class:"metadata-item mb-3"},le={class:"ml-2"},ie={class:"metadata-item mb-3"},se={class:"ml-2"},oe={key:1,class:"metadata-item mb-3"},re={class:"ml-2"},de=p({__name:"TicketingSystem",setup(p){const de=e([]),ne=e([]),ue=e([]),ce=e(""),me=e(null),ve=e(null),pe=e(null),he=e(null),fe=e(!1),_e=e(!1),ge=e(!1),be=e(!1),ye=e(null),ke=e(!1),we=e(!1),Ce=e({title:"",description:"",priority:"",category:"",status:"open",machine_id:null,assignee:"",resolution:""}),Ve=e(!1),Se=e(""),xe=e("success"),De=[{title:"ID",key:"id",sortable:!0,width:"80px"},{title:"Título",key:"title",sortable:!0},{title:"Prioridade",key:"priority",sortable:!0},{title:"Status",key:"status",sortable:!0},{title:"Máquina",key:"machine",sortable:!1},{title:"Categoria",key:"category",sortable:!0},{title:"Responsável",key:"assignee",sortable:!0},{title:"Criado em",key:"created_at",sortable:!0},{title:"Ações",key:"actions",sortable:!1}],Ae=[{title:"Aberto",value:"open"},{title:"Em Andamento",value:"in_progress"},{title:"Aguardando",value:"waiting"},{title:"Resolvido",value:"resolved"},{title:"Fechado",value:"closed"}],ze=[{title:"Baixa",value:"low"},{title:"Média",value:"medium"},{title:"Alta",value:"high"},{title:"Crítica",value:"critical"}],Oe=[{title:"Hardware",value:"hardware"},{title:"Software",value:"software"},{title:"Rede",value:"network"},{title:"Performance",value:"performance"},{title:"Segurança",value:"security"},{title:"Backup",value:"backup"},{title:"Outro",value:"other"}],Pe=[{title:"João Silva",value:"joao.silva"},{title:"Maria Santos",value:"maria.santos"},{title:"Pedro Costa",value:"pedro.costa"},{title:"Ana Oliveira",value:"ana.oliveira"}],Ee=a(()=>de.value.length),Re=a(()=>de.value.filter(e=>"open"===e.status).length),Ue=a(()=>de.value.filter(e=>"in_progress"===e.status).length),Ie=a(()=>de.value.filter(e=>"resolved"===e.status).length),Te=a(()=>ce.value||me.value||ve.value||pe.value||he.value),Me=a(()=>ue.value.map(e=>({title:`${e.hostname} (${e.ip_address})`,value:e.id}))),je=async()=>{try{const e=await h.getAll();de.value=e.data}catch(e){f.error("Error loading tickets:",e),de.value=Le()}He()},qe=async()=>{var e;try{const a=await _.getMachines(),t=Array.isArray(null==(e=a.data)?void 0:e.machines)?a.data.machines:Array.isArray(a.data)?a.data:[];ue.value=((e=[])=>e.map(e=>({id:e.id??e.machine_id??e.uuid??e._id??e.identifier??e.name,hostname:e.hostname??e.name??e.machine_id??`machine-${e.id??e.machine_id??Math.random().toString(36).slice(2,8)}`,ip_address:e.ip_address??e.ip??e.last_known_ip??e.address??"0.0.0.0"})))(t)}catch(a){f.error("Error loading machines:",a),ue.value=Ne()}},Le=()=>[{id:1,title:"Alto uso de CPU na máquina DESKTOP-001",description:'A máquina DESKTOP-001 está apresentando uso de CPU acima de 90% por mais de 30 minutos. Processo "chrome.exe" consumindo recursos excessivos.',priority:"high",status:"open",category:"performance",machine_id:1,machine_hostname:"DESKTOP-001",machine_ip:"192.168.1.100",assignee:"joao.silva",created_at:new Date(Date.now()-72e5).toISOString(),updated_at:new Date(Date.now()-36e5).toISOString(),resolution:null},{id:2,title:"Disco com pouco espaço no servidor",description:"O servidor SERVER-001 está com apenas 5% de espaço livre no disco C:. Necessário limpeza ou expansão.",priority:"critical",status:"in_progress",category:"hardware",machine_id:3,machine_hostname:"SERVER-001",machine_ip:"192.168.1.10",assignee:"maria.santos",created_at:new Date(Date.now()-144e5).toISOString(),updated_at:new Date(Date.now()-18e5).toISOString(),resolution:null},{id:3,title:"Falha na conexão de rede",description:"DESKTOP-002 perdeu conectividade com a rede. Cabo de rede pode estar danificado.",priority:"medium",status:"resolved",category:"network",machine_id:2,machine_hostname:"DESKTOP-002",machine_ip:"192.168.1.101",assignee:"pedro.costa",created_at:new Date(Date.now()-864e5).toISOString(),updated_at:new Date(Date.now()-72e5).toISOString(),resolution:"Cabo de rede substituído. Conectividade restaurada."},{id:4,title:"Atualização de software pendente",description:"Múltiplas atualizações de segurança pendentes no LAPTOP-001. Sistema pode estar vulnerável.",priority:"medium",status:"waiting",category:"security",machine_id:4,machine_hostname:"LAPTOP-001",machine_ip:"192.168.1.150",assignee:"ana.oliveira",created_at:new Date(Date.now()-216e5).toISOString(),updated_at:new Date(Date.now()-108e5).toISOString(),resolution:null}],Ne=()=>[{id:1,hostname:"DESKTOP-001",ip_address:"192.168.1.100"},{id:2,hostname:"DESKTOP-002",ip_address:"192.168.1.101"},{id:3,hostname:"SERVER-001",ip_address:"192.168.1.10"},{id:4,hostname:"LAPTOP-001",ip_address:"192.168.1.150"}],$e=async()=>{fe.value=!0;try{await je(),ca("Chamados atualizados com sucesso")}catch(e){ma("Erro ao atualizar chamados")}finally{fe.value=!1}},Fe=()=>{const e=Ke();Be(e,"chamados.csv"),ca("Chamados exportados com sucesso")},Ke=()=>[["ID","Título","Prioridade","Status","Categoria","Máquina","Responsável","Criado em"],...de.value.map(e=>[e.id,e.title,e.priority,ia(e.status),e.category,e.machine_hostname||"N/A",e.assignee||"Não atribuído",na(e.created_at)])].map(e=>e.join(",")).join("\n"),Be=(e,a)=>{const t=new Blob([e],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),i=URL.createObjectURL(t);l.setAttribute("href",i),l.setAttribute("download",a),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},He=()=>{let e=[...de.value];if(ce.value){const a=ce.value.toLowerCase();e=e.filter(e=>{var t;return e.title.toLowerCase().includes(a)||e.description.toLowerCase().includes(a)||(null==(t=e.machine_hostname)?void 0:t.toLowerCase().includes(a))})}me.value&&(e=e.filter(e=>e.status===me.value)),ve.value&&(e=e.filter(e=>e.priority===ve.value)),pe.value&&(e=e.filter(e=>e.category===pe.value)),he.value&&(e=e.filter(e=>e.assignee===he.value)),ne.value=e},Je=()=>{ce.value="",me.value=null,ve.value=null,pe.value=null,he.value=null,He()},Ge=()=>{ke.value=!1,Xe(),ge.value=!0},Qe=e=>{ke.value=!0,Ce.value={...e},be.value=!1,ge.value=!0},We=()=>{ge.value=!1,Xe()},Xe=()=>{Ce.value={title:"",description:"",priority:"",category:"",status:"open",machine_id:null,assignee:"",resolution:""}},Ye=async()=>{_e.value=!0;try{if(ke.value){const e=de.value.findIndex(e=>e.id===Ce.value.id);-1!==e&&(de.value[e]={...Ce.value,updated_at:(new Date).toISOString()},ca("Chamado atualizado com sucesso"))}else{const e={...Ce.value,id:Math.max(...de.value.map(e=>e.id),0)+1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};if(e.machine_id){const a=ue.value.find(a=>a.id===e.machine_id);a&&(e.machine_hostname=a.hostname,e.machine_ip=a.ip_address)}de.value.unshift(e),ca("Chamado criado com sucesso")}He(),We()}catch(e){ma("Erro ao salvar chamado")}finally{_e.value=!1}},Ze=e=>{ye.value=e,be.value=!0},ea=e=>{va(`Funcionalidade de atribuição para chamado #${e.id} em desenvolvimento`)},aa=e=>{const a=de.value.findIndex(a=>a.id===e.id);-1!==a&&(de.value[a].status="resolved",de.value[a].updated_at=(new Date).toISOString(),He(),ca(`Chamado #${e.id} marcado como resolvido`))},ta=e=>{switch(e){case"open":return"warning";case"in_progress":return"primary";case"waiting":return"info";case"resolved":return"success";default:return"surface-variant"}},la=e=>{switch(e){case"open":return"mdi-clock-outline";case"in_progress":return"mdi-progress-clock";case"waiting":return"mdi-pause-circle";case"resolved":return"mdi-check-circle";case"closed":return"mdi-close-circle";default:return"mdi-help-circle"}},ia=e=>{switch(e){case"open":return"Aberto";case"in_progress":return"Em Andamento";case"waiting":return"Aguardando";case"resolved":return"Resolvido";case"closed":return"Fechado";default:return e}},sa=e=>{switch(e){case"low":return"success";case"medium":return"warning";case"high":return"error";case"critical":return"purple";default:return"surface-variant"}},oa=e=>{switch(e){case"low":default:return"mdi-flag-outline";case"medium":case"high":return"mdi-flag";case"critical":return"mdi-flag-variant"}},ra=e=>{switch(e){case"hardware":return"blue";case"software":return"green";case"network":return"orange";case"performance":return"red";case"security":return"purple";case"backup":return"teal";default:return"grey"}},da=e=>{switch(e){case"hardware":return"mdi-memory";case"software":return"mdi-application";case"network":return"mdi-network";case"performance":return"mdi-speedometer";case"security":return"mdi-shield";case"backup":return"mdi-backup-restore";default:return"mdi-tag"}},na=e=>e?new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ua=e=>{if(!e)return"N/A";const a=new Date(e),t=new Date-a,l=Math.floor(t/6e4),i=Math.floor(l/60),s=Math.floor(i/24);return l<1?"Agora":l<60?`${l}min atrás`:i<24?`${i}h atrás`:s<7?`${s}d atrás`:`${s} dias atrás`},ca=e=>{Se.value=e,xe.value="success",Ve.value=!0},ma=e=>{Se.value=e,xe.value="error",Ve.value=!0},va=e=>{Se.value=e,xe.value="info",Ve.value=!0};return t(()=>{je(),qe()}),(e,a)=>{const t=l("v-icon"),p=l("v-btn"),h=l("v-card-text"),f=l("v-card"),_=l("v-col"),ue=l("v-row"),je=l("v-text-field"),qe=l("v-select"),Le=l("v-chip"),Ne=l("v-card-title"),Ke=l("v-avatar"),Be=l("v-data-table"),Xe=l("v-textarea"),ca=l("v-form"),ma=l("v-spacer"),va=l("v-card-actions"),pa=l("v-dialog"),ha=l("v-snackbar");return s(),i("div",g,[o("div",b,[o("div",y,[o("div",k,[o("h3",w,[r(t,{icon:"mdi-ticket-confirmation",class:"mr-2"}),a[22]||(a[22]=d(" Sistema de Chamados ",-1))]),o("p",C,n(de.value.length)+" "+n(1===de.value.length?"chamado registrado":"chamados registrados"),1)]),o("div",V,[r(p,{variant:"flat",color:"primary",size:"small",onClick:Ge,class:"mr-2"},{default:u(()=>[r(t,{icon:"mdi-plus",class:"mr-1"}),a[23]||(a[23]=d(" Novo Chamado ",-1))]),_:1}),r(p,{variant:"outlined",size:"small",onClick:$e,loading:fe.value,class:"mr-2"},{default:u(()=>[r(t,{icon:"mdi-refresh",class:"mr-1"}),a[24]||(a[24]=d(" Atualizar ",-1))]),_:1},8,["loading"]),r(p,{variant:"outlined",size:"small",onClick:Fe,disabled:0===de.value.length},{default:u(()=>[r(t,{icon:"mdi-download",class:"mr-1"}),a[25]||(a[25]=d(" Exportar ",-1))]),_:1},8,["disabled"])])])]),o("div",S,[r(ue,{dense:""},{default:u(()=>[r(_,{cols:"12",sm:"6",md:"3"},{default:u(()=>[r(f,{variant:"tonal",color:"info"},{default:u(()=>[r(h,{class:"text-center"},{default:u(()=>[r(t,{icon:"mdi-ticket-outline",size:"large",class:"mb-2"}),o("div",x,n(Ee.value),1),a[26]||(a[26]=o("div",{class:"stat-label"},"Total de Chamados",-1))]),_:1})]),_:1})]),_:1}),r(_,{cols:"12",sm:"6",md:"3"},{default:u(()=>[r(f,{variant:"tonal",color:"warning"},{default:u(()=>[r(h,{class:"text-center"},{default:u(()=>[r(t,{icon:"mdi-clock-outline",size:"large",class:"mb-2"}),o("div",D,n(Re.value),1),a[27]||(a[27]=o("div",{class:"stat-label"},"Abertos",-1))]),_:1})]),_:1})]),_:1}),r(_,{cols:"12",sm:"6",md:"3"},{default:u(()=>[r(f,{variant:"tonal",color:"primary"},{default:u(()=>[r(h,{class:"text-center"},{default:u(()=>[r(t,{icon:"mdi-progress-clock",size:"large",class:"mb-2"}),o("div",A,n(Ue.value),1),a[28]||(a[28]=o("div",{class:"stat-label"},"Em Andamento",-1))]),_:1})]),_:1})]),_:1}),r(_,{cols:"12",sm:"6",md:"3"},{default:u(()=>[r(f,{variant:"tonal",color:"success"},{default:u(()=>[r(h,{class:"text-center"},{default:u(()=>[r(t,{icon:"mdi-check-circle",size:"large",class:"mb-2"}),o("div",z,n(Ie.value),1),a[29]||(a[29]=o("div",{class:"stat-label"},"Resolvidos",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),o("div",O,[r(f,null,{default:u(()=>[r(h,null,{default:u(()=>[r(ue,{align:"center"},{default:u(()=>[r(_,{cols:"12",md:"3"},{default:u(()=>[r(je,{modelValue:ce.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ce.value=e),label:"Buscar chamados",variant:"outlined",density:"compact",clearable:"",onInput:He},{"prepend-inner":u(()=>[r(t,{icon:"mdi-magnify"})]),_:1},8,["modelValue"])]),_:1}),r(_,{cols:"12",md:"2"},{default:u(()=>[r(qe,{modelValue:me.value,"onUpdate:modelValue":[a[1]||(a[1]=e=>me.value=e),He],items:Ae,label:"Status",variant:"outlined",density:"compact",clearable:""},{"prepend-inner":u(()=>[r(t,{icon:"mdi-filter"})]),_:1},8,["modelValue"])]),_:1}),r(_,{cols:"12",md:"2"},{default:u(()=>[r(qe,{modelValue:ve.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>ve.value=e),He],items:ze,label:"Prioridade",variant:"outlined",density:"compact",clearable:""},{"prepend-inner":u(()=>[r(t,{icon:"mdi-flag"})]),_:1},8,["modelValue"])]),_:1}),r(_,{cols:"12",md:"2"},{default:u(()=>[r(qe,{modelValue:pe.value,"onUpdate:modelValue":[a[3]||(a[3]=e=>pe.value=e),He],items:Oe,label:"Categoria",variant:"outlined",density:"compact",clearable:""},{"prepend-inner":u(()=>[r(t,{icon:"mdi-tag"})]),_:1},8,["modelValue"])]),_:1}),r(_,{cols:"12",md:"2"},{default:u(()=>[r(qe,{modelValue:he.value,"onUpdate:modelValue":[a[4]||(a[4]=e=>he.value=e),He],items:Pe,label:"Responsável",variant:"outlined",density:"compact",clearable:""},{"prepend-inner":u(()=>[r(t,{icon:"mdi-account"})]),_:1},8,["modelValue"])]),_:1}),r(_,{cols:"12",md:"1"},{default:u(()=>[r(p,{variant:"outlined",block:"",onClick:Je,disabled:!Te.value},{default:u(()=>[r(t,{icon:"mdi-filter-remove"})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),o("div",P,[r(f,null,{default:u(()=>[r(Ne,null,{default:u(()=>[o("div",E,[a[30]||(a[30]=o("span",null,"Lista de Chamados",-1)),r(Le,{color:"primary",size:"small",variant:"flat"},{default:u(()=>[d(n(ne.value.length)+" "+n(1===ne.value.length?"chamado":"chamados"),1)]),_:1})])]),_:1}),0===ne.value.length?(s(),c(h,{key:0,class:"text-center py-8"},{default:u(()=>[r(t,{icon:"mdi-ticket-outline",size:"64",color:"surface-variant",class:"mb-4"}),a[31]||(a[31]=o("h4",{class:"text-h6 mb-2"},"Nenhum chamado encontrado",-1)),o("p",R,n(0===de.value.length?"Crie um novo chamado para começar.":"Ajuste os filtros para encontrar chamados específicos."),1)]),_:1})):(s(),i("div",U,[r(Be,{headers:De,items:ne.value,loading:fe.value,"item-value":"id",class:"ticketing-table","onClick:row":Ze},{"item.id":u(({item:e})=>[o("div",I," #"+n(String(e.id).padStart(4,"0")),1)]),"item.priority":u(({item:e})=>[r(Le,{color:sa(e.priority),size:"small",variant:"flat"},{default:u(()=>[r(t,{icon:oa(e.priority),size:"small",class:"mr-1"},null,8,["icon"]),d(" "+n(e.priority),1)]),_:2},1032,["color"])]),"item.status":u(({item:e})=>[r(Le,{color:ta(e.status),size:"small",variant:"flat"},{default:u(()=>[r(t,{icon:la(e.status),size:"small",class:"mr-1"},null,8,["icon"]),d(" "+n(ia(e.status)),1)]),_:2},1032,["color"])]),"item.machine":u(({item:e})=>[o("div",T,[o("div",M,n(e.machine_hostname),1),o("div",j,n(e.machine_ip),1)])]),"item.category":u(({item:e})=>[r(Le,{size:"small",variant:"outlined",color:ra(e.category)},{default:u(()=>[r(t,{icon:da(e.category),size:"small",class:"mr-1"},null,8,["icon"]),d(" "+n(e.category),1)]),_:2},1032,["color"])]),"item.assignee":u(({item:e})=>[e.assignee?(s(),i("div",q,[r(Ke,{size:"24",class:"mr-2"},{default:u(()=>[r(t,{icon:"mdi-account"})]),_:1}),d(" "+n(e.assignee),1)])):(s(),i("span",L,"Não atribuído"))]),"item.created_at":u(({item:e})=>[o("div",N,[o("div",$,n(na(e.created_at)),1),o("div",F,n(ua(e.created_at)),1)])]),"item.actions":u(({item:e})=>[o("div",K,[r(p,{icon:"mdi-eye",size:"small",variant:"text",onClick:m(a=>Ze(e),["stop"]),class:"mr-1"},null,8,["onClick"]),r(p,{icon:"mdi-pencil",size:"small",variant:"text",color:"primary",onClick:m(a=>Qe(e),["stop"]),class:"mr-1"},null,8,["onClick"]),r(p,{icon:"mdi-account-plus",size:"small",variant:"text",color:"info",onClick:m(a=>ea(e),["stop"]),disabled:"resolved"===e.status,class:"mr-1"},null,8,["onClick","disabled"]),r(p,{icon:"mdi-check",size:"small",variant:"text",color:"success",onClick:m(a=>aa(e),["stop"]),disabled:"resolved"===e.status},null,8,["onClick","disabled"])])]),_:1},8,["items","loading"])]))]),_:1})]),r(pa,{modelValue:ge.value,"onUpdate:modelValue":a[14]||(a[14]=e=>ge.value=e),"max-width":"800"},{default:u(()=>[r(f,null,{default:u(()=>[r(Ne,{class:"d-flex align-center"},{default:u(()=>[r(t,{icon:"mdi-ticket-plus",class:"mr-3"}),d(" "+n(ke.value?"Editar Chamado":"Novo Chamado"),1)]),_:1}),r(h,null,{default:u(()=>[r(ca,{ref_key:"ticketForm",ref:Ce,modelValue:we.value,"onUpdate:modelValue":a[13]||(a[13]=e=>we.value=e)},{default:u(()=>[r(ue,null,{default:u(()=>[r(_,{cols:"12",md:"6"},{default:u(()=>[r(je,{modelValue:Ce.value.title,"onUpdate:modelValue":a[5]||(a[5]=e=>Ce.value.title=e),label:"Título do Chamado",variant:"outlined",rules:[e=>!!e||"Título é obrigatório"],required:""},null,8,["modelValue","rules"])]),_:1}),r(_,{cols:"12",md:"6"},{default:u(()=>[r(qe,{modelValue:Ce.value.priority,"onUpdate:modelValue":a[6]||(a[6]=e=>Ce.value.priority=e),items:ze,label:"Prioridade",variant:"outlined",rules:[e=>!!e||"Prioridade é obrigatória"],required:""},null,8,["modelValue","rules"])]),_:1}),r(_,{cols:"12",md:"6"},{default:u(()=>[r(qe,{modelValue:Ce.value.category,"onUpdate:modelValue":a[7]||(a[7]=e=>Ce.value.category=e),items:Oe,label:"Categoria",variant:"outlined",rules:[e=>!!e||"Categoria é obrigatória"],required:""},null,8,["modelValue","rules"])]),_:1}),r(_,{cols:"12",md:"6"},{default:u(()=>[r(qe,{modelValue:Ce.value.machine_id,"onUpdate:modelValue":a[8]||(a[8]=e=>Ce.value.machine_id=e),items:Me.value,label:"Máquina Relacionada",variant:"outlined",clearable:""},null,8,["modelValue","items"])]),_:1}),r(_,{cols:"12",md:"6"},{default:u(()=>[r(qe,{modelValue:Ce.value.assignee,"onUpdate:modelValue":a[9]||(a[9]=e=>Ce.value.assignee=e),items:Pe,label:"Responsável",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1}),r(_,{cols:"12",md:"6"},{default:u(()=>[r(qe,{modelValue:Ce.value.status,"onUpdate:modelValue":a[10]||(a[10]=e=>Ce.value.status=e),items:Ae,label:"Status",variant:"outlined",rules:[e=>!!e||"Status é obrigatório"],required:""},null,8,["modelValue","rules"])]),_:1}),r(_,{cols:"12"},{default:u(()=>[r(Xe,{modelValue:Ce.value.description,"onUpdate:modelValue":a[11]||(a[11]=e=>Ce.value.description=e),label:"Descrição do Problema",variant:"outlined",rows:"4",rules:[e=>!!e||"Descrição é obrigatória"],required:""},null,8,["modelValue","rules"])]),_:1}),ke.value?(s(),c(_,{key:0,cols:"12"},{default:u(()=>[r(Xe,{modelValue:Ce.value.resolution,"onUpdate:modelValue":a[12]||(a[12]=e=>Ce.value.resolution=e),label:"Resolução (opcional)",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1})):v("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(va,null,{default:u(()=>[r(ma),r(p,{variant:"text",onClick:We},{default:u(()=>[...a[32]||(a[32]=[d(" Cancelar ",-1)])]),_:1}),r(p,{color:"primary",variant:"flat",onClick:Ye,disabled:!we.value,loading:_e.value},{default:u(()=>[d(n(ke.value?"Atualizar":"Criar")+" Chamado ",1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(pa,{modelValue:be.value,"onUpdate:modelValue":a[19]||(a[19]=e=>be.value=e),"max-width":"900"},{default:u(()=>[ye.value?(s(),c(f,{key:0},{default:u(()=>[r(Ne,{class:"d-flex align-center"},{default:u(()=>[r(t,{icon:"mdi-ticket-confirmation",class:"mr-3"}),d(" Chamado #"+n(String(ye.value.id).padStart(4,"0"))+" ",1),r(ma),r(Le,{color:ta(ye.value.status),size:"small",variant:"flat"},{default:u(()=>[d(n(ia(ye.value.status)),1)]),_:1},8,["color"])]),_:1}),r(h,null,{default:u(()=>[r(ue,null,{default:u(()=>[r(_,{cols:"12",md:"8"},{default:u(()=>[o("h4",B,n(ye.value.title),1),o("p",H,n(ye.value.description),1),ye.value.resolution?(s(),i("div",J,[a[33]||(a[33]=o("h4",{class:"text-subtitle-1 mb-2"},"Resolução",-1)),o("p",G,n(ye.value.resolution),1)])):v("",!0)]),_:1}),r(_,{cols:"12",md:"4"},{default:u(()=>[o("div",Q,[o("div",W,[a[34]||(a[34]=o("span",{class:"metadata-label"},"Prioridade:",-1)),r(Le,{color:sa(ye.value.priority),size:"small",variant:"flat",class:"ml-2"},{default:u(()=>[d(n(ye.value.priority),1)]),_:1},8,["color"])]),o("div",X,[a[35]||(a[35]=o("span",{class:"metadata-label"},"Categoria:",-1)),r(Le,{size:"small",variant:"outlined",color:ra(ye.value.category),class:"ml-2"},{default:u(()=>[d(n(ye.value.category),1)]),_:1},8,["color"])]),ye.value.machine_hostname?(s(),i("div",Y,[a[36]||(a[36]=o("span",{class:"metadata-label"},"Máquina:",-1)),o("div",Z,[o("div",ee,n(ye.value.machine_hostname),1),o("div",ae,n(ye.value.machine_ip),1)])])):v("",!0),o("div",te,[a[37]||(a[37]=o("span",{class:"metadata-label"},"Responsável:",-1)),o("span",le,n(ye.value.assignee||"Não atribuído"),1)]),o("div",ie,[a[38]||(a[38]=o("span",{class:"metadata-label"},"Criado em:",-1)),o("span",se,n(na(ye.value.created_at)),1)]),ye.value.updated_at?(s(),i("div",oe,[a[39]||(a[39]=o("span",{class:"metadata-label"},"Atualizado em:",-1)),o("span",re,n(na(ye.value.updated_at)),1)])):v("",!0)])]),_:1})]),_:1})]),_:1}),r(va,null,{default:u(()=>[r(p,{variant:"outlined",onClick:a[15]||(a[15]=e=>Qe(ye.value))},{default:u(()=>[r(t,{icon:"mdi-pencil",class:"mr-1"}),a[40]||(a[40]=d(" Editar ",-1))]),_:1}),r(p,{variant:"outlined",color:"info",onClick:a[16]||(a[16]=e=>ea(ye.value)),disabled:"resolved"===ye.value.status},{default:u(()=>[r(t,{icon:"mdi-account-plus",class:"mr-1"}),a[41]||(a[41]=d(" Atribuir ",-1))]),_:1},8,["disabled"]),r(p,{variant:"outlined",color:"success",onClick:a[17]||(a[17]=e=>aa(ye.value)),disabled:"resolved"===ye.value.status},{default:u(()=>[r(t,{icon:"mdi-check",class:"mr-1"}),a[42]||(a[42]=d(" Resolver ",-1))]),_:1},8,["disabled"]),r(ma),r(p,{variant:"text",onClick:a[18]||(a[18]=e=>be.value=!1)},{default:u(()=>[...a[43]||(a[43]=[d(" Fechar ",-1)])]),_:1})]),_:1})]),_:1})):v("",!0)]),_:1},8,["modelValue"]),r(ha,{modelValue:Ve.value,"onUpdate:modelValue":a[21]||(a[21]=e=>Ve.value=e),color:xe.value,timeout:3e3,location:"top right"},{actions:u(()=>[r(p,{variant:"text",onClick:a[20]||(a[20]=e=>Ve.value=!1)},{default:u(()=>[...a[44]||(a[44]=[d(" Fechar ",-1)])]),_:1})]),default:u(()=>[d(n(Se.value)+" ",1)]),_:1},8,["modelValue","color"])])}}},[["__scopeId","data-v-ce2cbe6a"]]);export{de as default};
//# sourceMappingURL=TicketingSystem-XyvVGsNr.js.map
