import{r as e,c as a,o as l,e as t,f as o,x as s,D as n,B as i,m as u,K as d,an as r,a9 as v,ao as c,F as m,C as p,y as b,u as f,k as D}from"./vue-vendor-BY5hdAT7.js";import{_ as g,l as y}from"./index-Dur0lEaU.js";import{u as h}from"./employeeLoans-BCft1fZR.js";import"./utils-vendor-COuxBHZ0.js";const C={class:"employee-loans"},k={class:"page-header"},E={class:"page-actions"},A={class:"stats-grid"},x={class:"stat-card"},P={class:"stat-content"},R={class:"stat-value"},V={class:"stat-card"},T={class:"stat-content"},w={class:"stat-value"},I={class:"stat-card"},N={class:"stat-content"},S={class:"stat-value"},U={class:"stat-card"},L={class:"stat-content"},M={class:"stat-value"},B={class:"filters-section"},O={class:"filters-row"},j={class:"filter-group"},q={class:"search-input"},F={class:"filter-group"},_={class:"filter-group"},H={class:"filter-group"},J={class:"table-container"},G={class:"loans-table"},K=["value"],W={class:"loan-code"},$={class:"employee-info"},z={class:"employee-name"},Q={class:"employee-email"},X={class:"department-badge"},Y={class:"asset-info"},Z={class:"asset-name"},ee={class:"asset-code"},ae={class:"action-buttons"},le=["onClick"],te=["onClick"],oe=["onClick"],se={class:"modal-body"},ne={class:"form-grid"},ie={class:"form-group"},ue=["value"],de={class:"form-group"},re=["value"],ve={class:"form-group"},ce={class:"form-group"},me={class:"form-group full-width"},pe={class:"modal-body"},be={class:"return-info"},fe={class:"form-group"},De={class:"form-group"},ge={class:"form-group"},ye={key:2,class:"success-message"},he={key:3,class:"error-message"},Ce=g({__name:"EmployeeLoans",setup(g){h();const Ce=e(!1),ke=e(!1),Ee=e(""),Ae=e(""),xe=e(""),Pe=e(""),Re=e(!1),Ve=e([]),Te=e(""),we=e(""),Ie=e([{id:1,code:"EMP001",employee:{id:1,name:"João Silva",email:"joao.silva@empresa.com",department:"TI"},asset:{id:1,name:"Notebook Dell Latitude 5520",code:"NB001"},loanDate:"2024-01-15",expectedReturnDate:"2024-02-15",returnDate:null,status:"Ativo",notes:"Empréstimo para trabalho remoto",condition:null,returnNotes:null},{id:2,code:"EMP002",employee:{id:2,name:"Maria Santos",email:"maria.santos@empresa.com",department:"Marketing"},asset:{id:2,name:"Câmera Canon EOS R6",code:"CAM001"},loanDate:"2024-01-10",expectedReturnDate:"2024-01-20",returnDate:"2024-01-18",status:"Devolvido",notes:"Para evento de marketing",condition:"Perfeito",returnNotes:"Devolvido em perfeitas condições"},{id:3,code:"EMP003",employee:{id:3,name:"Carlos Lima",email:"carlos.lima@empresa.com",department:"Vendas"},asset:{id:3,name:"Tablet iPad Pro",code:"TAB001"},loanDate:"2024-01-05",expectedReturnDate:"2024-01-12",returnDate:null,status:"Em Atraso",notes:"Para apresentações de vendas",condition:null,returnNotes:null}]),Ne=e([{id:1,name:"João Silva",email:"joao.silva@empresa.com",department:"TI"},{id:2,name:"Maria Santos",email:"maria.santos@empresa.com",department:"Marketing"},{id:3,name:"Carlos Lima",email:"carlos.lima@empresa.com",department:"Vendas"},{id:4,name:"Ana Costa",email:"ana.costa@empresa.com",department:"Administração"},{id:5,name:"Pedro Oliveira",email:"pedro.oliveira@empresa.com",department:"RH"}]),Se=e([{id:1,name:"Notebook Dell Latitude 5520",code:"NB001"},{id:2,name:"Câmera Canon EOS R6",code:"CAM001"},{id:3,name:"Tablet iPad Pro",code:"TAB001"},{id:4,name:"Projetor Epson PowerLite",code:"PROJ001"},{id:5,name:"Monitor LG UltraWide",code:"MON001"}]),Ue=e({employeeId:"",assetId:"",loanDate:"",expectedReturnDate:"",notes:""}),Le=e({returnDate:"",condition:"Perfeito",returnNotes:""}),Me=e(null),Be=a(()=>{let e=Ie.value;if(Ee.value){const a=Ee.value.toLowerCase();e=e.filter(e=>e.employee.name.toLowerCase().includes(a)||e.asset.name.toLowerCase().includes(a)||e.code.toLowerCase().includes(a))}return Ae.value&&(e=e.filter(e=>e.status===Ae.value)),xe.value&&(e=e.filter(e=>e.employee.department===xe.value)),e}),Oe=a(()=>Ie.value.filter(e=>"Ativo"===e.status).length),je=a(()=>Ie.value.filter(e=>"Em Atraso"===e.status).length),qe=a(()=>Ie.value.filter(e=>"Devolvido"===e.status).length),Fe=()=>{},_e=()=>{Ee.value="",Ae.value="",xe.value="",Pe.value=""},He=()=>{Re.value?Ve.value=Be.value.map(e=>e.id):Ve.value=[]},Je=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("pt-BR")},Ge=()=>{try{const e=Ne.value.find(e=>e.id==Ue.value.employeeId),a=Se.value.find(e=>e.id==Ue.value.assetId),l={id:Date.now(),code:`EMP${String(Ie.value.length+1).padStart(3,"0")}`,employee:e,asset:a,loanDate:Ue.value.loanDate,expectedReturnDate:Ue.value.expectedReturnDate,returnDate:null,status:"Ativo",notes:Ue.value.notes,condition:null,returnNotes:null};Ie.value.push(l),Te.value="Empréstimo criado com sucesso!",We(),setTimeout(()=>Te.value="",3e3)}catch(e){we.value="Erro ao criar empréstimo: "+e.message,setTimeout(()=>we.value="",5e3)}},Ke=()=>{try{const e=Ie.value.find(e=>e.id===Me.value.id);e&&(e.returnDate=Le.value.returnDate,e.status="Devolvido",e.condition=Le.value.condition,e.returnNotes=Le.value.returnNotes),Te.value="Devolução registrada com sucesso!",$e(),setTimeout(()=>Te.value="",3e3)}catch(e){we.value="Erro ao registrar devolução: "+e.message,setTimeout(()=>we.value="",5e3)}},We=()=>{Ce.value=!1,Ue.value={employeeId:"",assetId:"",loanDate:"",expectedReturnDate:"",notes:""}},$e=()=>{ke.value=!1,Me.value=null,Le.value={returnDate:"",condition:"Perfeito",returnNotes:""}},ze=()=>{y.debug("Exportando empréstimos..."),Te.value="Exportação iniciada!",setTimeout(()=>Te.value="",3e3)};return l(()=>{}),(e,a)=>{var l,g,h,Qe,Xe,Ye,Ze,ea;return D(),t("div",C,[o("div",k,[a[19]||(a[19]=o("div",{class:"page-header-content"},[o("h1",{class:"page-title"},"Empréstimos para Funcionários"),o("p",{class:"page-subtitle"},"Gestão de empréstimos de ativos para colaboradores internos")],-1)),o("div",E,[o("button",{class:"btn btn-secondary",onClick:ze},[...a[17]||(a[17]=[o("i",{class:"fas fa-download"},null,-1),n(" Exportar ",-1)])]),o("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=e=>Ce.value=!0)},[...a[18]||(a[18]=[o("i",{class:"fas fa-plus"},null,-1),n(" Novo Empréstimo ",-1)])])])]),o("div",A,[o("div",x,[a[21]||(a[21]=o("div",{class:"stat-icon primary"},[o("i",{class:"fas fa-handshake"})],-1)),o("div",P,[a[20]||(a[20]=o("div",{class:"stat-label"},"Total de Empréstimos",-1)),o("div",R,i(Ie.value.length),1)])]),o("div",V,[a[23]||(a[23]=o("div",{class:"stat-icon warning"},[o("i",{class:"fas fa-clock"})],-1)),o("div",T,[a[22]||(a[22]=o("div",{class:"stat-label"},"Empréstimos Ativos",-1)),o("div",w,i(Oe.value),1)])]),o("div",I,[a[25]||(a[25]=o("div",{class:"stat-icon danger"},[o("i",{class:"fas fa-exclamation-triangle"})],-1)),o("div",N,[a[24]||(a[24]=o("div",{class:"stat-label"},"Em Atraso",-1)),o("div",S,i(je.value),1)])]),o("div",U,[a[27]||(a[27]=o("div",{class:"stat-icon success"},[o("i",{class:"fas fa-check-circle"})],-1)),o("div",L,[a[26]||(a[26]=o("div",{class:"stat-label"},"Devolvidos",-1)),o("div",M,i(qe.value),1)])])]),o("div",B,[o("div",O,[o("div",j,[a[29]||(a[29]=o("label",null,"Buscar",-1)),o("div",q,[a[28]||(a[28]=o("i",{class:"fas fa-search"},null,-1)),u(o("input",{type:"text",placeholder:"Buscar por funcionário, ativo ou código...","onUpdate:modelValue":a[1]||(a[1]=e=>Ee.value=e),onInput:Fe},null,544),[[d,Ee.value]])])]),o("div",F,[a[31]||(a[31]=o("label",null,"Status",-1)),u(o("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>Ae.value=e),onChange:Fe},[...a[30]||(a[30]=[v('<option value="" data-v-0e832755>Todos os status</option><option value="Ativo" data-v-0e832755>Ativo</option><option value="Devolvido" data-v-0e832755>Devolvido</option><option value="Em Atraso" data-v-0e832755>Em Atraso</option><option value="Cancelado" data-v-0e832755>Cancelado</option>',5)])],544),[[r,Ae.value]])]),o("div",_,[a[33]||(a[33]=o("label",null,"Departamento",-1)),u(o("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>xe.value=e),onChange:Fe},[...a[32]||(a[32]=[v('<option value="" data-v-0e832755>Todos os departamentos</option><option value="TI" data-v-0e832755>TI</option><option value="Administração" data-v-0e832755>Administração</option><option value="Vendas" data-v-0e832755>Vendas</option><option value="Marketing" data-v-0e832755>Marketing</option><option value="RH" data-v-0e832755>RH</option>',6)])],544),[[r,xe.value]])]),o("div",H,[a[35]||(a[35]=o("label",null,"Período",-1)),u(o("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>Pe.value=e),onChange:Fe},[...a[34]||(a[34]=[v('<option value="" data-v-0e832755>Todos os períodos</option><option value="today" data-v-0e832755>Hoje</option><option value="week" data-v-0e832755>Esta semana</option><option value="month" data-v-0e832755>Este mês</option><option value="quarter" data-v-0e832755>Este trimestre</option>',5)])],544),[[r,Pe.value]])]),o("button",{class:"btn btn-outline",onClick:_e},[...a[36]||(a[36]=[o("i",{class:"fas fa-times"},null,-1),n(" Limpar ",-1)])])])]),o("div",J,[o("table",G,[o("thead",null,[o("tr",null,[o("th",null,[u(o("input",{type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=e=>Re.value=e),onChange:He},null,544),[[c,Re.value]])]),a[37]||(a[37]=o("th",null,"Código",-1)),a[38]||(a[38]=o("th",null,"Funcionário",-1)),a[39]||(a[39]=o("th",null,"Departamento",-1)),a[40]||(a[40]=o("th",null,"Ativo",-1)),a[41]||(a[41]=o("th",null,"Data Empréstimo",-1)),a[42]||(a[42]=o("th",null,"Data Prevista",-1)),a[43]||(a[43]=o("th",null,"Data Devolução",-1)),a[44]||(a[44]=o("th",null,"Status",-1)),a[45]||(a[45]=o("th",null,"Ações",-1))])]),o("tbody",null,[(D(!0),t(m,null,p(Be.value,e=>{return D(),t("tr",{key:e.id,class:"loan-row"},[o("td",null,[u(o("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=e=>Ve.value=e),value:e.id},null,8,K),[[c,Ve.value]])]),o("td",null,[o("span",W,i(e.code),1)]),o("td",null,[o("div",$,[a[46]||(a[46]=o("div",{class:"employee-avatar"},[o("i",{class:"fas fa-user"})],-1)),o("div",null,[o("div",z,i(e.employee.name),1),o("div",Q,i(e.employee.email),1)])])]),o("td",null,[o("span",X,i(e.employee.department),1)]),o("td",null,[o("div",Y,[o("div",Z,i(e.asset.name),1),o("div",ee,i(e.asset.code),1)])]),o("td",null,i(Je(e.loanDate)),1),o("td",null,i(Je(e.expectedReturnDate)),1),o("td",null,i(e.returnDate?Je(e.returnDate):"-"),1),o("td",null,[o("span",{class:b(["badge",(l=e.status,{Ativo:"badge-warning",Devolvido:"badge-success","Em Atraso":"badge-danger",Cancelado:"badge-secondary"}[l]||"badge-secondary")])},i(e.status),3)]),o("td",null,[o("div",ae,["Ativo"===e.status?(D(),t("button",{key:0,class:"btn btn-sm btn-success",onClick:a=>(e=>{Me.value=e,Le.value.returnDate=(new Date).toISOString().split("T")[0],ke.value=!0})(e),title:"Registrar Devolução"},[...a[47]||(a[47]=[o("i",{class:"fas fa-undo"},null,-1)])],8,le)):s("",!0),o("button",{class:"btn btn-sm btn-secondary",onClick:a=>(e=>{y.debug("Editar empréstimo:",e)})(e),title:"Editar"},[...a[48]||(a[48]=[o("i",{class:"fas fa-edit"},null,-1)])],8,te),o("button",{class:"btn btn-sm btn-info",onClick:a=>(e=>{y.debug("Ver detalhes do empréstimo:",e)})(e),title:"Ver Detalhes"},[...a[49]||(a[49]=[o("i",{class:"fas fa-eye"},null,-1)])],8,oe)])])]);var l}),128))])])]),Ce.value?(D(),t("div",{key:0,class:"modal-overlay",onClick:We},[o("div",{class:"modal-content large-modal",onClick:a[12]||(a[12]=f(()=>{},["stop"]))},[o("div",{class:"modal-header"},[a[51]||(a[51]=o("h2",null,"Novo Empréstimo",-1)),o("button",{class:"close-btn",onClick:We},[...a[50]||(a[50]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("div",se,[o("form",{onSubmit:f(Ge,["prevent"])},[o("div",ne,[o("div",ie,[a[53]||(a[53]=o("label",null,"Funcionário *",-1)),u(o("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>Ue.value.employeeId=e),required:""},[a[52]||(a[52]=o("option",{value:""},"Selecione o funcionário",-1)),(D(!0),t(m,null,p(Ne.value,e=>(D(),t("option",{key:e.id,value:e.id},i(e.name)+" - "+i(e.department),9,ue))),128))],512),[[r,Ue.value.employeeId]])]),o("div",de,[a[55]||(a[55]=o("label",null,"Ativo *",-1)),u(o("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>Ue.value.assetId=e),required:""},[a[54]||(a[54]=o("option",{value:""},"Selecione o ativo",-1)),(D(!0),t(m,null,p(Se.value,e=>(D(),t("option",{key:e.id,value:e.id},i(e.name)+" ("+i(e.code)+") ",9,re))),128))],512),[[r,Ue.value.assetId]])]),o("div",ve,[a[56]||(a[56]=o("label",null,"Data do Empréstimo *",-1)),u(o("input",{type:"date","onUpdate:modelValue":a[9]||(a[9]=e=>Ue.value.loanDate=e),required:""},null,512),[[d,Ue.value.loanDate]])]),o("div",ce,[a[57]||(a[57]=o("label",null,"Data Prevista de Devolução *",-1)),u(o("input",{type:"date","onUpdate:modelValue":a[10]||(a[10]=e=>Ue.value.expectedReturnDate=e),required:""},null,512),[[d,Ue.value.expectedReturnDate]])])]),o("div",me,[a[58]||(a[58]=o("label",null,"Observações",-1)),u(o("textarea",{"onUpdate:modelValue":a[11]||(a[11]=e=>Ue.value.notes=e),rows:"3",placeholder:"Observações sobre o empréstimo..."},null,512),[[d,Ue.value.notes]])])],32)]),o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-secondary",onClick:We}," Cancelar "),o("button",{type:"button",class:"btn btn-primary",onClick:Ge},[...a[59]||(a[59]=[o("i",{class:"fas fa-save"},null,-1),n(" Criar Empréstimo ",-1)])])])])])):s("",!0),ke.value?(D(),t("div",{key:1,class:"modal-overlay",onClick:$e},[o("div",{class:"modal-content",onClick:a[16]||(a[16]=f(()=>{},["stop"]))},[o("div",{class:"modal-header"},[a[61]||(a[61]=o("h2",null,"Registrar Devolução",-1)),o("button",{class:"close-btn",onClick:$e},[...a[60]||(a[60]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("div",pe,[o("div",be,[o("h3",null,i(null==(g=null==(l=Me.value)?void 0:l.employee)?void 0:g.name),1),o("p",null,i(null==(Qe=null==(h=Me.value)?void 0:h.asset)?void 0:Qe.name)+" ("+i(null==(Ye=null==(Xe=Me.value)?void 0:Xe.asset)?void 0:Ye.code)+")",1),o("p",null,"Emprestado em: "+i(Je(null==(Ze=Me.value)?void 0:Ze.loanDate)),1),o("p",null,"Previsão: "+i(Je(null==(ea=Me.value)?void 0:ea.expectedReturnDate)),1)]),o("form",{onSubmit:f(Ke,["prevent"])},[o("div",fe,[a[62]||(a[62]=o("label",null,"Data de Devolução *",-1)),u(o("input",{type:"date","onUpdate:modelValue":a[13]||(a[13]=e=>Le.value.returnDate=e),required:""},null,512),[[d,Le.value.returnDate]])]),o("div",De,[a[64]||(a[64]=o("label",null,"Condição do Ativo",-1)),u(o("select",{"onUpdate:modelValue":a[14]||(a[14]=e=>Le.value.condition=e)},[...a[63]||(a[63]=[o("option",{value:"Perfeito"},"Perfeito",-1),o("option",{value:"Bom"},"Bom",-1),o("option",{value:"Regular"},"Regular",-1),o("option",{value:"Danificado"},"Danificado",-1)])],512),[[r,Le.value.condition]])]),o("div",ge,[a[65]||(a[65]=o("label",null,"Observações da Devolução",-1)),u(o("textarea",{"onUpdate:modelValue":a[15]||(a[15]=e=>Le.value.returnNotes=e),rows:"3",placeholder:"Observações sobre a devolução..."},null,512),[[d,Le.value.returnNotes]])])],32)]),o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-secondary",onClick:$e}," Cancelar "),o("button",{type:"button",class:"btn btn-success",onClick:Ke},[...a[66]||(a[66]=[o("i",{class:"fas fa-check"},null,-1),n(" Confirmar Devolução ",-1)])])])])])):s("",!0),Te.value?(D(),t("div",ye,[a[67]||(a[67]=o("i",{class:"fas fa-check-circle"},null,-1)),n(" "+i(Te.value),1)])):s("",!0),we.value?(D(),t("div",he,[a[68]||(a[68]=o("i",{class:"fas fa-exclamation-triangle"},null,-1)),n(" "+i(we.value),1)])):s("",!0)])}}},[["__scopeId","data-v-0e832755"]]);export{Ce as default};
//# sourceMappingURL=EmployeeLoans-Ce8nbZQj.js.map
