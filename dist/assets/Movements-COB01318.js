import{r as e,c as a,o as t,e as l,f as s,x as n,D as o,B as i,m as u,K as d,an as r,a9 as v,F as c,C as p,y as m,u as f,k as b}from"./vue-vendor-BY5hdAT7.js";import{_ as g,u as y,l as h}from"./index-Dur0lEaU.js";import{f as C}from"./utils-vendor-COuxBHZ0.js";import{p as w}from"./pt-BR-DyUPfqrK.js";const D={class:"movements"},k={class:"page-header"},T={class:"page-actions"},M={class:"stats-grid"},V={class:"stat-card"},E={class:"stat-content"},A={class:"stat-value"},x={class:"stat-card"},I={class:"stat-content"},U={class:"stat-value"},S={class:"stat-card"},P={class:"stat-content"},L={class:"stat-value"},N={class:"stat-card"},q={class:"stat-content"},O={class:"stat-value"},H={class:"filters-section"},R={class:"filters-row"},j={class:"filter-group"},_={class:"search-input"},B={class:"filter-group"},F={class:"filter-group"},$={class:"filter-group"},Y={class:"table-container"},z={class:"table-header"},J={class:"table-info"},K={class:"results-count"},G={class:"table-wrapper"},Q={class:"table"},W={class:"movement-id"},X={class:"asset-info"},Z={class:"asset-name"},ee={class:"asset-code"},ae={class:"badge badge-secondary"},te={class:"user-info"},le={class:"user-name"},se={class:"user-email"},ne={class:"date-info"},oe={class:"date"},ie={class:"time"},ue={class:"action-buttons"},de=["onClick"],re=["onClick"],ve=["onClick"],ce=["onClick"],pe={class:"pagination-container"},me={class:"pagination-info"},fe={class:"pagination"},be=["disabled"],ge={class:"page-numbers"},ye=["onClick"],he=["disabled"],Ce={class:"modal-header"},we={class:"modal-body"},De={class:"form-group"},ke=["value"],Te={class:"form-row"},Me={class:"form-group"},Ve={class:"form-group"},Ee={class:"form-row"},Ae={class:"form-group"},xe={class:"form-group"},Ie={class:"form-group"},Ue={class:"form-group"},Se={class:"modal-actions"},Pe={class:"modal-header"},Le={class:"modal-body"},Ne={class:"form-group"},qe=["value"],Oe={class:"form-row"},He={class:"form-group"},Re={class:"form-group"},je={class:"form-row"},_e={class:"form-group"},Be={class:"form-group"},Fe={class:"form-group"},$e={class:"form-group"},Ye={class:"form-group"},ze=g({__name:"Movements",setup(g){const ze=y(),Je=e(""),Ke=e(""),Ge=e(""),Qe=e(""),We=e(1),Xe=e(10),Ze=e(!1),ea=e(!1),aa=e({id:"",assetId:"",type:"",origin:"",destination:"",responsibleName:"",date:"",status:"Pendente",notes:""}),ta=e([{id:1,asset:{id:1,name:"Notebook Dell Inspiron",code:"LVT-001"},type:"Transferência",origin:"TI - Sala 101",destination:"TI - Sala 102",responsible:{name:"João Silva",email:"joao@levitiis.com"},date:new Date("2024-01-15T10:30:00"),status:"Concluída",notes:"Transferência para novo colaborador"},{id:2,asset:{id:2,name:'Monitor Samsung 24"',code:"LVT-002"},type:"Empréstimo",origin:"Almoxarifado",destination:"Administração",responsible:{name:"Maria Santos",email:"maria@levitiis.com"},date:new Date("2024-01-14T14:15:00"),status:"Em Andamento",notes:"Empréstimo temporário para apresentação"},{id:3,asset:{id:3,name:"Impressora HP LaserJet",code:"LVT-003"},type:"Manutenção",origin:"TI - Sala 102",destination:"Oficina Externa",responsible:{name:"Carlos Oliveira",email:"carlos@levitiis.com"},date:new Date("2024-01-13T09:00:00"),status:"Pendente",notes:"Manutenção preventiva programada"},{id:4,asset:{id:4,name:"Teclado Mecânico",code:"LVT-004"},type:"Devolução",origin:"Home Office",destination:"TI - Sala 101",responsible:{name:"Ana Costa",email:"ana@levitiis.com"},date:new Date("2024-01-12T16:45:00"),status:"Concluída",notes:"Retorno do home office"},{id:5,asset:{id:5,name:"Cadeira Ergonômica",code:"LVT-005"},type:"Transferência",origin:"Administração",destination:"TI - Sala 103",responsible:{name:"Pedro Lima",email:"pedro@levitiis.com"},date:new Date("2024-01-11T11:20:00"),status:"Cancelada",notes:"Cancelada por mudança de planos"}]),la=e({assetId:"",type:"",origin:"",destination:"",responsibleName:"",date:"",notes:""}),sa=a(()=>{let e=ta.value;if(Je.value){const a=Je.value.toLowerCase();e=e.filter(e=>e.asset.name.toLowerCase().includes(a)||e.asset.code.toLowerCase().includes(a)||e.responsible.name.toLowerCase().includes(a)||e.notes.toLowerCase().includes(a))}if(Ke.value&&(e=e.filter(e=>e.type===Ke.value)),Ge.value&&(e=e.filter(e=>e.status===Ge.value)),Qe.value){const a=new Date,t=new Date(a.getFullYear(),a.getMonth(),a.getDate()),l=new Date(t.getTime()-24*t.getDay()*60*60*1e3),s=new Date(a.getFullYear(),a.getMonth(),1),n=new Date(a.getFullYear(),3*Math.floor(a.getMonth()/3),1);e=e.filter(e=>{const a=new Date(e.date);switch(Qe.value){case"today":return a>=t;case"week":return a>=l;case"month":return a>=s;case"quarter":return a>=n;default:return!0}})}return e}),na=a(()=>{const e=(We.value-1)*Xe.value,a=e+Xe.value;return sa.value.slice(e,a)}),oa=a(()=>Math.ceil(sa.value.length/Xe.value)),ia=a(()=>{const e=[],a=Math.max(1,We.value-2),t=Math.min(oa.value,We.value+2);for(let l=a;l<=t;l++)e.push(l);return e}),ua=a(()=>ta.value.filter(e=>"Pendente"===e.status).length),da=a(()=>ta.value.filter(e=>"Concluída"===e.status).length),ra=a(()=>{const e=new Date;return ta.value.filter(a=>"Pendente"===a.status&&new Date(a.date)<e).length}),va=a(()=>ze.assets.filter(e=>"Ativo"===e.status)),ca=()=>{We.value=1},pa=()=>{Je.value="",Ke.value="",Ge.value="",Qe.value="",We.value=1},ma=e=>C(new Date(e),"HH:mm",{locale:w}),fa=()=>{const e=ze.assets.find(e=>e.id==la.value.assetId),a={id:ta.value.length+1,asset:{id:e.id,name:e.name,code:e.code},type:la.value.type,origin:la.value.origin,destination:la.value.destination,responsible:{name:la.value.responsibleName,email:`${la.value.responsibleName.toLowerCase().replace(" ",".")}@levitiis.com`},date:new Date(la.value.date),status:"Pendente",notes:la.value.notes};ta.value.unshift(a),la.value={assetId:"",type:"",origin:"",destination:"",responsibleName:"",date:"",notes:""},Ze.value=!1},ba=()=>{ea.value=!1},ga=()=>{const e=ta.value.findIndex(e=>e.id===aa.value.id);if(-1!==e){const a=ze.assets.find(e=>e.id==aa.value.assetId);ta.value[e]={id:aa.value.id,asset:{id:a.id,name:a.name,code:a.code},type:aa.value.type,origin:aa.value.origin,destination:aa.value.destination,responsible:{name:aa.value.responsibleName,email:`${aa.value.responsibleName.toLowerCase().replace(" ",".")}@levitiis.com`},date:new Date(aa.value.date),status:aa.value.status,notes:aa.value.notes}}ea.value=!1},ya=()=>{h.debug("Export movements")},ha=()=>{h.debug("Refresh data")};return t(()=>{ze.fetchAssets()}),(e,a)=>(b(),l("div",D,[s("div",k,[a[29]||(a[29]=s("div",{class:"page-header-content"},[s("h1",{class:"page-title"},"Movimentações"),s("p",{class:"page-subtitle"},"Histórico e controle de movimentações de ativos")],-1)),s("div",T,[s("button",{class:"btn btn-secondary",onClick:ya},[...a[27]||(a[27]=[s("i",{class:"fas fa-download"},null,-1),o(" Exportar ",-1)])]),s("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=e=>Ze.value=!0)},[...a[28]||(a[28]=[s("i",{class:"fas fa-plus"},null,-1),o(" Nova Movimentação ",-1)])])])]),s("div",M,[s("div",V,[a[32]||(a[32]=s("div",{class:"stat-icon primary"},[s("i",{class:"fas fa-exchange-alt"})],-1)),s("div",E,[a[30]||(a[30]=s("div",{class:"stat-label"},"Total de Movimentações",-1)),s("div",A,i(ta.value.length),1),a[31]||(a[31]=s("div",{class:"stat-change positive"},[s("i",{class:"fas fa-arrow-up"}),o(" +15% este mês ")],-1))])]),s("div",x,[a[35]||(a[35]=s("div",{class:"stat-icon info"},[s("i",{class:"fas fa-clock"})],-1)),s("div",I,[a[33]||(a[33]=s("div",{class:"stat-label"},"Pendentes",-1)),s("div",U,i(ua.value),1),a[34]||(a[34]=s("div",{class:"stat-change neutral"},[s("i",{class:"fas fa-minus"}),o(" Sem alteração ")],-1))])]),s("div",S,[a[38]||(a[38]=s("div",{class:"stat-icon success"},[s("i",{class:"fas fa-check"})],-1)),s("div",P,[a[36]||(a[36]=s("div",{class:"stat-label"},"Concluídas",-1)),s("div",L,i(da.value),1),a[37]||(a[37]=s("div",{class:"stat-change positive"},[s("i",{class:"fas fa-arrow-up"}),o(" +8% este mês ")],-1))])]),s("div",N,[a[41]||(a[41]=s("div",{class:"stat-icon warning"},[s("i",{class:"fas fa-exclamation-triangle"})],-1)),s("div",q,[a[39]||(a[39]=s("div",{class:"stat-label"},"Atrasadas",-1)),s("div",O,i(ra.value),1),a[40]||(a[40]=s("div",{class:"stat-change negative"},[s("i",{class:"fas fa-arrow-down"}),o(" -5% este mês ")],-1))])])]),s("div",H,[s("div",R,[s("div",j,[a[43]||(a[43]=s("label",null,"Buscar",-1)),s("div",_,[a[42]||(a[42]=s("i",{class:"fas fa-search"},null,-1)),u(s("input",{type:"text",placeholder:"Buscar por ativo, responsável ou observações...","onUpdate:modelValue":a[1]||(a[1]=e=>Je.value=e),onInput:ca},null,544),[[d,Je.value]])])]),s("div",B,[a[45]||(a[45]=s("label",null,"Tipo",-1)),u(s("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>Ke.value=e),onChange:ca},[...a[44]||(a[44]=[v('<option value="" data-v-2450ef56>Todos os tipos</option><option value="Transferência" data-v-2450ef56>Transferência</option><option value="Empréstimo" data-v-2450ef56>Empréstimo</option><option value="Devolução" data-v-2450ef56>Devolução</option><option value="Manutenção" data-v-2450ef56>Manutenção</option><option value="Descarte" data-v-2450ef56>Descarte</option>',6)])],544),[[r,Ke.value]])]),s("div",F,[a[47]||(a[47]=s("label",null,"Status",-1)),u(s("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>Ge.value=e),onChange:ca},[...a[46]||(a[46]=[v('<option value="" data-v-2450ef56>Todos os status</option><option value="Pendente" data-v-2450ef56>Pendente</option><option value="Em Andamento" data-v-2450ef56>Em Andamento</option><option value="Concluída" data-v-2450ef56>Concluída</option><option value="Cancelada" data-v-2450ef56>Cancelada</option>',5)])],544),[[r,Ge.value]])]),s("div",$,[a[49]||(a[49]=s("label",null,"Período",-1)),u(s("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>Qe.value=e),onChange:ca},[...a[48]||(a[48]=[v('<option value="" data-v-2450ef56>Todos os períodos</option><option value="today" data-v-2450ef56>Hoje</option><option value="week" data-v-2450ef56>Esta semana</option><option value="month" data-v-2450ef56>Este mês</option><option value="quarter" data-v-2450ef56>Este trimestre</option>',5)])],544),[[r,Qe.value]])]),s("button",{class:"btn btn-outline",onClick:pa},[...a[50]||(a[50]=[s("i",{class:"fas fa-times"},null,-1),o(" Limpar ",-1)])])])]),s("div",Y,[s("div",z,[s("div",J,[s("span",K,i(sa.value.length)+" de "+i(ta.value.length)+" movimentações ",1)]),s("div",{class:"table-actions"},[s("button",{class:"btn btn-outline btn-sm",onClick:ha},[...a[51]||(a[51]=[s("i",{class:"fas fa-sync-alt"},null,-1),o(" Atualizar ",-1)])])])]),s("div",G,[s("table",Q,[a[56]||(a[56]=s("thead",null,[s("tr",null,[s("th",null,"ID"),s("th",null,"Ativo"),s("th",null,"Tipo"),s("th",null,"Origem"),s("th",null,"Destino"),s("th",null,"Responsável"),s("th",null,"Data"),s("th",null,"Status"),s("th",null,"Ações")])],-1)),s("tbody",null,[(b(!0),l(c,null,p(na.value,e=>{return b(),l("tr",{key:e.id},[s("td",null,[s("span",W,"#"+i(e.id),1)]),s("td",null,[s("div",X,[s("span",Z,i(e.asset.name),1),s("span",ee,i(e.asset.code),1)])]),s("td",null,[s("span",ae,i(e.type),1)]),s("td",null,i(e.origin),1),s("td",null,i(e.destination),1),s("td",null,[s("div",te,[s("span",le,i(e.responsible.name),1),s("span",se,i(e.responsible.email),1)])]),s("td",null,[s("div",ne,[s("span",oe,i((o=e.date,C(new Date(o),"dd/MM/yyyy",{locale:w}))),1),s("span",ie,i(ma(e.date)),1)])]),s("td",null,[s("span",{class:m(["badge",(t=e.status,{Pendente:"badge-warning","Em Andamento":"badge-info","Concluída":"badge-success",Cancelada:"badge-danger"}[t]||"badge-secondary")])},i(e.status),3)]),s("td",null,[s("div",ue,[s("button",{class:"btn-icon",onClick:a=>(e=>{h.debug("View movement:",e)})(e),title:"Visualizar"},[...a[52]||(a[52]=[s("i",{class:"fas fa-eye"},null,-1)])],8,de),"Pendente"===e.status?(b(),l("button",{key:0,class:"btn-icon",onClick:a=>(e=>{confirm(`Aprovar a movimentação #${e.id}?`)&&(e.status="Em Andamento")})(e),title:"Aprovar"},[...a[53]||(a[53]=[s("i",{class:"fas fa-check"},null,-1)])],8,re)):n("",!0),"Concluída"!==e.status?(b(),l("button",{key:1,class:"btn-icon danger",onClick:a=>(e=>{confirm(`Cancelar a movimentação #${e.id}?`)&&(e.status="Cancelada")})(e),title:"Cancelar"},[...a[54]||(a[54]=[s("i",{class:"fas fa-times"},null,-1)])],8,ve)):n("",!0),s("button",{class:"btn-icon",onClick:a=>(e=>{aa.value={id:e.id,assetId:e.asset.id,type:e.type,origin:e.origin,destination:e.destination,responsibleName:e.responsible.name,date:C(new Date(e.date),"yyyy-MM-dd'T'HH:mm"),status:e.status,notes:e.notes||""},ea.value=!0})(e),title:"Editar"},[...a[55]||(a[55]=[s("i",{class:"fas fa-edit"},null,-1)])],8,ce)])])]);var t,o}),128))])])]),s("div",pe,[s("div",me," Mostrando "+i((We.value-1)*Xe.value+1)+" a "+i(Math.min(We.value*Xe.value,sa.value.length))+" de "+i(sa.value.length)+" resultados ",1),s("div",fe,[s("button",{class:"btn btn-outline btn-sm",disabled:1===We.value,onClick:a[5]||(a[5]=e=>We.value--)},[...a[57]||(a[57]=[s("i",{class:"fas fa-chevron-left"},null,-1),o(" Anterior ",-1)])],8,be),s("div",ge,[(b(!0),l(c,null,p(ia.value,e=>(b(),l("button",{key:e,class:m(["btn btn-sm",{"btn-primary":e===We.value,"btn-outline":e!==We.value}]),onClick:a=>We.value=e},i(e),11,ye))),128))]),s("button",{class:"btn btn-outline btn-sm",disabled:We.value===oa.value,onClick:a[6]||(a[6]=e=>We.value++)},[...a[58]||(a[58]=[o(" Próximo ",-1),s("i",{class:"fas fa-chevron-right"},null,-1)])],8,he)])])]),Ze.value?(b(),l("div",{key:0,class:"modal-overlay",onClick:a[17]||(a[17]=e=>Ze.value=!1)},[s("div",{class:"modal",onClick:a[16]||(a[16]=f(()=>{},["stop"]))},[s("div",Ce,[a[60]||(a[60]=s("h2",null,"Nova Movimentação",-1)),s("button",{class:"btn-icon",onClick:a[7]||(a[7]=e=>Ze.value=!1)},[...a[59]||(a[59]=[s("i",{class:"fas fa-times"},null,-1)])])]),s("div",we,[s("form",{onSubmit:f(fa,["prevent"])},[s("div",De,[a[62]||(a[62]=s("label",null,"Ativo *",-1)),u(s("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>la.value.assetId=e),required:""},[a[61]||(a[61]=s("option",{value:""},"Selecione um ativo",-1)),(b(!0),l(c,null,p(va.value,e=>(b(),l("option",{key:e.id,value:e.id},i(e.name)+" ("+i(e.code)+") ",9,ke))),128))],512),[[r,la.value.assetId]])]),s("div",Te,[s("div",Me,[a[64]||(a[64]=s("label",null,"Tipo *",-1)),u(s("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>la.value.type=e),required:""},[...a[63]||(a[63]=[v('<option value="" data-v-2450ef56>Selecione o tipo</option><option value="Transferência" data-v-2450ef56>Transferência</option><option value="Empréstimo" data-v-2450ef56>Empréstimo</option><option value="Devolução" data-v-2450ef56>Devolução</option><option value="Manutenção" data-v-2450ef56>Manutenção</option><option value="Descarte" data-v-2450ef56>Descarte</option>',6)])],512),[[r,la.value.type]])]),s("div",Ve,[a[65]||(a[65]=s("label",null,"Data *",-1)),u(s("input",{type:"datetime-local","onUpdate:modelValue":a[10]||(a[10]=e=>la.value.date=e),required:""},null,512),[[d,la.value.date]])])]),s("div",Ee,[s("div",Ae,[a[66]||(a[66]=s("label",null,"Origem *",-1)),u(s("input",{type:"text","onUpdate:modelValue":a[11]||(a[11]=e=>la.value.origin=e),required:""},null,512),[[d,la.value.origin]])]),s("div",xe,[a[67]||(a[67]=s("label",null,"Destino *",-1)),u(s("input",{type:"text","onUpdate:modelValue":a[12]||(a[12]=e=>la.value.destination=e),required:""},null,512),[[d,la.value.destination]])])]),s("div",Ie,[a[68]||(a[68]=s("label",null,"Responsável *",-1)),u(s("input",{type:"text","onUpdate:modelValue":a[13]||(a[13]=e=>la.value.responsibleName=e),required:""},null,512),[[d,la.value.responsibleName]])]),s("div",Ue,[a[69]||(a[69]=s("label",null,"Observações",-1)),u(s("textarea",{"onUpdate:modelValue":a[14]||(a[14]=e=>la.value.notes=e),rows:"3",placeholder:"Observações sobre a movimentação..."},null,512),[[d,la.value.notes]])]),s("div",Se,[s("button",{type:"button",class:"btn btn-secondary",onClick:a[15]||(a[15]=e=>Ze.value=!1)}," Cancelar "),a[70]||(a[70]=s("button",{type:"submit",class:"btn btn-primary"},[s("i",{class:"fas fa-save"}),o(" Registrar Movimentação ")],-1))])],32)])])])):n("",!0),ea.value?(b(),l("div",{key:1,class:"modal-overlay",onClick:ba},[s("div",{class:"modal",onClick:a[26]||(a[26]=f(()=>{},["stop"]))},[s("div",Pe,[s("h2",null,"Editar Movimentação #"+i(aa.value.id),1),s("button",{class:"btn-icon",onClick:ba},[...a[71]||(a[71]=[s("i",{class:"fas fa-times"},null,-1)])])]),s("div",Le,[s("form",{onSubmit:f(ga,["prevent"])},[s("div",Ne,[a[73]||(a[73]=s("label",null,"Ativo *",-1)),u(s("select",{"onUpdate:modelValue":a[18]||(a[18]=e=>aa.value.assetId=e),required:""},[a[72]||(a[72]=s("option",{value:""},"Selecione um ativo",-1)),(b(!0),l(c,null,p(va.value,e=>(b(),l("option",{key:e.id,value:e.id},i(e.name)+" ("+i(e.code)+") ",9,qe))),128))],512),[[r,aa.value.assetId]])]),s("div",Oe,[s("div",He,[a[75]||(a[75]=s("label",null,"Tipo *",-1)),u(s("select",{"onUpdate:modelValue":a[19]||(a[19]=e=>aa.value.type=e),required:""},[...a[74]||(a[74]=[v('<option value="Transferência" data-v-2450ef56>Transferência</option><option value="Empréstimo" data-v-2450ef56>Empréstimo</option><option value="Devolução" data-v-2450ef56>Devolução</option><option value="Manutenção" data-v-2450ef56>Manutenção</option><option value="Descarte" data-v-2450ef56>Descarte</option>',5)])],512),[[r,aa.value.type]])]),s("div",Re,[a[76]||(a[76]=s("label",null,"Data *",-1)),u(s("input",{type:"datetime-local","onUpdate:modelValue":a[20]||(a[20]=e=>aa.value.date=e),required:""},null,512),[[d,aa.value.date]])])]),s("div",je,[s("div",_e,[a[77]||(a[77]=s("label",null,"Origem *",-1)),u(s("input",{type:"text","onUpdate:modelValue":a[21]||(a[21]=e=>aa.value.origin=e),required:""},null,512),[[d,aa.value.origin]])]),s("div",Be,[a[78]||(a[78]=s("label",null,"Destino *",-1)),u(s("input",{type:"text","onUpdate:modelValue":a[22]||(a[22]=e=>aa.value.destination=e),required:""},null,512),[[d,aa.value.destination]])])]),s("div",Fe,[a[79]||(a[79]=s("label",null,"Responsável *",-1)),u(s("input",{type:"text","onUpdate:modelValue":a[23]||(a[23]=e=>aa.value.responsibleName=e),required:""},null,512),[[d,aa.value.responsibleName]])]),s("div",$e,[a[81]||(a[81]=s("label",null,"Status",-1)),u(s("select",{"onUpdate:modelValue":a[24]||(a[24]=e=>aa.value.status=e)},[...a[80]||(a[80]=[s("option",{value:"Pendente"},"Pendente",-1),s("option",{value:"Em Andamento"},"Em Andamento",-1),s("option",{value:"Concluída"},"Concluída",-1),s("option",{value:"Cancelada"},"Cancelada",-1)])],512),[[r,aa.value.status]])]),s("div",Ye,[a[82]||(a[82]=s("label",null,"Observações",-1)),u(s("textarea",{"onUpdate:modelValue":a[25]||(a[25]=e=>aa.value.notes=e),rows:"3",placeholder:"Observações sobre a movimentação..."},null,512),[[d,aa.value.notes]])]),s("div",{class:"modal-actions"},[s("button",{type:"button",class:"btn btn-secondary",onClick:ba}," Cancelar "),a[83]||(a[83]=s("button",{type:"submit",class:"btn btn-primary"},[s("i",{class:"fas fa-save"}),o(" Salvar Alterações ")],-1))])],32)])])])):n("",!0)]))}},[["__scopeId","data-v-2450ef56"]]);export{ze as default};
//# sourceMappingURL=Movements-COB01318.js.map
