import{b as a,r as e,c as s,o as t,e as o,f as l,x as i,D as n,B as d,m as c,K as r,an as u,a9 as v,F as p,C as m,y as f,u as b,k as y}from"./vue-vendor-BY5hdAT7.js";import{l as A,_ as C}from"./index-Dur0lEaU.js";import"./utils-vendor-COuxBHZ0.js";const g=a("locations",()=>{const a=e([{id:1,name:"Prédio Principal",code:"PRED01",type:"Prédio",status:"Ativo",capacity:200,assetsCount:45,responsible:"João Silva",description:"Prédio principal da empresa",address:"Rua Principal, 123 - Centro",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:2,name:"TI - Sala 101",code:"TI101",type:"Sala",status:"Ativo",capacity:15,assetsCount:12,responsible:"Maria Santos",description:"Sala do departamento de TI",address:"Prédio Principal - 1º Andar",createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T10:30:00Z"},{id:3,name:"TI - Sala 102",code:"TI102",type:"Sala",status:"Ativo",capacity:10,assetsCount:8,responsible:"Carlos Lima",description:"Sala de desenvolvimento",address:"Prédio Principal - 1º Andar",createdAt:"2024-01-15T11:00:00Z",updatedAt:"2024-01-15T11:00:00Z"},{id:4,name:"Administração",code:"ADM01",type:"Sala",status:"Ativo",capacity:20,assetsCount:15,responsible:"Ana Costa",description:"Departamento administrativo",address:"Prédio Principal - 2º Andar",createdAt:"2024-01-15T11:30:00Z",updatedAt:"2024-01-15T11:30:00Z"},{id:5,name:"Almoxarifado",code:"ALM01",type:"Sala",status:"Ativo",capacity:5,assetsCount:25,responsible:"Pedro Oliveira",description:"Depósito de materiais",address:"Prédio Principal - Térreo",createdAt:"2024-01-15T12:00:00Z",updatedAt:"2024-01-15T12:00:00Z"},{id:6,name:"Sala de Reuniões A",code:"REUN01",type:"Sala",status:"Ativo",capacity:12,assetsCount:3,responsible:"Fernanda Rocha",description:"Sala de reuniões com equipamentos audiovisuais",address:"Prédio Principal - 2º Andar",createdAt:"2024-01-15T12:30:00Z",updatedAt:"2024-01-15T12:30:00Z"},{id:7,name:"Recepção",code:"RECEP01",type:"Área Externa",status:"Ativo",capacity:30,assetsCount:5,responsible:"Luciana Mendes",description:"Área de recepção e atendimento",address:"Prédio Principal - Térreo",createdAt:"2024-01-15T13:00:00Z",updatedAt:"2024-01-15T13:00:00Z"},{id:8,name:"Laboratório",code:"LAB01",type:"Sala",status:"Manutenção",capacity:8,assetsCount:18,responsible:"Roberto Silva",description:"Laboratório de testes e desenvolvimento",address:"Prédio Principal - 3º Andar",createdAt:"2024-01-15T13:30:00Z",updatedAt:"2024-01-15T13:30:00Z"}]),t=e(!1),o=e(null),l=s(()=>a.value.length),i=s(()=>a.value.reduce((a,e)=>a+e.assetsCount,0)),n=s(()=>{const e={};return a.value.forEach(a=>{e[a.type]||(e[a.type]=0),e[a.type]++}),e}),d=s(()=>{const e={};return a.value.forEach(a=>{e[a.status]||(e[a.status]=0),e[a.status]++}),e}),c=s(()=>a.value.filter(a=>"Ativo"===a.status)),r=()=>[["ID","Nome","Código","Tipo","Status","Capacidade","Ativos","Responsável","Descrição","Endereço"],...a.value.map(a=>[a.id,a.name,a.code,a.type,a.status,a.capacity,a.assetsCount,a.responsible,a.description,a.address])].map(a=>a.map(a=>`"${a}"`).join(",")).join("\n"),u=(a,e,s)=>{const t=new Blob([a],{type:s}),o=window.URL.createObjectURL(t),l=document.createElement("a");l.href=o,l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(o)};return{locations:a,loading:t,error:o,totalLocations:l,totalAssetsInLocations:i,locationsByType:n,locationsByStatus:d,activeLocations:c,fetchLocations:async()=>{t.value=!0,o.value=null;try{await new Promise(a=>setTimeout(a,1e3)),t.value=!1}catch(a){throw o.value=a.message,t.value=!1,a}},createLocation:async e=>{t.value=!0,o.value=null;try{await new Promise(a=>setTimeout(a,500));const s={...e,id:Date.now(),assetsCount:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return a.value.push(s),t.value=!1,s}catch(s){throw o.value=s.message,t.value=!1,s}},updateLocation:async(e,s)=>{t.value=!0,o.value=null;try{await new Promise(a=>setTimeout(a,500));const o=a.value.findIndex(a=>a.id===e);if(-1===o)throw new Error("Localização não encontrada");const l={...a.value[o],...s,updatedAt:(new Date).toISOString()};return a.value[o]=l,t.value=!1,l}catch(l){throw o.value=l.message,t.value=!1,l}},deleteLocation:async e=>{t.value=!0,o.value=null;try{const s=a.value.find(a=>a.id===e);if(s&&s.assetsCount>0)throw new Error("Não é possível excluir uma localização que possui ativos");await new Promise(a=>setTimeout(a,500));const o=a.value.findIndex(a=>a.id===e);if(-1===o)throw new Error("Localização não encontrada");return a.value.splice(o,1),t.value=!1,!0}catch(s){throw o.value=s.message,t.value=!1,s}},getLocationById:e=>a.value.find(a=>a.id===e),getLocationByCode:e=>a.value.find(a=>a.code===e),searchLocations:e=>{if(!e)return a.value;const s=e.toLowerCase();return a.value.filter(a=>a.name.toLowerCase().includes(s)||a.code.toLowerCase().includes(s)||a.description.toLowerCase().includes(s)||a.responsible.toLowerCase().includes(s))},filterLocationsByType:e=>e?a.value.filter(a=>a.type===e):a.value,filterLocationsByStatus:e=>e?a.value.filter(a=>a.status===e):a.value,updateAssetCount:(e,s)=>{const t=a.value.find(a=>a.id===e);t&&(t.assetsCount=s,t.updatedAt=(new Date).toISOString())},incrementAssetCount:e=>{const s=a.value.find(a=>a.id===e);s&&(s.assetsCount++,s.updatedAt=(new Date).toISOString())},decrementAssetCount:e=>{const s=a.value.find(a=>a.id===e);s&&s.assetsCount>0&&(s.assetsCount--,s.updatedAt=(new Date).toISOString())},exportLocations:async(a="csv")=>{try{if(await new Promise(a=>setTimeout(a,1e3)),"csv"===a){const a=r();u(a,"localizacoes.csv","text/csv")}else"excel"===a&&A.debug("Exportação para Excel não implementada ainda");return!0}catch(e){throw o.value=e.message,e}},clearError:()=>{o.value=null}}}),w={class:"locations"},S={class:"page-header"},h={class:"page-actions"},P={class:"stats-grid"},L={class:"stat-card"},T={class:"stat-content"},x={class:"stat-value"},E={class:"stat-card"},I={class:"stat-content"},k={class:"stat-value"},D={class:"stat-card"},z={class:"stat-content"},R={class:"stat-value"},U={class:"stat-card"},Z={class:"stat-content"},M={class:"stat-value"},V={class:"filters-section"},B={class:"filters-row"},O={class:"filter-group"},N={class:"search-input"},j={class:"filter-group"},q={class:"filter-group"},_={class:"locations-grid"},F=["onClick"],J={class:"location-header"},G={class:"location-icon"},K={class:"location-info"},$={class:"location-code"},H={class:"location-type"},Q={class:"location-status"},W={class:"location-details"},X={class:"detail-row"},Y={class:"value"},aa={class:"detail-row"},ea={class:"value"},sa={class:"detail-row"},ta={class:"value"},oa={class:"location-actions"},la=["onClick"],ia=["onClick"],na={class:"modal-header"},da={class:"modal-body"},ca={class:"form-grid"},ra={class:"form-group"},ua={class:"form-group"},va={class:"form-group"},pa={class:"form-group"},ma={class:"form-group"},fa={class:"form-group"},ba={class:"form-group full-width"},ya={class:"form-group full-width"},Aa={class:"modal-footer"},Ca={key:1,class:"success-message"},ga={key:2,class:"error-message"},wa=C({__name:"Locations",setup(a){g();const C=e(!1),wa=e(!1),Sa=e(""),ha=e(""),Pa=e(""),La=e(""),Ta=e(""),xa=e([{id:1,name:"Prédio Principal",code:"PRED01",type:"Prédio",status:"Ativo",capacity:200,assetsCount:45,responsible:"João Silva",description:"Prédio principal da empresa",address:"Rua Principal, 123 - Centro"},{id:2,name:"TI - Sala 101",code:"TI101",type:"Sala",status:"Ativo",capacity:15,assetsCount:12,responsible:"Maria Santos",description:"Sala do departamento de TI",address:"Prédio Principal - 1º Andar"},{id:3,name:"TI - Sala 102",code:"TI102",type:"Sala",status:"Ativo",capacity:10,assetsCount:8,responsible:"Carlos Lima",description:"Sala de desenvolvimento",address:"Prédio Principal - 1º Andar"},{id:4,name:"Administração",code:"ADM01",type:"Sala",status:"Ativo",capacity:20,assetsCount:15,responsible:"Ana Costa",description:"Departamento administrativo",address:"Prédio Principal - 2º Andar"},{id:5,name:"Almoxarifado",code:"ALM01",type:"Sala",status:"Ativo",capacity:5,assetsCount:25,responsible:"Pedro Oliveira",description:"Depósito de materiais",address:"Prédio Principal - Térreo"}]),Ea=e({name:"",code:"",type:"",status:"Ativo",capacity:"",responsible:"",description:"",address:""}),Ia=e(null),ka=s(()=>{let a=xa.value;if(Sa.value){const e=Sa.value.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(e)||a.code.toLowerCase().includes(e))}return ha.value&&(a=a.filter(a=>a.type===ha.value)),Pa.value&&(a=a.filter(a=>a.status===Pa.value)),a}),Da=s(()=>xa.value.reduce((a,e)=>a+e.assetsCount,0)),za=s(()=>xa.value.filter(a=>"Prédio"===a.type).length),Ra=s(()=>xa.value.filter(a=>"Sala"===a.type).length),Ua=()=>{},Za=()=>{Sa.value="",ha.value="",Pa.value=""},Ma=()=>{try{if(C.value){const a={...Ea.value,id:Date.now(),assetsCount:0};xa.value.push(a),La.value="Localização criada com sucesso!"}else{const a=xa.value.findIndex(a=>a.id===Ia.value.id);-1!==a&&(xa.value[a]={...Ea.value,id:Ia.value.id},La.value="Localização atualizada com sucesso!")}Va(),setTimeout(()=>La.value="",3e3)}catch(a){Ta.value="Erro ao salvar localização: "+a.message,setTimeout(()=>Ta.value="",5e3)}},Va=()=>{C.value=!1,wa.value=!1,Ia.value=null,Ea.value={name:"",code:"",type:"",status:"Ativo",capacity:"",responsible:"",description:"",address:""}},Ba=()=>{A.debug("Exportando localizações..."),La.value="Exportação iniciada!",setTimeout(()=>La.value="",3e3)};return t(()=>{}),(a,e)=>(y(),o("div",w,[l("div",S,[e[15]||(e[15]=l("div",{class:"page-header-content"},[l("h1",{class:"page-title"},"Localizações"),l("p",{class:"page-subtitle"},"Gestão de locais e ambientes da empresa")],-1)),l("div",h,[l("button",{class:"btn btn-secondary",onClick:Ba},[...e[13]||(e[13]=[l("i",{class:"fas fa-download"},null,-1),n(" Exportar ",-1)])]),l("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=a=>C.value=!0)},[...e[14]||(e[14]=[l("i",{class:"fas fa-plus"},null,-1),n(" Nova Localização ",-1)])])])]),l("div",P,[l("div",L,[e[17]||(e[17]=l("div",{class:"stat-icon primary"},[l("i",{class:"fas fa-map-marker-alt"})],-1)),l("div",T,[e[16]||(e[16]=l("div",{class:"stat-label"},"Total de Localizações",-1)),l("div",x,d(xa.value.length),1)])]),l("div",E,[e[19]||(e[19]=l("div",{class:"stat-icon success"},[l("i",{class:"fas fa-boxes"})],-1)),l("div",I,[e[18]||(e[18]=l("div",{class:"stat-label"},"Ativos Alocados",-1)),l("div",k,d(Da.value),1)])]),l("div",D,[e[21]||(e[21]=l("div",{class:"stat-icon warning"},[l("i",{class:"fas fa-building"})],-1)),l("div",z,[e[20]||(e[20]=l("div",{class:"stat-label"},"Prédios",-1)),l("div",R,d(za.value),1)])]),l("div",U,[e[23]||(e[23]=l("div",{class:"stat-icon info"},[l("i",{class:"fas fa-door-open"})],-1)),l("div",Z,[e[22]||(e[22]=l("div",{class:"stat-label"},"Salas",-1)),l("div",M,d(Ra.value),1)])])]),l("div",V,[l("div",B,[l("div",O,[e[25]||(e[25]=l("label",null,"Buscar",-1)),l("div",N,[e[24]||(e[24]=l("i",{class:"fas fa-search"},null,-1)),c(l("input",{type:"text",placeholder:"Buscar por nome ou código...","onUpdate:modelValue":e[1]||(e[1]=a=>Sa.value=a),onInput:Ua},null,544),[[r,Sa.value]])])]),l("div",j,[e[27]||(e[27]=l("label",null,"Tipo",-1)),c(l("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>ha.value=a),onChange:Ua},[...e[26]||(e[26]=[v('<option value="" data-v-9d3580e5>Todos os tipos</option><option value="Prédio" data-v-9d3580e5>Prédio</option><option value="Andar" data-v-9d3580e5>Andar</option><option value="Sala" data-v-9d3580e5>Sala</option><option value="Área Externa" data-v-9d3580e5>Área Externa</option>',5)])],544),[[u,ha.value]])]),l("div",q,[e[29]||(e[29]=l("label",null,"Status",-1)),c(l("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>Pa.value=a),onChange:Ua},[...e[28]||(e[28]=[l("option",{value:""},"Todos os status",-1),l("option",{value:"Ativo"},"Ativo",-1),l("option",{value:"Inativo"},"Inativo",-1),l("option",{value:"Manutenção"},"Manutenção",-1)])],544),[[u,Pa.value]])]),l("button",{class:"btn btn-outline",onClick:Za},[...e[30]||(e[30]=[l("i",{class:"fas fa-times"},null,-1),n(" Limpar ",-1)])])])]),l("div",_,[(y(!0),o(p,null,m(ka.value,a=>{return y(),o("div",{key:a.id,class:"location-card",onClick:e=>(a=>{A.debug("Localização selecionada:",a)})(a)},[l("div",J,[l("div",G,[l("i",{class:f((t=a.type,{"Prédio":"fas fa-building",Andar:"fas fa-layer-group",Sala:"fas fa-door-open","Área Externa":"fas fa-tree"}[t]||"fas fa-map-marker-alt"))},null,2)]),l("div",K,[l("h3",null,d(a.name),1),l("p",$,d(a.code),1),l("span",H,d(a.type),1)]),l("div",Q,[l("span",{class:f(["badge",(s=a.status,{Ativo:"badge-success",Inativo:"badge-danger","Manutenção":"badge-warning"}[s]||"badge-secondary")])},d(a.status),3)])]),l("div",W,[l("div",X,[e[31]||(e[31]=l("span",{class:"label"},"Capacidade:",-1)),l("span",Y,d(a.capacity)+" pessoas",1)]),l("div",aa,[e[32]||(e[32]=l("span",{class:"label"},"Ativos:",-1)),l("span",ea,d(a.assetsCount)+" itens",1)]),l("div",sa,[e[33]||(e[33]=l("span",{class:"label"},"Responsável:",-1)),l("span",ta,d(a.responsible),1)])]),l("div",oa,[l("button",{class:"btn btn-sm btn-secondary",onClick:b(e=>(a=>{Ia.value=a,Ea.value={...a},wa.value=!0})(a),["stop"])},[...e[34]||(e[34]=[l("i",{class:"fas fa-edit"},null,-1),n(" Editar ",-1)])],8,la),l("button",{class:"btn btn-sm btn-outline",onClick:b(e=>(a=>{A.debug("Ver ativos da localização:",a)})(a),["stop"])},[...e[35]||(e[35]=[l("i",{class:"fas fa-boxes"},null,-1),n(" Ver Ativos ",-1)])],8,ia)])],8,F);var s,t}),128))]),C.value||wa.value?(y(),o("div",{key:0,class:"modal-overlay",onClick:Va},[l("div",{class:"modal-content",onClick:e[12]||(e[12]=b(()=>{},["stop"]))},[l("div",na,[l("h2",null,d(C.value?"Nova Localização":"Editar Localização"),1),l("button",{class:"close-btn",onClick:Va},[...e[36]||(e[36]=[l("i",{class:"fas fa-times"},null,-1)])])]),l("div",da,[l("form",{onSubmit:b(Ma,["prevent"])},[l("div",ca,[l("div",ra,[e[37]||(e[37]=l("label",null,"Nome *",-1)),c(l("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>Ea.value.name=a),required:"",placeholder:"Ex: Sala 101"},null,512),[[r,Ea.value.name]])]),l("div",ua,[e[38]||(e[38]=l("label",null,"Código *",-1)),c(l("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=a=>Ea.value.code=a),required:"",placeholder:"Ex: S101"},null,512),[[r,Ea.value.code]])]),l("div",va,[e[40]||(e[40]=l("label",null,"Tipo *",-1)),c(l("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>Ea.value.type=a),required:""},[...e[39]||(e[39]=[v('<option value="" data-v-9d3580e5>Selecione o tipo</option><option value="Prédio" data-v-9d3580e5>Prédio</option><option value="Andar" data-v-9d3580e5>Andar</option><option value="Sala" data-v-9d3580e5>Sala</option><option value="Área Externa" data-v-9d3580e5>Área Externa</option>',5)])],512),[[u,Ea.value.type]])]),l("div",pa,[e[42]||(e[42]=l("label",null,"Status",-1)),c(l("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>Ea.value.status=a)},[...e[41]||(e[41]=[l("option",{value:"Ativo"},"Ativo",-1),l("option",{value:"Inativo"},"Inativo",-1),l("option",{value:"Manutenção"},"Manutenção",-1)])],512),[[u,Ea.value.status]])]),l("div",ma,[e[43]||(e[43]=l("label",null,"Capacidade",-1)),c(l("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=a=>Ea.value.capacity=a),placeholder:"Número de pessoas"},null,512),[[r,Ea.value.capacity]])]),l("div",fa,[e[44]||(e[44]=l("label",null,"Responsável",-1)),c(l("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=a=>Ea.value.responsible=a),placeholder:"Nome do responsável"},null,512),[[r,Ea.value.responsible]])])]),l("div",ba,[e[45]||(e[45]=l("label",null,"Descrição",-1)),c(l("textarea",{"onUpdate:modelValue":e[10]||(e[10]=a=>Ea.value.description=a),rows:"3",placeholder:"Descrição da localização..."},null,512),[[r,Ea.value.description]])]),l("div",ya,[e[46]||(e[46]=l("label",null,"Endereço",-1)),c(l("textarea",{"onUpdate:modelValue":e[11]||(e[11]=a=>Ea.value.address=a),rows:"2",placeholder:"Endereço completo..."},null,512),[[r,Ea.value.address]])])],32)]),l("div",Aa,[l("button",{type:"button",class:"btn btn-secondary",onClick:Va}," Cancelar "),l("button",{type:"button",class:"btn btn-primary",onClick:Ma},[e[47]||(e[47]=l("i",{class:"fas fa-save"},null,-1)),n(" "+d(C.value?"Criar":"Salvar"),1)])])])])):i("",!0),La.value?(y(),o("div",Ca,[e[48]||(e[48]=l("i",{class:"fas fa-check-circle"},null,-1)),n(" "+d(La.value),1)])):i("",!0),Ta.value?(y(),o("div",ga,[e[49]||(e[49]=l("i",{class:"fas fa-exclamation-triangle"},null,-1)),n(" "+d(Ta.value),1)])):i("",!0)]))}},[["__scopeId","data-v-9d3580e5"]]);export{wa as default};
//# sourceMappingURL=Locations-CwvesEdC.js.map
