import{r as a,c as e,e as t,k as n,f as i,x as s,y as l,B as g}from"./vue-vendor-BY5hdAT7.js";import{_ as o}from"./index-Dur0lEaU.js";function d(t={}){const{initialState:n=!1,minDuration:i=300}=t,s=a(n),l=a(new Map),g=a(null),o=e(()=>s.value||Array.from(l.value.values()).some(a=>a)),d=async(a="default")=>{"default"===a?(s.value=!0,g.value=Date.now()):l.value.set(a,!0)},r=async(a="default")=>{"default"===a?(await(async()=>{if(g.value&&i>0){const a=Date.now()-g.value;a<i&&await new Promise(e=>setTimeout(e,i-a))}})(),s.value=!1,g.value=null):l.value.set(a,!1)},u=async(a,e="default")=>{try{await d(e);return await a()}finally{await r(e)}},c=a=>l.value.get(a)||!1,v={fetching:e(()=>c("fetching")),saving:e(()=>c("saving")),deleting:e(()=>c("deleting")),creating:e(()=>c("creating")),updating:e(()=>c("updating"))};return{isLoading:s,hasAnyLoading:o,...v,startLoading:d,stopLoading:r,withLoading:u,isLoadingKey:c,clearAll:()=>{s.value=!1,l.value.clear(),g.value=null},startFetching:()=>d("fetching"),stopFetching:()=>r("fetching"),startSaving:()=>d("saving"),stopSaving:()=>r("saving"),startDeleting:()=>d("deleting"),stopDeleting:()=>r("deleting"),startCreating:()=>d("creating"),stopCreating:()=>r("creating"),startUpdating:()=>d("updating"),stopUpdating:()=>r("updating"),withFetching:a=>u(a,"fetching"),withSaving:a=>u(a,"saving"),withDeleting:a=>u(a,"deleting"),withCreating:a=>u(a,"creating"),withUpdating:a=>u(a,"updating")}}function r(){const a=d({minDuration:500});return{...a,loadPage:async e=>a.withLoading(e)}}const u={class:"loading-content"},c={key:0,class:"loading-message"},v=o({__name:"LoadingState",props:{message:{type:String,default:"Carregando..."},size:{type:String,default:"medium",validator:a=>["small","medium","large"].includes(a)},overlay:{type:Boolean,default:!1},inline:{type:Boolean,default:!1}},setup:a=>(e,o)=>(n(),t("div",{class:l(["loading-state",{overlay:a.overlay,inline:a.inline}])},[i("div",u,[i("div",{class:l(["loading-spinner",a.size])},[...o[0]||(o[0]=[i("i",{class:"fas fa-spinner fa-spin"},null,-1)])],2),a.message?(n(),t("div",c,g(a.message),1)):s("",!0)])],2))},[["__scopeId","data-v-68e527b4"]]);export{v as L,r as u};
//# sourceMappingURL=LoadingState-Bai_lHj2.js.map
