import{u as e,l as t}from"./index-Dur0lEaU.js";import{b as a,r as o,c as r}from"./vue-vendor-BY5hdAT7.js";import{u as s}from"./serviceOrders-nzPMGKta.js";import{u as n}from"./employeeLoans-BCft1fZR.js";import{u as i}from"./thirdPartyLoans-C751nSTY.js";import{u as l}from"./physicalInventory-DJKBk5BT.js";import{u as d}from"./audits-BUtnpEeu.js";const c=a("reports",()=>{const a=o(!1),c=o(null),u=o({start:new Date((new Date).getFullYear(),(new Date).getMonth()-6,1),end:new Date}),p=o([{id:"assets-overview",name:"Visão Geral de Ativos",description:"Relatório completo sobre todos os ativos",category:"assets",icon:"fas fa-boxes",color:"primary"},{id:"assets-by-category",name:"Ativos por Categoria",description:"Distribuição de ativos por categoria",category:"assets",icon:"fas fa-chart-pie",color:"info"},{id:"assets-by-location",name:"Ativos por Localização",description:"Distribuição de ativos por localização",category:"assets",icon:"fas fa-map-marker-alt",color:"success"},{id:"assets-depreciation",name:"Depreciação de Ativos",description:"Análise de depreciação e valor atual",category:"financial",icon:"fas fa-chart-line",color:"warning"},{id:"maintenance-summary",name:"Resumo de Manutenções",description:"Ordens de serviço e custos de manutenção",category:"maintenance",icon:"fas fa-tools",color:"danger"},{id:"loans-report",name:"Relatório de Empréstimos",description:"Empréstimos para funcionários e terceiros",category:"loans",icon:"fas fa-handshake",color:"secondary"},{id:"inventory-audit",name:"Auditoria de Inventário",description:"Resultados de inventários físicos",category:"audit",icon:"fas fa-clipboard-check",color:"dark"},{id:"warranty-expiration",name:"Vencimento de Garantias",description:"Garantias próximas ao vencimento",category:"warranty",icon:"fas fa-shield-alt",color:"warning"}]),m=o([{id:"rpt-001",name:"Relatório Mensal de Ativos - Janeiro 2024",type:"assets-overview",generatedAt:new Date("2024-01-31"),generatedBy:"Admin",status:"completed",format:"PDF",size:"2.3 MB",downloadUrl:"#"},{id:"rpt-002",name:"Análise de Depreciação - Q4 2023",type:"assets-depreciation",generatedAt:new Date("2024-01-15"),generatedBy:"Financeiro",status:"completed",format:"Excel",size:"1.8 MB",downloadUrl:"#"},{id:"rpt-003",name:"Relatório de Manutenções - Dezembro 2023",type:"maintenance-summary",generatedAt:new Date("2024-01-05"),generatedBy:"Técnico",status:"processing",format:"PDF",size:null,downloadUrl:null}]),v=o({category:"",status:"",dateRange:"last-30-days",format:"",generatedBy:""}),y=e(),g=s(),f=n(),h=i(),w=l(),D=d(),A=r(()=>[...new Set(p.value.map(e=>e.category))].map(e=>({id:e,name:L(e),count:p.value.filter(t=>t.category===e).length}))),b=r(()=>{let e=m.value;if(v.value.category){const t=p.value.filter(e=>e.category===v.value.category).map(e=>e.id);e=e.filter(e=>t.includes(e.type))}return v.value.status&&(e=e.filter(e=>e.status===v.value.status)),v.value.format&&(e=e.filter(e=>e.format===v.value.format)),v.value.generatedBy&&(e=e.filter(e=>e.generatedBy.toLowerCase().includes(v.value.generatedBy.toLowerCase()))),e}),B=r(()=>({total:m.value.length,completed:m.value.filter(e=>"completed"===e.status).length,processing:m.value.filter(e=>"processing"===e.status).length,failed:m.value.filter(e=>"failed"===e.status).length,totalSize:m.value.filter(e=>e.size).reduce((e,t)=>e+parseFloat(t.size),0).toFixed(1)})),R=r(()=>({assetsOverview:{totalAssets:y.totalAssets,totalValue:y.totalValue,byCategory:y.assetsByCategory,byStatus:y.assetsByStatus,byLocation:y.assetsByLocation,depreciation:I()},maintenance:{totalOrders:g.totalOrders,ordersInProgress:g.ordersInProgress,completedOrders:g.completedOrders,averageResolutionTime:g.averageResolutionTime,totalCost:g.totalCost,byType:g.ordersByType,byPriority:g.ordersByPriority},loans:{employee:{total:f.totalLoans,active:f.activeLoans.length,overdue:f.overdueLoans.length,byDepartment:f.loansByDepartment},thirdParty:{total:h.totalLoans,active:h.activeLoans.length,overdue:h.overdueLoans.length,byType:h.loansByType}},inventory:{totalInventories:w.totalInventories,activeInventories:w.activeInventories.length,completedInventories:w.completedInventories.length,totalDiscrepancies:w.totalDiscrepancies},audits:{totalAudits:D.totalAudits,activeAudits:D.activeAudits.length,completedAudits:D.completedAudits.length,auditsWithIssues:D.auditsWithIssues.length}})),L=e=>({assets:"Ativos",financial:"Financeiro",maintenance:"Manutenção",loans:"Empréstimos",audit:"Auditoria",warranty:"Garantias"}[e]||e),I=()=>({totalDepreciated:125e3,monthlyDepreciation:8500,averageAge:2.3,assetsNearEndOfLife:12}),F=e=>{if(!e.length)return"";const t=Object.keys(e[0]);return[t.join(","),...e.map(e=>t.map(t=>{const a=e[t];return"string"==typeof a&&a.includes(",")?`"${a}"`:a}).join(","))].join("\n")},j=(e,t)=>{const a=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");if(void 0!==o.download){const e=URL.createObjectURL(a);o.setAttribute("href",e),o.setAttribute("download",t),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}};return{loading:a,error:c,selectedDateRange:u,reportTypes:p,generatedReports:m,filters:v,reportCategories:A,filteredReports:b,reportStatistics:B,analyticsData:R,generateReport:async(e,t={})=>{a.value=!0,c.value=null;try{const a=p.value.find(t=>t.id===e);if(!a)throw new Error("Tipo de relatório não encontrado");await new Promise(e=>setTimeout(e,2e3));const o={id:`rpt-${Date.now()}`,name:`${a.name} - ${(new Date).toLocaleDateString("pt-BR")}`,type:e,generatedAt:new Date,generatedBy:"Usuário Atual",status:"completed",format:t.format||"PDF",size:`${(3*Math.random()+.5).toFixed(1)} MB`,downloadUrl:"#"};return m.value.unshift(o),o}catch(o){throw c.value="Erro ao gerar relatório: "+o.message,o}finally{a.value=!1}},deleteReport:e=>{const t=m.value.findIndex(t=>t.id===e);-1!==t&&m.value.splice(t,1)},downloadReport:e=>{const a=m.value.find(t=>t.id===e);a&&a.downloadUrl&&t.debug(`Downloading report: ${a.name}`)},exportReportsList:(e="csv")=>{const t=b.value.map(e=>{var t;return{Nome:e.name,Tipo:(null==(t=p.value.find(t=>t.id===e.type))?void 0:t.name)||e.type,"Data de Geração":e.generatedAt.toLocaleDateString("pt-BR"),"Gerado Por":e.generatedBy,Status:e.status,Formato:e.format,Tamanho:e.size||"N/A"}});if("csv"===e){const e=F(t);j(e,"relatorios.csv")}},updateFilters:e=>{v.value={...v.value,...e}},clearFilters:()=>{v.value={category:"",status:"",dateRange:"last-30-days",format:"",generatedBy:""}}}});export{c as u};
//# sourceMappingURL=reports-B0ZoCeuq.js.map
