import{u as e}from"./serviceOrders-nzPMGKta.js";import{e as a,f as l,x as s,D as t,B as o,m as r,K as d,an as i,a9 as n,F as c,C as u,y as p,u as v,r as m,c as b,o as g,k as y}from"./vue-vendor-BY5hdAT7.js";import{_ as O}from"./index-Dur0lEaU.js";import"./utils-vendor-COuxBHZ0.js";const h={class:"service-orders-page"},f={class:"page-header"},k={class:"header-content"},C={class:"header-actions"},D=["disabled"],T={class:"stats-grid"},w={class:"stat-card"},M={class:"stat-content"},F={class:"stat-number"},A={class:"stat-card"},x={class:"stat-content"},S={class:"stat-number"},E={class:"stat-card"},U={class:"stat-content"},P={class:"stat-number"},V={class:"stat-card"},I={class:"stat-content"},L={class:"stat-number"},R={class:"filters-section"},q={class:"filters-row"},B={class:"search-box"},N={class:"filters-row"},z={class:"date-range"},_={class:"table-container"},j={key:0,class:"loading-state"},G={key:1,class:"empty-state"},K={key:2,class:"orders-table"},H={class:"order-code"},J={class:"order-description"},Q={class:"title"},W={class:"description"},X={class:"asset-info"},Y={class:"asset-code"},Z={class:"asset-name"},$={class:"technician-info"},ee={class:"name"},ae={class:"department"},le={class:"actions"},se=["onClick"],te=["onClick"],oe=["onClick"],re=["onClick"],de={class:"modal-header"},ie={class:"form-grid"},ne={class:"form-group"},ce={class:"form-group"},ue={class:"form-group"},pe={class:"form-group"},ve=["value"],me={class:"form-group"},be=["value"],ge={class:"form-group"},ye={class:"form-group"},Oe={class:"form-group"},he={class:"modal-footer"},fe=["disabled"],ke={class:"modal-header"},Ce={key:0,class:"modal-body"},De={class:"details-grid"},Te={class:"detail-section"},we={class:"detail-item"},Me={class:"detail-item"},Fe={class:"detail-item"},Ae={class:"detail-item"},xe={class:"detail-item"},Se={class:"detail-section"},Ee={class:"detail-item"},Ue={class:"detail-item"},Pe={class:"detail-item"},Ve={class:"detail-section"},Ie={class:"detail-item"},Le={class:"detail-item"},Re={key:0,class:"detail-item"},qe={key:1,class:"detail-item"},Be={class:"detail-section full-width"},Ne={key:0,class:"detail-section full-width"},ze={key:1,class:"detail-section full-width"},_e={class:"modal-footer"},je={key:2,class:"alert alert-success"},Ge={key:3,class:"alert alert-error"};const Ke=O({name:"ServiceOrders",setup(){const a=e(),l=m(!1),s=m(!1),t=m(!1),o=m(null),r=m(""),d=m(""),i=m({title:"",description:"",type:"",priority:"",assetId:"",assignedTo:"",dueDate:"",notes:""}),n=b({get:()=>a.searchTerm,set:e=>a.setSearchTerm(e)}),c=b({get:()=>a.filters,set:e=>a.setFilters(e)}),u=b(()=>a.filteredOrders),p=b(()=>a.totalOrders),v=b(()=>a.ordersInProgress),y=b(()=>a.overdueOrders),O=b(()=>a.completedOrders),h=b(()=>a.loading),f=b(()=>a.technicians),k=b(()=>a.availableAssets),C=()=>{l.value=!1,s.value=!1,t.value=!1,o.value=null,D()},D=()=>{i.value={title:"",description:"",type:"",priority:"",assetId:"",assignedTo:"",dueDate:"",notes:""}},T=e=>{r.value=e,setTimeout(()=>{r.value=""},3e3)},w=e=>{d.value=e,setTimeout(()=>{d.value=""},3e3)};return g(()=>{a.fetchOrders()}),{showCreateModal:l,showEditModal:s,showDetailsModal:t,selectedOrder:o,successMessage:r,errorMessage:d,orderForm:i,searchTerm:n,filters:c,filteredOrders:u,totalOrders:p,ordersInProgress:v,overdueOrders:y,completedOrders:O,loading:h,technicians:f,availableAssets:k,clearFilters:()=>{a.clearFilters()},exportOrders:async()=>{try{await a.exportOrders(),T("Dados exportados com sucesso!")}catch(e){w("Erro ao exportar dados")}},viewOrder:e=>{o.value=e,t.value=!0},editOrder:e=>{o.value=e,i.value={title:e.title,description:e.description,type:e.type,priority:e.priority,assetId:e.assetId,assignedTo:e.assignedTo,dueDate:e.dueDate,notes:e.notes||""},s.value=!0},startOrder:async e=>{try{await a.startOrder(e.id),T("Ordem iniciada com sucesso!")}catch(l){w("Erro ao iniciar ordem")}},completeOrder:async e=>{try{await a.completeOrder(e.id),T("Ordem concluída com sucesso!")}catch(l){w("Erro ao concluir ordem")}},saveOrder:async()=>{try{s.value?(await a.updateOrder(o.value.id,i.value),T("Ordem atualizada com sucesso!")):(await a.createOrder(i.value),T("Ordem criada com sucesso!")),C(),D()}catch(e){w("Erro ao salvar ordem")}},closeModals:C,formatDate:e=>new Date(e).toLocaleDateString("pt-BR"),formatDateTime:e=>new Date(e).toLocaleString("pt-BR"),isOverdue:e=>new Date(e)<new Date,getStatusLabel:e=>a.getStatusLabel(e),getTypeLabel:e=>({preventive:"Preventiva",corrective:"Corretiva",emergency:"Emergencial"}[e]||e),getPriorityLabel:e=>({low:"Baixa",medium:"Média",high:"Alta",urgent:"Urgente"}[e]||e)}}},[["render",function(e,m,b,g,O,Ke){return y(),a("div",h,[l("div",f,[l("div",k,[m[29]||(m[29]=l("div",{class:"header-text"},[l("h1",{class:"page-title"},"Ordens de Serviço"),l("p",{class:"page-subtitle"},"Gerencie ordens de serviço e manutenções dos ativos")],-1)),l("div",C,[l("button",{onClick:m[0]||(m[0]=(...e)=>g.exportOrders&&g.exportOrders(...e)),class:"btn btn-outline",disabled:g.loading},[...m[27]||(m[27]=[l("i",{class:"icon-download"},null,-1),t(" Exportar ",-1)])],8,D),l("button",{onClick:m[1]||(m[1]=e=>g.showCreateModal=!0),class:"btn btn-primary"},[...m[28]||(m[28]=[l("i",{class:"icon-plus"},null,-1),t(" Nova Ordem ",-1)])])])])]),l("div",T,[l("div",w,[m[31]||(m[31]=l("div",{class:"stat-icon total"},[l("i",{class:"icon-clipboard"})],-1)),l("div",M,[l("div",F,o(g.totalOrders),1),m[30]||(m[30]=l("div",{class:"stat-label"},"Total de Ordens",-1))])]),l("div",A,[m[33]||(m[33]=l("div",{class:"stat-icon pending"},[l("i",{class:"icon-clock"})],-1)),l("div",x,[l("div",S,o(g.ordersInProgress),1),m[32]||(m[32]=l("div",{class:"stat-label"},"Em Andamento",-1))])]),l("div",E,[m[35]||(m[35]=l("div",{class:"stat-icon overdue"},[l("i",{class:"icon-alert"})],-1)),l("div",U,[l("div",P,o(g.overdueOrders),1),m[34]||(m[34]=l("div",{class:"stat-label"},"Em Atraso",-1))])]),l("div",V,[m[37]||(m[37]=l("div",{class:"stat-icon completed"},[l("i",{class:"icon-check"})],-1)),l("div",I,[l("div",L,o(g.completedOrders),1),m[36]||(m[36]=l("div",{class:"stat-label"},"Concluídas",-1))])])]),l("div",R,[l("div",q,[l("div",B,[m[38]||(m[38]=l("i",{class:"icon-search"},null,-1)),r(l("input",{"onUpdate:modelValue":m[2]||(m[2]=e=>g.searchTerm=e),type:"text",placeholder:"Buscar por código, descrição, técnico ou ativo...",class:"search-input"},null,512),[[d,g.searchTerm]])]),r(l("select",{"onUpdate:modelValue":m[3]||(m[3]=e=>g.filters.status=e),class:"filter-select"},[...m[39]||(m[39]=[n('<option value="" data-v-e8d90506>Todos os Status</option><option value="open" data-v-e8d90506>Aberta</option><option value="in_progress" data-v-e8d90506>Em Andamento</option><option value="completed" data-v-e8d90506>Concluída</option><option value="cancelled" data-v-e8d90506>Cancelada</option>',5)])],512),[[i,g.filters.status]]),r(l("select",{"onUpdate:modelValue":m[4]||(m[4]=e=>g.filters.priority=e),class:"filter-select"},[...m[40]||(m[40]=[n('<option value="" data-v-e8d90506>Todas as Prioridades</option><option value="low" data-v-e8d90506>Baixa</option><option value="medium" data-v-e8d90506>Média</option><option value="high" data-v-e8d90506>Alta</option><option value="urgent" data-v-e8d90506>Urgente</option>',5)])],512),[[i,g.filters.priority]]),r(l("select",{"onUpdate:modelValue":m[5]||(m[5]=e=>g.filters.type=e),class:"filter-select"},[...m[41]||(m[41]=[l("option",{value:""},"Todos os Tipos",-1),l("option",{value:"preventive"},"Preventiva",-1),l("option",{value:"corrective"},"Corretiva",-1),l("option",{value:"emergency"},"Emergencial",-1)])],512),[[i,g.filters.type]]),l("button",{onClick:m[6]||(m[6]=(...e)=>g.clearFilters&&g.clearFilters(...e)),class:"btn btn-outline btn-sm"},[...m[42]||(m[42]=[l("i",{class:"icon-x"},null,-1),t(" Limpar ",-1)])])]),l("div",N,[l("div",z,[m[43]||(m[43]=l("label",null,"Período:",-1)),r(l("input",{"onUpdate:modelValue":m[7]||(m[7]=e=>g.filters.dateRange.start=e),type:"date",class:"date-input"},null,512),[[d,g.filters.dateRange.start]]),m[44]||(m[44]=l("span",null,"até",-1)),r(l("input",{"onUpdate:modelValue":m[8]||(m[8]=e=>g.filters.dateRange.end=e),type:"date",class:"date-input"},null,512),[[d,g.filters.dateRange.end]])])])]),l("div",_,[g.loading?(y(),a("div",j,[...m[45]||(m[45]=[l("div",{class:"spinner"},null,-1),l("p",null,"Carregando ordens de serviço...",-1)])])):0===g.filteredOrders.length?(y(),a("div",G,[...m[46]||(m[46]=[l("i",{class:"icon-clipboard"},null,-1),l("h3",null,"Nenhuma ordem encontrada",-1),l("p",null,"Não há ordens de serviço que correspondam aos filtros aplicados.",-1)])])):(y(),a("table",K,[m[51]||(m[51]=l("thead",null,[l("tr",null,[l("th",null,"Código"),l("th",null,"Descrição"),l("th",null,"Ativo"),l("th",null,"Tipo"),l("th",null,"Prioridade"),l("th",null,"Técnico"),l("th",null,"Status"),l("th",null,"Data Abertura"),l("th",null,"Prazo"),l("th",null,"Ações")])],-1)),l("tbody",null,[(y(!0),a(c,null,u(g.filteredOrders,e=>(y(),a("tr",{key:e.id},[l("td",null,[l("span",H,o(e.code),1)]),l("td",null,[l("div",J,[l("span",Q,o(e.title),1),l("span",W,o(e.description),1)])]),l("td",null,[l("div",X,[l("span",Y,o(e.assetCode),1),l("span",Z,o(e.assetName),1)])]),l("td",null,[l("span",{class:p(["type-badge",e.type])},o(g.getTypeLabel(e.type)),3)]),l("td",null,[l("span",{class:p(["priority-badge",e.priority])},o(g.getPriorityLabel(e.priority)),3)]),l("td",null,[l("div",$,[l("span",ee,o(e.assignedTo),1),l("span",ae,o(e.department),1)])]),l("td",null,[l("span",{class:p(["status-badge",e.status])},o(g.getStatusLabel(e.status)),3)]),l("td",null,o(g.formatDate(e.createdAt)),1),l("td",null,[l("span",{class:p(["due-date",{overdue:g.isOverdue(e.dueDate)}])},o(g.formatDate(e.dueDate)),3)]),l("td",null,[l("div",le,[l("button",{onClick:a=>g.viewOrder(e),class:"btn btn-sm btn-outline",title:"Ver Detalhes"},[...m[47]||(m[47]=[l("i",{class:"icon-eye"},null,-1)])],8,se),"completed"!==e.status&&"cancelled"!==e.status?(y(),a("button",{key:0,onClick:a=>g.editOrder(e),class:"btn btn-sm btn-outline",title:"Editar"},[...m[48]||(m[48]=[l("i",{class:"icon-edit"},null,-1)])],8,te)):s("",!0),"open"===e.status?(y(),a("button",{key:1,onClick:a=>g.startOrder(e),class:"btn btn-sm btn-primary",title:"Iniciar"},[...m[49]||(m[49]=[l("i",{class:"icon-play"},null,-1)])],8,oe)):s("",!0),"in_progress"===e.status?(y(),a("button",{key:2,onClick:a=>g.completeOrder(e),class:"btn btn-sm btn-success",title:"Concluir"},[...m[50]||(m[50]=[l("i",{class:"icon-check"},null,-1)])],8,re)):s("",!0)])])]))),128))])]))]),g.showCreateModal||g.showEditModal?(y(),a("div",{key:0,class:"modal-overlay",onClick:m[22]||(m[22]=(...e)=>g.closeModals&&g.closeModals(...e))},[l("div",{class:"modal-content",onClick:m[21]||(m[21]=v(()=>{},["stop"]))},[l("div",de,[l("h3",null,o(g.showEditModal?"Editar Ordem de Serviço":"Nova Ordem de Serviço"),1),l("button",{onClick:m[9]||(m[9]=(...e)=>g.closeModals&&g.closeModals(...e)),class:"modal-close"},[...m[52]||(m[52]=[l("i",{class:"icon-x"},null,-1)])])]),l("form",{onSubmit:m[18]||(m[18]=v((...e)=>g.saveOrder&&g.saveOrder(...e),["prevent"])),class:"modal-body"},[l("div",ie,[l("div",ne,[m[53]||(m[53]=l("label",null,"Título *",-1)),r(l("input",{"onUpdate:modelValue":m[10]||(m[10]=e=>g.orderForm.title=e),type:"text",required:"",placeholder:"Título da ordem de serviço"},null,512),[[d,g.orderForm.title]])]),l("div",ce,[m[55]||(m[55]=l("label",null,"Tipo *",-1)),r(l("select",{"onUpdate:modelValue":m[11]||(m[11]=e=>g.orderForm.type=e),required:""},[...m[54]||(m[54]=[l("option",{value:""},"Selecione o tipo",-1),l("option",{value:"preventive"},"Preventiva",-1),l("option",{value:"corrective"},"Corretiva",-1),l("option",{value:"emergency"},"Emergencial",-1)])],512),[[i,g.orderForm.type]])]),l("div",ue,[m[57]||(m[57]=l("label",null,"Prioridade *",-1)),r(l("select",{"onUpdate:modelValue":m[12]||(m[12]=e=>g.orderForm.priority=e),required:""},[...m[56]||(m[56]=[n('<option value="" data-v-e8d90506>Selecione a prioridade</option><option value="low" data-v-e8d90506>Baixa</option><option value="medium" data-v-e8d90506>Média</option><option value="high" data-v-e8d90506>Alta</option><option value="urgent" data-v-e8d90506>Urgente</option>',5)])],512),[[i,g.orderForm.priority]])]),l("div",pe,[m[59]||(m[59]=l("label",null,"Ativo *",-1)),r(l("select",{"onUpdate:modelValue":m[13]||(m[13]=e=>g.orderForm.assetId=e),required:""},[m[58]||(m[58]=l("option",{value:""},"Selecione o ativo",-1)),(y(!0),a(c,null,u(g.availableAssets,e=>(y(),a("option",{key:e.id,value:e.id},o(e.code)+" - "+o(e.name),9,ve))),128))],512),[[i,g.orderForm.assetId]])]),l("div",me,[m[61]||(m[61]=l("label",null,"Técnico Responsável *",-1)),r(l("select",{"onUpdate:modelValue":m[14]||(m[14]=e=>g.orderForm.assignedTo=e),required:""},[m[60]||(m[60]=l("option",{value:""},"Selecione o técnico",-1)),(y(!0),a(c,null,u(g.technicians,e=>(y(),a("option",{key:e.id,value:e.name},o(e.name)+" - "+o(e.department),9,be))),128))],512),[[i,g.orderForm.assignedTo]])]),l("div",ge,[m[62]||(m[62]=l("label",null,"Data de Vencimento *",-1)),r(l("input",{"onUpdate:modelValue":m[15]||(m[15]=e=>g.orderForm.dueDate=e),type:"date",required:""},null,512),[[d,g.orderForm.dueDate]])])]),l("div",ye,[m[63]||(m[63]=l("label",null,"Descrição *",-1)),r(l("textarea",{"onUpdate:modelValue":m[16]||(m[16]=e=>g.orderForm.description=e),required:"",rows:"4",placeholder:"Descreva o problema ou serviço a ser realizado..."},null,512),[[d,g.orderForm.description]])]),l("div",Oe,[m[64]||(m[64]=l("label",null,"Observações",-1)),r(l("textarea",{"onUpdate:modelValue":m[17]||(m[17]=e=>g.orderForm.notes=e),rows:"3",placeholder:"Observações adicionais..."},null,512),[[d,g.orderForm.notes]])])],32),l("div",he,[l("button",{onClick:m[19]||(m[19]=(...e)=>g.closeModals&&g.closeModals(...e)),type:"button",class:"btn btn-outline"}," Cancelar "),l("button",{onClick:m[20]||(m[20]=(...e)=>g.saveOrder&&g.saveOrder(...e)),type:"submit",class:"btn btn-primary",disabled:g.loading},o(g.showEditModal?"Atualizar":"Criar")+" Ordem ",9,fe)])])])):s("",!0),g.showDetailsModal?(y(),a("div",{key:1,class:"modal-overlay",onClick:m[26]||(m[26]=(...e)=>g.closeModals&&g.closeModals(...e))},[l("div",{class:"modal-content large",onClick:m[25]||(m[25]=v(()=>{},["stop"]))},[l("div",ke,[m[66]||(m[66]=l("h3",null,"Detalhes da Ordem de Serviço",-1)),l("button",{onClick:m[23]||(m[23]=(...e)=>g.closeModals&&g.closeModals(...e)),class:"modal-close"},[...m[65]||(m[65]=[l("i",{class:"icon-x"},null,-1)])])]),g.selectedOrder?(y(),a("div",Ce,[l("div",De,[l("div",Te,[m[72]||(m[72]=l("h4",null,"Informações Gerais",-1)),l("div",we,[m[67]||(m[67]=l("label",null,"Código:",-1)),l("span",null,o(g.selectedOrder.code),1)]),l("div",Me,[m[68]||(m[68]=l("label",null,"Título:",-1)),l("span",null,o(g.selectedOrder.title),1)]),l("div",Fe,[m[69]||(m[69]=l("label",null,"Tipo:",-1)),l("span",{class:p(["type-badge",g.selectedOrder.type])},o(g.getTypeLabel(g.selectedOrder.type)),3)]),l("div",Ae,[m[70]||(m[70]=l("label",null,"Prioridade:",-1)),l("span",{class:p(["priority-badge",g.selectedOrder.priority])},o(g.getPriorityLabel(g.selectedOrder.priority)),3)]),l("div",xe,[m[71]||(m[71]=l("label",null,"Status:",-1)),l("span",{class:p(["status-badge",g.selectedOrder.status])},o(g.getStatusLabel(g.selectedOrder.status)),3)])]),l("div",Se,[m[76]||(m[76]=l("h4",null,"Ativo e Responsável",-1)),l("div",Ee,[m[73]||(m[73]=l("label",null,"Ativo:",-1)),l("span",null,o(g.selectedOrder.assetCode)+" - "+o(g.selectedOrder.assetName),1)]),l("div",Ue,[m[74]||(m[74]=l("label",null,"Técnico:",-1)),l("span",null,o(g.selectedOrder.assignedTo),1)]),l("div",Pe,[m[75]||(m[75]=l("label",null,"Departamento:",-1)),l("span",null,o(g.selectedOrder.department),1)])]),l("div",Ve,[m[81]||(m[81]=l("h4",null,"Datas",-1)),l("div",Ie,[m[77]||(m[77]=l("label",null,"Criada em:",-1)),l("span",null,o(g.formatDateTime(g.selectedOrder.createdAt)),1)]),l("div",Le,[m[78]||(m[78]=l("label",null,"Prazo:",-1)),l("span",{class:p({overdue:g.isOverdue(g.selectedOrder.dueDate)})},o(g.formatDateTime(g.selectedOrder.dueDate)),3)]),g.selectedOrder.startedAt?(y(),a("div",Re,[m[79]||(m[79]=l("label",null,"Iniciada em:",-1)),l("span",null,o(g.formatDateTime(g.selectedOrder.startedAt)),1)])):s("",!0),g.selectedOrder.completedAt?(y(),a("div",qe,[m[80]||(m[80]=l("label",null,"Concluída em:",-1)),l("span",null,o(g.formatDateTime(g.selectedOrder.completedAt)),1)])):s("",!0)])]),l("div",Be,[m[82]||(m[82]=l("h4",null,"Descrição",-1)),l("p",null,o(g.selectedOrder.description),1)]),g.selectedOrder.notes?(y(),a("div",Ne,[m[83]||(m[83]=l("h4",null,"Observações",-1)),l("p",null,o(g.selectedOrder.notes),1)])):s("",!0),g.selectedOrder.resolution?(y(),a("div",ze,[m[84]||(m[84]=l("h4",null,"Resolução",-1)),l("p",null,o(g.selectedOrder.resolution),1)])):s("",!0)])):s("",!0),l("div",_e,[l("button",{onClick:m[24]||(m[24]=(...e)=>g.closeModals&&g.closeModals(...e)),class:"btn btn-outline"}," Fechar ")])])])):s("",!0),g.successMessage?(y(),a("div",je,o(g.successMessage),1)):s("",!0),g.errorMessage?(y(),a("div",Ge,o(g.errorMessage),1)):s("",!0)])}],["__scopeId","data-v-e8d90506"]]);export{Ke as default};
//# sourceMappingURL=ServiceOrders---pYaFCv.js.map
