import{_ as e}from"./index-Dur0lEaU.js";import{r as l,c as a,o as t,a as s,e as u,f as i,x as v,B as o,F as r,C as n,L as d,k as c}from"./vue-vendor-BY5hdAT7.js";import"./utils-vendor-COuxBHZ0.js";const h={class:"simple-bar-chart"},y={class:"chart-header"},x={class:"chart-title"},b={key:0,class:"chart-legend"},m={class:"legend-label"},g=["width","height"],p={class:"grid"},f=["x1","y1","x2","y2"],w={class:"bars"},k=["x","y","width","height","fill","onMouseover"],M={class:"axes"},L=["x1","y1","x2","y2"],$=["x1","y1","x2","y2"],B={class:"axis-labels"},C=["x","y"],_=["x","y"],A={class:"tooltip-title"},E={class:"tooltip-value"},S=e({__name:"SimpleBarChart",props:{title:{type:String,default:"GrÃ¡fico de Barras"},datasets:{type:Array,required:!0,validator:e=>e.every(e=>e.label&&e.data&&Array.isArray(e.data)&&e.color)},labels:{type:Array,required:!0},width:{type:Number,default:600},height:{type:Number,default:300},horizontal:{type:Boolean,default:!1}},setup(e){const S=e,j=l(null),z=l(S.width),q=l(S.height),N=l({top:20,right:20,bottom:40,left:60}),R=l({visible:!1,x:0,y:0,label:"",value:""}),F=a(()=>{const e=S.datasets.flatMap(e=>e.data);return{min:Math.min(0,...e),max:Math.max(...e)}}),G=a(()=>(z.value-N.value.left-N.value.right)/S.labels.length),I=a(()=>{const e=S.datasets.length;return.8*G.value/e}),X=a(()=>(q.value-N.value.top-N.value.bottom)/(F.value.max-F.value.min)),Y=a(()=>{const e=[],l=(F.value.max-F.value.min)/5;for(let a=0;a<=5;a++){const t=F.value.min+l*a,s=q.value-N.value.bottom-(t-F.value.min)*X.value;e.push({y:s,value:t})}return e}),D=a(()=>S.labels.map((e,l)=>({x:N.value.left+l*G.value+G.value/2,text:e}))),H=a(()=>Y.value.map(e=>({y:e.y,text:Math.round(e.value).toLocaleString()}))),J=a(()=>{const e=[];return S.datasets.forEach((l,a)=>{l.data.forEach((t,s)=>{const u=N.value.left+s*G.value+(G.value-S.datasets.length*I.value)/2+a*I.value,i=Math.abs(t-F.value.min)*X.value,v=q.value-N.value.bottom-i;e.push({key:`${a}-${s}`,x:u,y:v,width:I.value,height:i,color:l.color,value:t,label:S.labels[s],datasetLabel:l.label})})}),e}),K=()=>{R.value.visible=!1},O=()=>{if(j.value){const e=j.value.getBoundingClientRect();z.value=Math.max(300,e.width)}};return t(()=>{O(),window.addEventListener("resize",O)}),s(()=>{window.removeEventListener("resize",O)}),(l,a)=>(c(),u("div",h,[i("div",y,[i("h3",x,o(e.title),1),e.datasets.length>1?(c(),u("div",b,[(c(!0),u(r,null,n(e.datasets,e=>(c(),u("div",{key:e.label,class:"legend-item"},[i("div",{class:"legend-color",style:d({backgroundColor:e.color})},null,4),i("span",m,o(e.label),1)]))),128))])):v("",!0)]),i("div",{class:"chart-container",ref_key:"chartContainer",ref:j},[(c(),u("svg",{width:z.value,height:q.value,class:"chart-svg"},[i("g",p,[(c(!0),u(r,null,n(Y.value,(e,l)=>(c(),u("line",{key:`h-${l}`,x1:N.value.left,y1:e.y,x2:z.value-N.value.right,y2:e.y,class:"grid-line"},null,8,f))),128))]),i("g",w,[(c(!0),u(r,null,n(J.value,e=>(c(),u("rect",{key:e.key,x:e.x,y:e.y,width:e.width,height:e.height,fill:e.color,class:"bar",onMouseover:l=>((e,l)=>{const a=j.value.getBoundingClientRect();R.value={visible:!0,x:e.clientX-a.left+10,y:e.clientY-a.top-10,label:`${l.datasetLabel} - ${l.label}`,value:l.value.toLocaleString()}})(l,e),onMouseout:K},null,40,k))),128))]),i("g",M,[i("line",{x1:N.value.left,y1:q.value-N.value.bottom,x2:z.value-N.value.right,y2:q.value-N.value.bottom,class:"axis-line"},null,8,L),i("line",{x1:N.value.left,y1:N.value.top,x2:N.value.left,y2:q.value-N.value.bottom,class:"axis-line"},null,8,$)]),i("g",B,[(c(!0),u(r,null,n(D.value,(e,l)=>(c(),u("text",{key:`x-${l}`,x:e.x,y:q.value-N.value.bottom+20,class:"axis-label","text-anchor":"middle"},o(e.text),9,C))),128)),(c(!0),u(r,null,n(H.value,(e,l)=>(c(),u("text",{key:`y-${l}`,x:N.value.left-10,y:e.y,class:"axis-label","text-anchor":"end","dominant-baseline":"middle"},o(e.text),9,_))),128))])],8,g)),R.value.visible?(c(),u("div",{key:0,class:"chart-tooltip",style:d({left:R.value.x+"px",top:R.value.y+"px"})},[i("div",A,o(R.value.label),1),i("div",E,o(R.value.value),1)],4)):v("",!0)],512)]))}},[["__scopeId","data-v-4d591bd4"]]);export{S as default};
//# sourceMappingURL=SimpleBarChart-CKerFFeC.js.map
