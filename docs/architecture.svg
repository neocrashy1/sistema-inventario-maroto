<?xml version="1.0" encoding="UTF-8"?>
<svg width="1100" height="650" viewBox="0 0 1100 650" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .box { fill: #f8fafc; stroke: #0ea5e9; stroke-width: 2; rx: 10; }
      .title { font: 700 18px 'Segoe UI', Tahoma, sans-serif; fill: #0f172a; }
      .text { font: 400 14px 'Segoe UI', Tahoma, sans-serif; fill: #334155; }
      .badge { fill: #e0f2fe; stroke: #0ea5e9; stroke-width: 1; rx: 6; }
      .badge-text { font: 600 12px 'Segoe UI', Tahoma, sans-serif; fill: #0369a1; }
      .arrow { stroke: #334155; stroke-width: 2; fill: none; }
      .arrow-accent { stroke: #0ea5e9; stroke-width: 2; fill: none; }
      .label { font: 600 12px 'Segoe UI', Tahoma, sans-serif; fill: #475569; }
      .cloud { fill: #eef2ff; stroke: #6366f1; stroke-width: 2; rx: 10; }
    </style>
    <marker id="arrowHead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#334155" />
    </marker>
    <marker id="arrowHeadAccent" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0ea5e9" />
    </marker>
  </defs>

  <!-- Header -->
  <text x="550" y="40" text-anchor="middle" class="title">Arquitetura Cliente-Servidor - Levitiis AMS</text>
  <text x="550" y="65" text-anchor="middle" class="text">Agente Python → API REST (FastAPI) → Banco (PostgreSQL/SQL Server) → Dashboard Web (Vue)</text>

  <!-- Python Agent -->
  <rect x="60" y="120" width="260" height="130" class="box" />
  <text x="190" y="145" text-anchor="middle" class="title">Agente Python</text>
  <text x="80" y="170" class="text">• Coleta métricas e status</text>
  <text x="80" y="190" class="text">• Descoberta de rede</text>
  <text x="80" y="210" class="text">• Registro/Heartbeat</text>
  <rect x="80" y="230" width="220" height="26" class="badge" />
  <text x="190" y="247" text-anchor="middle" class="badge-text">TLS + Autenticação via Token JWT</text>

  <!-- FastAPI -->
  <rect x="400" y="120" width="300" height="220" class="box" />
  <text x="550" y="145" text-anchor="middle" class="title">API REST (FastAPI)</text>
  <text x="420" y="170" class="text">• /machines/register</text>
  <text x="420" y="190" class="text">• /machines/status</text>
  <text x="420" y="210" class="text">• /tickets/create</text>
  <text x="420" y="230" class="text">• /alerts/send</text>
  <text x="420" y="255" class="text">• Middlewares: CORS, TrustedHost, GZip</text>
  <text x="420" y="275" class="text">• Segurança: Rate limiting, Validação</text>
  <text x="420" y="295" class="text">• Autenticação: JWT + Bearer</text>
  <rect x="430" y="310" width="240" height="26" class="badge" />
  <text x="550" y="327" text-anchor="middle" class="badge-text">Observabilidade + Logs estruturados</text>

  <!-- Database -->
  <rect x="760" y="120" width="280" height="150" class="box" />
  <text x="900" y="145" text-anchor="middle" class="title">Banco de Dados</text>
  <text x="780" y="170" class="text">• PostgreSQL (prod) / SQL Server</text>
  <text x="780" y="190" class="text">• SQLite (dev) via SQLAlchemy</text>
  <text x="780" y="210" class="text">• Migrações com Alembic</text>
  <rect x="780" y="230" width="240" height="26" class="badge" />
  <text x="900" y="247" text-anchor="middle" class="badge-text">Criptografia em repouso (TDE/PG)</text>

  <!-- Redis Cache / Queue -->
  <rect x="760" y="290" width="280" height="120" class="cloud" />
  <text x="900" y="315" text-anchor="middle" class="title">Redis</text>
  <text x="780" y="340" class="text">• Cache seletivo (TTL/estratégias)</text>
  <text x="780" y="360" class="text">• Rate limiting e sessões</text>

  <!-- Dashboard Web -->
  <rect x="330" y="380" width="440" height="160" class="box" />
  <text x="550" y="405" text-anchor="middle" class="title">Dashboard Web (Vue)</text>
  <text x="350" y="430" class="text">• Gestão de Ativos, Máquinas, Tickets, Alertas</text>
  <text x="350" y="450" class="text">• Axios + Interceptors (Token, Refresh, Erros)</text>
  <text x="350" y="470" class="text">• Rotas protegidas + Fallback de erro</text>
  <rect x="360" y="490" width="400" height="26" class="badge" />
  <text x="560" y="507" text-anchor="middle" class="badge-text">Comunicação via HTTPS (TLS) + CORS restrito</text>

  <!-- Arrows -->
  <!-- Agent -> API -->
  <line x1="320" y1="185" x2="400" y2="185" class="arrow" marker-end="url(#arrowHead)" />
  <text x="360" y="170" class="label">JSON</text>

  <!-- API -> DB -->
  <line x1="700" y1="180" x2="760" y2="180" class="arrow" marker-end="url(#arrowHead)" />
  <text x="730" y="165" class="label">ORM</text>

  <!-- API -> Redis -->
  <line x1="700" y1="320" x2="760" y2="320" class="arrow" marker-end="url(#arrowHead)" />
  <text x="730" y="305" class="label">Cache/Rate limit</text>

  <!-- Dashboard -> API -->
  <line x1="550" y1="380" x2="550" y2="340" class="arrow-accent" marker-end="url(#arrowHeadAccent)" />
  <text x="560" y="360" class="label">Axios</text>

  <!-- Security banners -->
  <rect x="60" y="520" width="260" height="40" class="badge" />
  <text x="190" y="545" text-anchor="middle" class="badge-text">Padrões: TLS, JWT, CORS, Rate limiting</text>

  <rect x="780" y="520" width="240" height="40" class="badge" />
  <text x="900" y="545" text-anchor="middle" class="badge-text">Observabilidade: Structlog, métricas</text>
</svg>