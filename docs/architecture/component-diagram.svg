<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <defs>
    <style type="text/css"><![CDATA[
      .box { fill: #ffffff; stroke: #0ea5e9; stroke-width: 2; rx: 10; }
      .box-accent { fill: #f8fafc; stroke: #64748b; stroke-width: 2; rx: 10; }
      .title { font: bold 16px sans-serif; fill: #0f172a; }
      .text { font: 13px sans-serif; fill: #334155; }
      .arrow { stroke: #334155; stroke-width: 2; marker-end: url(#arrowhead); }
      .arrow-secure { stroke: #22c55e; stroke-width: 2; marker-end: url(#arrowhead); }
      .badge { font: 12px sans-serif; fill: #065f46; }
      .label { font: 12px sans-serif; fill: #334155; }
    ]]></style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#334155" />
    </marker>
  </defs>

  <!-- Client Side: Python Agent -->
  <rect class="box" x="60" y="80" width="320" height="180" />
  <text class="title" x="80" y="110">Agente Python (Cliente)</text>
  <text class="text" x="80" y="140">• Coleta métricas (CPU, Memória, Disco, Rede)</text>
  <text class="text" x="80" y="160">• Envia heartbeat e eventos</text>
  <text class="text" x="80" y="180">• Autenticação via Token/JWT</text>
  <text class="text" x="80" y="200">• Atualização/Config remota</text>

  <!-- Internet / TLS -->
  <rect class="box-accent" x="420" y="30" width="360" height="60" />
  <text class="title" x="440" y="60">HTTPS (TLS 1.2+)</text>
  <text class="badge" x="440" y="80">Opção mTLS para agentes críticos</text>

  <!-- API Layer -->
  <rect class="box" x="820" y="80" width="320" height="220" />
  <text class="title" x="840" y="110">API REST (FastAPI)</text>
  <text class="text" x="840" y="140">• /machines/register</text>
  <text class="text" x="840" y="160">• /machines/status</text>
  <text class="text" x="840" y="180">• /tickets/create</text>
  <text class="text" x="840" y="200">• /alerts/send</text>
  <text class="text" x="840" y="220">• Auth: Bearer JWT, Rate Limit</text>

  <!-- Auth / Security -->
  <rect class="box-accent" x="820" y="320" width="320" height="120" />
  <text class="title" x="840" y="350">Segurança</text>
  <text class="text" x="840" y="370">• TLS, HSTS, CORS restrito</text>
  <text class="text" x="840" y="390">• Gestão de chaves/segredos (Vault/KMS)</text>

  <!-- Database -->
  <rect class="box" x="820" y="470" width="320" height="160" />
  <text class="title" x="840" y="500">Banco de Dados</text>
  <text class="text" x="840" y="520">• PostgreSQL (primário)</text>
  <text class="text" x="840" y="540">• SQL Server (opcional)</text>
  <text class="text" x="840" y="560">• ORM: SQLAlchemy, Migrações: Alembic</text>

  <!-- Dashboard React -->
  <rect class="box" x="60" y="360" width="320" height="200" />
  <text class="title" x="80" y="390">Dashboard React</text>
  <text class="text" x="80" y="410">• Vite + React + TypeScript</text>
  <text class="text" x="80" y="430">• Auth JWT, React Query/Axios</text>
  <text class="text" x="80" y="450">• Gestão: Máquinas, Status, Tickets, Alertas</text>

  <!-- Optional worker/queue -->
  <rect class="box-accent" x="420" y="520" width="360" height="110" />
  <text class="title" x="440" y="550">Worker de Alertas (Opcional)</text>
  <text class="text" x="440" y="570">• Celery/Redis para notificações (e-mail/Slack)</text>

  <!-- Arrows -->
  <line class="arrow-secure" x1="380" y1="140" x2="820" y2="140" />
  <text class="label" x="520" y="130">TLS + JWT</text>

  <line class="arrow" x1="380" y1="420" x2="820" y2="180" />
  <text class="label" x="520" y="380">REST API</text>

  <line class="arrow" x1="980" y1="300" x2="980" y2="470" />
  <text class="label" x="910" y="440">SQL</text>

  <line class="arrow" x1="780" y1="560" x2="820" y2="560" />
  <text class="label" x="690" y="545">Jobs de alerta</text>

  <!-- Notes -->
  <text class="text" x="60" y="600">Observações:</text>
  <text class="text" x="60" y="620">• Versionamento de API (v1) | • Rate limiting para agentes | • Logs e auditoria</text>
</svg>